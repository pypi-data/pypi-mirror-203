"use strict";(self.webpackChunk_jupyterlab_nbgallery_environment_registration=self.webpackChunk_jupyterlab_nbgallery_environment_registration||[]).push([[784],{784:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var r=t(38),a=t(142),o=t(820),i=t(569),l=t.n(i);const s={id:"@jupyterlab-nbgallery/environment-registration",autoStart:!0,requires:[r.ISettingRegistry],activate:async(e,n)=>{let t=!1,r="",i="";try{const e=await async function(e="",n={}){const t=o.ServerConnection.makeSettings(),r=a.URLExt.join(t.baseUrl,"jupyterlab_nbgallery",e);let i;try{i=await o.ServerConnection.makeRequest(r,n,t)}catch(e){throw new o.ServerConnection.NetworkError(e)}const l=await i.json();if(!i.ok)throw new o.ServerConnection.ResponseError(i,l.message);return l}("environment");r=e.NBGALLERY_URL,i=e.NBGALLERY_CLIENT_NAME}catch(e){console.error(`ERROR on get /jupyter_nbgallery/environment.\n ${e}`)}Promise.all([e.restored,n.load("@jupyterlab-nbgallery/environment-registration:environment-registration")]).then((([,e])=>{!function(e){r&&r.length>0?e.set("nbgallery_url",r):r=e.get("nbgallery_url").composite,i&&i.length>0?e.set("nbgallery_client_name",i):i=e.get("nbgallery_client_name").composite,t=e.get("registered").composite,!t&&r&&r.length>0&&l().ajax({method:"POST",headers:{Accept:"application/json"},url:r+"/environments",data:{name:i,url:a.PageConfig.getBaseUrl(),user_interface:"lab"},xhrFields:{withCredentials:!0},success:function(n){e.set("registered",!0),console.log("Environment Registered to NBGallery")}})}(e)}))}}}}]);