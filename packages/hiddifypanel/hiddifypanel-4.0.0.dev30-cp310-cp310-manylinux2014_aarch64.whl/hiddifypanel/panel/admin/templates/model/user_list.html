{% extends 'hiddify-flask-admin/list.html' %}

{% block body %}
    {{super()}}

    <div class="callout callout-success">
        {{_('User usage will be updated every 6 minutes. To update it now click <a href="%(link)s" class="btn btn-info">here</a>',link=url_for("admin.Actions:update_usage"))}}
        
    </div>
    <style>
        .table td{
            vertical-align: middle;
        }
        .col-name{
            white-space: nowrap;
        }
    .col-expiry_time{
        white-space: nowrap;
    }
    
    td.col-domain{
        /* direction:ltr */
    }
    .col-UserLinks a{
        text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100px;
    overflow: hidden;
    }
    .col-uuid span{
        text-overflow: ellipsis;
    white-space: nowrap;
    width: 80px;
    overflow: hidden;
    display: inline-block;
    }
    .table td{
        text-align: start;
    }
    </style>
{% endblock %}
{% block tail_js%}
{{super()}}
<script>
    function show_send_message(id){
        bootbox.prompt({
            title: '{{_("Please type your message to send to the telegram:")}}',
            inputType: 'textarea',
            callback: function (result) {
                console.log(result);                                    
                $.ajax({
                    type: "POST",
                    url: '{{url_for("api.sendmsgresource")}}',
                    
                    data: JSON.stringify({'text':result,'id':id}),
                    contentType: "application/json",
                    dataType: "json",
                    success: function(){
                        $(document).Toasts('create', {
                            class: 'bg-success',
                            position: "{{'topRight' if get_locale()=='fa' else 'topLeft'}}" ,
                            title: `{{_('Success')}}`,
                            body: `{{_("The message has been sent.")}}`
                            })    
                    },
                    
                });

            }
        });
    }

</script>
%endblock