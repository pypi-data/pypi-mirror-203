import os
from tsstp.input.file_input import Input

# 获取当前脚本所在目录的绝对路径
current_dir = os.path.dirname(os.path.abspath(__file__))
def test_data_parse():
    basepath = os.path.join(current_dir, 'testdata\\')
    file_path_list = [basepath + x for x in os.listdir(basepath)]

    poscar_file = basepath + 'POSCAR'
    test_data = basepath + 'text_file.txt'
    outcar = basepath + 'OUTCAR'
    xdatcar = basepath + 'XDATCAR'

    poscar_data = '''
    POSCAR\(4)                              
       1.00000000000000     
         8.3879995346000005    0.0000000000000000    0.0000000000000000
         0.0000000000000000    8.3879995346000005    0.0000000000000000
         0.0000000000000000    0.0000000000000000   23.0000000000000000
       O    Fe   Ni
        50    33     1
    Selective dynamics
    Direct
      0.5915683032071809  0.4076348462601602  0.3236733991222093   T   T   T
      0.6870646622156227  0.3019365196287453  0.3103828207546814   T   T   T
      0.3630810210536513  0.3675710238882842  0.4462171285301444   T   T   T
      0.6312774165690974  0.6359020719110883  0.4460652700582469   T   T   T
      0.1034239149821314  0.6182630749662752  0.4443934592078488   T   T   T
      0.8884112102198707  0.3842516059121611  0.4453508619041938   T   T   T
      0.3798693812881971  0.8943751866295495  0.4442736794178238   T   T   T
      0.6138185431204929  0.1094628714447662  0.4453949264532074   T   T   T
      0.1460929563952582  0.1511753838855331  0.4495652323750344   T   T   T
      0.8481353013092298  0.8527124318740430  0.4499216601262892   T   T   T
      0.3622735022466660  0.6366474075220162  0.5337409646875285   T   T   T
      0.6304779841965802  0.3684030218642275  0.5368171582936877   T   T   T
      0.1128001793327870  0.8852245477662335  0.5437372635670031   T   T   T
      0.8854582153913581  0.1118876070999771  0.5389489857602635   T   T   T
      0.1089344200672412  0.3674780231491631  0.5405416957824908   T   T   T
      0.8828364160941208  0.6354067641796362  0.5395969860907350   T   T   T
    '''
    test_data = """
     POSCAR:(4)                              
    1.00000000000000     
      8.3879995346000005    0.0000000000000000    0.0000000000000000
      0.0000000000000000    8.3879995346000005    0.0000000000000000
      0.0000000000000000    0.0000000000000000   23.0000000000000000
    O    Fe   Ni
     50    33     1
    Direct configuration=     1
     """
    # {'string': ['CeO', '2', '-', '111', '-', 'ovac', '-', '11', 'Au']}
    # print(r'{}'.format(poscar_data))
    ne_number = """
    -0.00050255  0.99951883  0.43019119
    """

    multi_temp_data3 = """
    free energy    TOTEN  =      -565.56798583 eV
    """


    input_data = Input(string=poscar_data)
    input_obj = Input(path=xdatcar)
    token_list = input_obj.parse()
    print('token_list:',token_list[:6])
    print('len of token_list:',len(token_list))
test_data_parse()