workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      when: never
    - if: $CI_COMMIT_TAG
    - if: $CI_COMMIT_BRANCH

stages:
  - cicd
  - test
  - deploy

include:
  - .gitlab/build_cicd_image.yml
  - .gitlab/base.yml
  - .gitlab/test_base.yml
  - .gitlab/lint.yml
  - .gitlab/coverage.yml
  - .gitlab/deploy.yml
