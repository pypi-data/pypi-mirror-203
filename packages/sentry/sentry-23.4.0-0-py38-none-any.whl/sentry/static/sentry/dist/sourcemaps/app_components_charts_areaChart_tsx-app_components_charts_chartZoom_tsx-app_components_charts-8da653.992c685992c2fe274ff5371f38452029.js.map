{"version":3,"file":"chunks/app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_charts-8da653.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/charts/areaChart.tsx","webpack:///./app/components/charts/series/areaSeries.tsx","webpack:///./app/components/charts/components/dataZoomSlider.tsx","webpack:///./app/components/charts/chartZoom.tsx","webpack:///./app/components/charts/components/dataZoomInside.tsx","webpack:///./app/components/charts/components/toolBox.tsx","webpack:///./app/components/charts/transparentLoadingMask.tsx","webpack:///./app/utils/discover/discoverQuery.tsx","webpack:///./app/views/performance/transactionSummary/transactionEvents/utils.tsx","webpack:///../node_modules/lodash/negate.js","webpack:///../node_modules/lodash/omitBy.js"],"sourcesContent":["import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport AreaSeries from './series/areaSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type AreaChartSeries = Series & Omit<LineSeriesOption, 'data' | 'name'>;\n\nexport interface AreaChartProps extends Omit<ChartProps, 'series'> {\n  series: AreaChartSeries[];\n  additionalSeries?: LineSeriesOption[];\n  stacked?: boolean;\n}\n\nexport function AreaChart({series, stacked, colors, ...props}: AreaChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      data-test-id=\"area-chart\"\n      colors={colors}\n      series={series.map(({seriesName, data, ...otherSeriesProps}, i) =>\n        AreaSeries({\n          stack: stacked ? 'area' : undefined,\n          name: seriesName,\n          data: data.map(({name, value}) => [name, value]),\n          lineStyle: {\n            color: colors?.[i],\n            opacity: 1,\n            width: 0.4,\n          },\n          areaStyle: {\n            color: colors?.[i],\n            opacity: 1.0,\n          },\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n          ...otherSeriesProps,\n        })\n      )}\n    />\n  );\n}\n","import type {LineSeriesOption} from 'echarts';\n\nimport LineSeries from 'sentry/components/charts/series/lineSeries';\n\nexport default function AreaSeries(props: LineSeriesOption = {}): LineSeriesOption {\n  return LineSeries({\n    ...props,\n  });\n}\n","import 'echarts/lib/component/dataZoomSlider';\n\nimport type {SliderDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: SliderDataZoomComponentOption = {\n  realtime: false,\n  showDetail: false,\n  left: 0,\n  right: 6,\n  bottom: 8,\n};\n\nexport default function DataZoomSlider(\n  props: SliderDataZoomComponentOption | SliderDataZoomComponentOption[]\n): SliderDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import {Component} from 'react';\nimport {InjectedRouter} from 'react-router';\nimport type {\n  DataZoomComponentOption,\n  InsideDataZoomComponentOption,\n  ToolboxComponentOption,\n  XAXisComponentOption,\n} from 'echarts';\nimport moment from 'moment';\nimport * as qs from 'query-string';\n\nimport {updateDateTime} from 'sentry/actionCreators/pageFilters';\nimport DataZoomInside from 'sentry/components/charts/components/dataZoomInside';\nimport DataZoomSlider from 'sentry/components/charts/components/dataZoomSlider';\nimport ToolBox from 'sentry/components/charts/components/toolBox';\nimport {DateString} from 'sentry/types';\nimport {\n  EChartChartReadyHandler,\n  EChartDataZoomHandler,\n  EChartFinishedHandler,\n  EChartRestoreHandler,\n} from 'sentry/types/echarts';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {getUtcDateString, getUtcToLocalDateObject} from 'sentry/utils/dates';\n\nconst getDate = date =>\n  date ? moment.utc(date).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS) : null;\n\ntype Period = {\n  end: DateString;\n  period: string | null;\n  start: DateString;\n};\n\nconst ZoomPropKeys = [\n  'period',\n  'xAxis',\n  'onChartReady',\n  'onDataZoom',\n  'onRestore',\n  'onFinished',\n] as const;\n\nexport type ZoomRenderProps = Pick<Props, (typeof ZoomPropKeys)[number]> & {\n  dataZoom?: DataZoomComponentOption[];\n  end?: Date;\n  isGroupedByDate?: boolean;\n  showTimeInTooltip?: boolean;\n  start?: Date;\n  toolBox?: ToolboxComponentOption;\n  utc?: boolean;\n};\n\ntype Props = {\n  children: (props: ZoomRenderProps) => React.ReactNode;\n  chartZoomOptions?: DataZoomComponentOption;\n  disabled?: boolean;\n  end?: DateString;\n  onChartReady?: EChartChartReadyHandler;\n  onDataZoom?: EChartDataZoomHandler;\n  onFinished?: EChartFinishedHandler;\n  onRestore?: EChartRestoreHandler;\n  onZoom?: (period: Period) => void;\n  period?: string | null;\n  router?: InjectedRouter;\n  showSlider?: boolean;\n  start?: DateString;\n  usePageDate?: boolean;\n  utc?: boolean | null;\n  xAxis?: XAXisComponentOption;\n  xAxisIndex?: number | number[];\n};\n\n/**\n * This is a very opinionated component that takes a render prop through `children`. It\n * will provide props to be passed to `BaseChart` to enable support of zooming without\n * eCharts' clunky zoom toolboxes.\n *\n * This also is very tightly coupled with the Global Selection Header. We can make it more\n * generic if need be in the future.\n */\nclass ChartZoom extends Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    // Zoom history\n    this.history = [];\n\n    // Initialize current period instance state for zoom history\n    this.saveCurrentPeriod(props);\n  }\n\n  componentDidUpdate() {\n    if (this.props.disabled) {\n      return;\n    }\n\n    // When component updates, make sure we sync current period state\n    // for use in zoom history\n    this.saveCurrentPeriod(this.props);\n  }\n\n  history: Period[];\n  currentPeriod?: Period;\n  zooming: (() => void) | null = null;\n\n  /**\n   * Save current period state from period in props to be used\n   * in handling chart's zoom history state\n   */\n  saveCurrentPeriod = props => {\n    this.currentPeriod = {\n      period: props.period,\n      start: getDate(props.start),\n      end: getDate(props.end),\n    };\n  };\n\n  /**\n   * Sets the new period due to a zoom related action\n   *\n   * Saves the current period to an instance property so that we\n   * can control URL state when zoom history is being manipulated\n   * by the chart controls.\n   *\n   * Saves a callback function to be called after chart animation is completed\n   */\n  setPeriod = ({period, start, end}, saveHistory = false) => {\n    const {router, onZoom, usePageDate} = this.props;\n    const startFormatted = getDate(start);\n    const endFormatted = getDate(end);\n\n    // Save period so that we can revert back to it when using echarts \"back\" navigation\n    if (saveHistory) {\n      this.history.push(this.currentPeriod!);\n    }\n\n    // Callback to let parent component know zoom has changed\n    // This is required for some more perceived responsiveness since\n    // we delay updating URL state so that chart animation can finish\n    //\n    // Parent container can use this to change into a loading state before\n    // URL parameters are changed\n    onZoom?.({\n      period,\n      start: startFormatted,\n      end: endFormatted,\n    });\n\n    this.zooming = () => {\n      if (usePageDate && router) {\n        const newQuery = {\n          ...router.location.query,\n          pageStart: start ? getUtcDateString(start) : undefined,\n          pageEnd: end ? getUtcDateString(end) : undefined,\n          pageStatsPeriod: period ?? undefined,\n        };\n\n        // Only push new location if query params has changed because this will cause a heavy re-render\n        if (qs.stringify(newQuery) !== qs.stringify(router.location.query)) {\n          router.push({\n            pathname: router.location.pathname,\n            query: newQuery,\n          });\n        }\n      } else {\n        updateDateTime(\n          {\n            period,\n            start: startFormatted\n              ? getUtcToLocalDateObject(startFormatted)\n              : startFormatted,\n            end: endFormatted ? getUtcToLocalDateObject(endFormatted) : endFormatted,\n          },\n          router\n        );\n      }\n\n      this.saveCurrentPeriod({period, start, end});\n    };\n  };\n\n  /**\n   * Enable zoom immediately instead of having to toggle to zoom\n   */\n  handleChartReady = chart => {\n    this.props.onChartReady?.(chart);\n  };\n\n  /**\n   * Restores the chart to initial viewport/zoom level\n   *\n   * Updates URL state to reflect initial params\n   */\n  handleZoomRestore = (evt, chart) => {\n    if (!this.history.length) {\n      return;\n    }\n\n    this.setPeriod(this.history[0]);\n\n    // reset history\n    this.history = [];\n\n    this.props.onRestore?.(evt, chart);\n  };\n\n  handleDataZoom = (evt, chart) => {\n    const model = chart.getModel();\n    const {startValue, endValue} = model._payload.batch[0];\n\n    // if `rangeStart` and `rangeEnd` are null, then we are going back\n    if (startValue === null && endValue === null) {\n      const previousPeriod = this.history.pop();\n\n      if (!previousPeriod) {\n        return;\n      }\n\n      this.setPeriod(previousPeriod);\n    } else {\n      const start = moment.utc(startValue);\n\n      // Add a day so we go until the end of the day (e.g. next day at midnight)\n      const end = moment.utc(endValue);\n\n      this.setPeriod({period: null, start, end}, true);\n    }\n\n    this.props.onDataZoom?.(evt, chart);\n  };\n\n  /**\n   * Chart event when *any* rendering+animation finishes\n   *\n   * `this.zooming` acts as a callback function so that\n   * we can let the native zoom animation on the chart complete\n   * before we update URL state and re-render\n   */\n  handleChartFinished = (_props, chart) => {\n    if (typeof this.zooming === 'function') {\n      this.zooming();\n      this.zooming = null;\n    }\n\n    // This attempts to activate the area zoom toolbox feature\n    const zoom = chart._componentsViews?.find(c => c._features && c._features.dataZoom);\n    if (zoom && !zoom._features.dataZoom._isZoomActive) {\n      // Calling dispatchAction will re-trigger handleChartFinished\n      chart.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'dataZoomSelect',\n        dataZoomSelectActive: true,\n      });\n    }\n\n    callIfFunction(this.props.onFinished);\n  };\n\n  render() {\n    const {\n      utc: _utc,\n      start: _start,\n      end: _end,\n      disabled,\n      children,\n      xAxisIndex,\n\n      router: _router,\n      onZoom: _onZoom,\n      onRestore: _onRestore,\n      onChartReady: _onChartReady,\n      onDataZoom: _onDataZoom,\n      onFinished: _onFinished,\n      showSlider,\n      chartZoomOptions,\n      ...props\n    } = this.props;\n\n    const utc = _utc ?? undefined;\n    const start = _start ? getUtcToLocalDateObject(_start) : undefined;\n    const end = _end ? getUtcToLocalDateObject(_end) : undefined;\n\n    if (disabled) {\n      return children({\n        utc,\n        start,\n        end,\n        ...props,\n      });\n    }\n    const renderProps = {\n      // Zooming only works when grouped by date\n      isGroupedByDate: true,\n      onChartReady: this.handleChartReady,\n      utc,\n      start,\n      end,\n      dataZoom: showSlider\n        ? [\n            ...DataZoomSlider({xAxisIndex, ...chartZoomOptions}),\n            ...DataZoomInside({\n              xAxisIndex,\n              ...(chartZoomOptions as InsideDataZoomComponentOption),\n            }),\n          ]\n        : DataZoomInside({\n            xAxisIndex,\n            ...(chartZoomOptions as InsideDataZoomComponentOption),\n          }),\n      showTimeInTooltip: true,\n      toolBox: ToolBox(\n        {},\n        {\n          dataZoom: {\n            title: {\n              zoom: '',\n              back: '',\n            },\n            iconStyle: {\n              borderWidth: 0,\n              color: 'transparent',\n              opacity: 0,\n            },\n          },\n        }\n      ),\n      onDataZoom: this.handleDataZoom,\n      onFinished: this.handleChartFinished,\n      onRestore: this.handleZoomRestore,\n      ...props,\n    };\n\n    return children(renderProps);\n  }\n}\n\nexport default ChartZoom;\n","import 'echarts/lib/component/dataZoomInside';\n\nimport type {InsideDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: InsideDataZoomComponentOption = {\n  type: 'inside',\n  // Mouse wheel can not trigger zoom\n  zoomOnMouseWheel: false,\n  // The translation (by mouse drag or touch drag) is available but zoom is not\n  zoomLock: true,\n  throttle: 50,\n};\n\nexport default function DataZoomInside(\n  props: InsideDataZoomComponentOption | InsideDataZoomComponentOption[]\n): InsideDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import type {ToolboxComponentOption} from 'echarts';\n\nfunction getFeatures({\n  dataZoom,\n  ...features\n}: ToolboxComponentOption['feature'] = {}): ToolboxComponentOption['feature'] {\n  return {\n    ...(dataZoom\n      ? {\n          dataZoom: {\n            yAxisIndex: 'none',\n            title: {\n              zoom: 'zoom',\n              back: 'undo',\n            },\n            ...dataZoom,\n          },\n        }\n      : {}),\n    ...features,\n  };\n}\n\nexport default function ToolBox(\n  options: ToolboxComponentOption,\n  features: ToolboxComponentOption['feature']\n): ToolboxComponentOption {\n  return {\n    right: 0,\n    top: 0,\n    itemSize: 16,\n    // Stack the toolbox under the legend.\n    // so all series names are clickable.\n    z: -1,\n\n    feature: getFeatures(features),\n    ...options,\n  };\n}\n","import styled from '@emotion/styled';\n\nimport LoadingMask, {LoadingMaskProps} from 'sentry/components/loadingMask';\n\ninterface TransparentLoadingMaskProps extends LoadingMaskProps {\n  visible: boolean;\n  children?: React.ReactNode;\n  className?: string;\n}\n\nconst TransparentLoadingMask = styled(\n  ({className, visible, children, ...props}: TransparentLoadingMaskProps) => {\n    const other = visible ? {...props, 'data-test-id': 'loading-placeholder'} : props;\n    return (\n      <LoadingMask className={className} {...other}>\n        {children}\n      </LoadingMask>\n    );\n  }\n)<TransparentLoadingMaskProps>`\n  ${p => !p.visible && 'display: none;'};\n  opacity: 0.4;\n  z-index: 1;\n`;\n\nexport default TransparentLoadingMask;\n","import {EventsMetaType, MetaType} from 'sentry/utils/discover/eventView';\nimport {TransactionThresholdMetric} from 'sentry/views/performance/transactionSummary/transactionThresholdModal';\n\nimport GenericDiscoverQuery, {\n  DiscoverQueryProps,\n  GenericChildrenProps,\n  useGenericDiscoverQuery,\n} from './genericDiscoverQuery';\n\n/**\n * An individual row in a DiscoverQuery result\n */\nexport type TableDataRow = {\n  [key: string]: React.ReactText;\n  id: string;\n};\n\n/**\n * A DiscoverQuery result including rows and metadata.\n */\nexport type TableData = {\n  data: Array<TableDataRow>;\n  meta?: MetaType;\n};\n\n/**\n * A DiscoverQuery result including rows and metadata from the events endpoint.\n */\nexport type EventsTableData = {\n  data: Array<TableDataRow>;\n  meta?: EventsMetaType;\n};\n\nexport type TableDataWithTitle = TableData & {title: string};\n\ntype DiscoverQueryPropsWithThresholds = DiscoverQueryProps & {\n  transactionName?: string;\n  transactionThreshold?: number;\n  transactionThresholdMetric?: TransactionThresholdMetric;\n};\n\ntype DiscoverQueryComponentProps = DiscoverQueryPropsWithThresholds & {\n  children: (props: GenericChildrenProps<TableData>) => React.ReactNode;\n};\n\nfunction shouldRefetchData(\n  prevProps: DiscoverQueryPropsWithThresholds,\n  nextProps: DiscoverQueryPropsWithThresholds\n) {\n  return (\n    prevProps.transactionName !== nextProps.transactionName ||\n    prevProps.transactionThreshold !== nextProps.transactionThreshold ||\n    prevProps.transactionThresholdMetric !== nextProps.transactionThresholdMetric\n  );\n}\n\nfunction DiscoverQuery(props: DiscoverQueryComponentProps) {\n  const afterFetch = (data, _) => {\n    const {fields, ...otherMeta} = data.meta ?? {};\n    return {\n      ...data,\n      meta: {...fields, ...otherMeta},\n    };\n  };\n  return (\n    <GenericDiscoverQuery<TableData, DiscoverQueryPropsWithThresholds>\n      route=\"events\"\n      shouldRefetchData={shouldRefetchData}\n      afterFetch={afterFetch}\n      {...props}\n    />\n  );\n}\n\nexport function useDiscoverQuery(props: Omit<DiscoverQueryComponentProps, 'children'>) {\n  const afterFetch = (data, _) => {\n    const {fields, ...otherMeta} = data.meta ?? {};\n    return {\n      ...data,\n      meta: {...fields, ...otherMeta},\n    };\n  };\n\n  return useGenericDiscoverQuery<TableData, DiscoverQueryPropsWithThresholds>({\n    route: 'events',\n    shouldRefetchData,\n    afterFetch,\n    ...props,\n  });\n}\n\nexport default DiscoverQuery;\n","import {Location, Query} from 'history';\n\nimport {t} from 'sentry/locale';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {QueryFieldValue} from 'sentry/utils/discover/fields';\nimport {decodeScalar} from 'sentry/utils/queryString';\n\nimport {filterToField, SpanOperationBreakdownFilter} from '../filter';\nimport {TransactionFilterOptions} from '../utils';\n\nexport enum EventsDisplayFilterName {\n  p50 = 'p50',\n  p75 = 'p75',\n  p95 = 'p95',\n  p99 = 'p99',\n  p100 = 'p100',\n}\n\nexport type PercentileValues = Record<EventsDisplayFilterName, number>;\n\nexport type EventsDisplayFilter = {\n  label: string;\n  name: EventsDisplayFilterName;\n  query?: string[][];\n  sort?: {field: string; kind: 'desc' | 'asc'};\n};\n\nexport type EventsFilterOptions = {\n  [name in EventsDisplayFilterName]: EventsDisplayFilter;\n};\n\nexport type EventsFilterPercentileValues = {\n  [name in Exclude<EventsDisplayFilterName, EventsDisplayFilterName.p100>]: number;\n};\n\nexport function getEventsFilterOptions(\n  spanOperationBreakdownFilter: SpanOperationBreakdownFilter,\n  percentileValues?: EventsFilterPercentileValues\n): EventsFilterOptions {\n  const {p99, p95, p75, p50} = percentileValues\n    ? percentileValues\n    : {p99: 0, p95: 0, p75: 0, p50: 0};\n  return {\n    [EventsDisplayFilterName.p50]: {\n      name: EventsDisplayFilterName.p50,\n      query: p50 ? [['transaction.duration', `<=${p50.toFixed(0)}`]] : undefined,\n      sort: {\n        kind: 'desc',\n        field: filterToField(spanOperationBreakdownFilter) || 'transaction.duration',\n      },\n      label: t('p50'),\n    },\n    [EventsDisplayFilterName.p75]: {\n      name: EventsDisplayFilterName.p75,\n      query: p75 ? [['transaction.duration', `<=${p75.toFixed(0)}`]] : undefined,\n      sort: {\n        kind: 'desc',\n        field: filterToField(spanOperationBreakdownFilter) || 'transaction.duration',\n      },\n      label: t('p75'),\n    },\n    [EventsDisplayFilterName.p95]: {\n      name: EventsDisplayFilterName.p95,\n      query: p95 ? [['transaction.duration', `<=${p95.toFixed(0)}`]] : undefined,\n      sort: {\n        kind: 'desc',\n        field: filterToField(spanOperationBreakdownFilter) || 'transaction.duration',\n      },\n      label: t('p95'),\n    },\n    [EventsDisplayFilterName.p99]: {\n      name: EventsDisplayFilterName.p99,\n      query: p99 ? [['transaction.duration', `<=${p99.toFixed(0)}`]] : undefined,\n      sort: {\n        kind: 'desc',\n        field: filterToField(spanOperationBreakdownFilter) || 'transaction.duration',\n      },\n      label: t('p99'),\n    },\n    [EventsDisplayFilterName.p100]: {\n      name: EventsDisplayFilterName.p100,\n      label: t('p100'),\n    },\n  };\n}\n\nexport function eventsRouteWithQuery({\n  orgSlug,\n  transaction,\n  projectID,\n  query,\n}: {\n  orgSlug: string;\n  query: Query;\n  transaction: string;\n  projectID?: string | string[];\n}) {\n  const pathname = `/organizations/${orgSlug}/performance/summary/events/`;\n  return {\n    pathname,\n    query: {\n      transaction,\n      project: projectID,\n      environment: query.environment,\n      statsPeriod: query.statsPeriod,\n      start: query.start,\n      end: query.end,\n      query: query.query,\n    },\n  };\n}\n\nfunction stringToFilter(option: string) {\n  if (\n    Object.values(EventsDisplayFilterName).includes(option as EventsDisplayFilterName)\n  ) {\n    return option as EventsDisplayFilterName;\n  }\n\n  return EventsDisplayFilterName.p100;\n}\nexport function decodeEventsDisplayFilterFromLocation(location: Location) {\n  return stringToFilter(\n    decodeScalar(location.query.showTransactions, EventsDisplayFilterName.p100)\n  );\n}\n\nexport function filterEventsDisplayToLocationQuery(\n  option: EventsDisplayFilterName,\n  spanOperationBreakdownFilter: SpanOperationBreakdownFilter\n) {\n  const eventsFilterOptions = getEventsFilterOptions(spanOperationBreakdownFilter);\n  const kind = eventsFilterOptions[option].sort?.kind;\n  const field = eventsFilterOptions[option].sort?.field;\n\n  const query: {showTransactions: string; sort?: string} = {\n    showTransactions: option,\n  };\n  if (kind && field) {\n    query.sort = `${kind === 'desc' ? '-' : ''}${field}`;\n  }\n  return query;\n}\n\nexport function mapShowTransactionToPercentile(\n  showTransaction\n): EventsDisplayFilterName | undefined {\n  switch (showTransaction) {\n    case TransactionFilterOptions.OUTLIER:\n      return EventsDisplayFilterName.p100;\n    case TransactionFilterOptions.SLOW:\n      return EventsDisplayFilterName.p95;\n    default:\n      return undefined;\n  }\n}\n\nexport function mapPercentileValues(percentileData?: TableDataRow | null) {\n  return {\n    p100: percentileData?.['p100()'],\n    p99: percentileData?.['p99()'],\n    p95: percentileData?.['p95()'],\n    p75: percentileData?.['p75()'],\n    p50: percentileData?.['p50()'],\n  } as PercentileValues;\n}\n\nexport function getPercentilesEventView(eventView: EventView): EventView {\n  const percentileColumns: QueryFieldValue[] = [\n    {\n      kind: 'function',\n      function: ['p100', '', undefined, undefined],\n    },\n    {\n      kind: 'function',\n      function: ['p99', '', undefined, undefined],\n    },\n    {\n      kind: 'function',\n      function: ['p95', '', undefined, undefined],\n    },\n    {\n      kind: 'function',\n      function: ['p75', '', undefined, undefined],\n    },\n    {\n      kind: 'function',\n      function: ['p50', '', undefined, undefined],\n    },\n  ];\n\n  return eventView.withColumns(percentileColumns);\n}\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var baseIteratee = require('./_baseIteratee'),\n    negate = require('./negate'),\n    pickBy = require('./pickBy');\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nmodule.exports = omitBy;\n"],"names":["AreaChart","_ref","series","stacked","colors","props","_jsx","BaseChart","map","_ref2","i","seriesName","data","otherSeriesProps","arguments","length","undefined","LineSeries","AreaSeries","stack","name","_ref3","value","lineStyle","color","opacity","width","areaStyle","animation","animationThreshold","animationDuration","displayName","DEFAULT","realtime","showDetail","left","right","bottom","DataZoomSlider","Array","isArray","getDate","date","moment","format","ChartZoom","Component","constructor","_this","super","this","_defineProperty","currentPeriod","period","start","end","saveHistory","router","onZoom","usePageDate","startFormatted","endFormatted","history","push","zooming","newQuery","location","query","pageStart","getUtcDateString","pageEnd","pageStatsPeriod","qs","pathname","updateDateTime","getUtcToLocalDateObject","saveCurrentPeriod","chart","onChartReady","evt","setPeriod","onRestore","model","getModel","startValue","endValue","_payload","batch","previousPeriod","pop","onDataZoom","_props","zoom","_componentsViews","find","c","_features","dataZoom","_isZoomActive","dispatchAction","type","key","dataZoomSelectActive","callIfFunction","onFinished","componentDidUpdate","disabled","render","utc","_utc","_start","_end","children","xAxisIndex","_router","_onZoom","_onRestore","_onChartReady","_onDataZoom","_onFinished","showSlider","chartZoomOptions","isGroupedByDate","handleChartReady","DataZoomInside","showTimeInTooltip","toolBox","ToolBox","title","back","iconStyle","borderWidth","handleDataZoom","handleChartFinished","handleZoomRestore","zoomOnMouseWheel","zoomLock","throttle","getFeatures","features","yAxisIndex","options","top","itemSize","z","feature","_styled","className","visible","other","LoadingMask","target","p","shouldRefetchData","prevProps","nextProps","transactionName","transactionThreshold","transactionThresholdMetric","DiscoverQuery","GenericDiscoverQuery","route","afterFetch","_","fields","otherMeta","meta","useDiscoverQuery","useGenericDiscoverQuery","EventsDisplayFilterName","getEventsFilterOptions","spanOperationBreakdownFilter","percentileValues","p99","p95","p75","p50","toFixed","sort","kind","field","filterToField","label","t","p100","eventsRouteWithQuery","orgSlug","transaction","projectID","project","environment","statsPeriod","decodeEventsDisplayFilterFromLocation","option","decodeScalar","showTransactions","Object","values","includes","filterEventsDisplayToLocationQuery","eventsFilterOptions","mapShowTransactionToPercentile","showTransaction","TransactionFilterOptions","mapPercentileValues","percentileData","getPercentilesEventView","eventView","withColumns","function","module","exports","predicate","TypeError","args","call","apply","baseIteratee","negate","pickBy","object"],"sourceRoot":""}