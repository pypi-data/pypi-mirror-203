{"version":3,"file":"chunks/app_components_replays_replayPlayer_tsx-app_components_replays_replaysFeatureBadge_tsx-app_ut-8d4b7f.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/replays/player/bufferingOverlay.tsx","webpack:///./app/components/replays/player/fastForwardBadge.tsx","webpack:///./app/components/replays/playerDOMAlert.tsx","webpack:///./app/utils/useDismissAlert.tsx","webpack:///./app/components/replays/replayPlayer.tsx","webpack:///./app/components/replays/replaysFeatureBadge.tsx","webpack:///./app/utils/replays/replayReader.tsx","webpack:///./app/utils/replays/hooks/useReplayData.tsx","webpack:///./app/views/replays/detail/layout/fluidHeight.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nimport {IconClock} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\n\ntype Props = {\n  className?: string;\n};\n\nfunction BufferingOverlay({className}: Props) {\n  return (\n    <Overlay className={className}>\n      <Message>\n        <IconClock size=\"sm\" />\n        {t('Buffering...')}\n      </Message>\n    </Overlay>\n  );\n}\n\n/* Position the badge in the corner */\nconst Overlay = styled('div')`\n  user-select: none;\n  display: grid;\n  place-items: center;\n`;\n\n/* Badge layout and style */\nconst Message = styled('div')`\n  display: grid;\n  grid-template-columns: max-content max-content;\n  gap: ${space(0.75)};\n  place-items: center;\n\n  padding: ${space(3)};\n  background: ${p => p.theme.gray300};\n  border-radius: ${p => p.theme.borderRadius};\n  color: ${p => p.theme.white};\n  z-index: ${p => p.theme.zIndex.initial};\n`;\n\nexport default BufferingOverlay;\n","import styled from '@emotion/styled';\n\nimport {Tooltip} from 'sentry/components/tooltip';\nimport {IconArrow} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\n\ntype Props = {\n  speed: number;\n  className?: string;\n};\n\nfunction FastForwardBadge({speed, className}: Props) {\n  return (\n    <Badge className={className}>\n      <FastForwardTooltip title={t('Fast forwarding at %sx', speed)}>\n        {t('Fast forwarding through inactivity')}\n        <IconArrow size=\"sm\" direction=\"right\" />\n      </FastForwardTooltip>\n    </Badge>\n  );\n}\n\n/* Position the badge in the corner */\nconst Badge = styled('div')`\n  user-select: none;\n  display: grid;\n  align-items: end;\n  justify-items: start;\n`;\n\n/* Badge layout and style */\nconst FastForwardTooltip = styled(Tooltip)`\n  display: grid;\n  grid-template-columns: max-content max-content;\n  gap: ${space(0.5)};\n  align-items: center;\n\n  background: ${p => p.theme.gray300};\n  color: ${p => p.theme.white};\n  padding: ${space(1.5)} ${space(2)};\n  border-top-right-radius: ${p => p.theme.borderRadius};\n  z-index: ${p => p.theme.zIndex.initial};\n`;\n\nexport default FastForwardBadge;\n","import styled from '@emotion/styled';\n\nimport {Button} from 'sentry/components/button';\nimport {IconClose, IconInfo} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport useDismissAlert from 'sentry/utils/useDismissAlert';\n\nconst LOCAL_STORAGE_KEY = 'replay-player-dom-alert-dismissed';\n\nfunction PlayerDOMAlert() {\n  const {dismiss, isDismissed} = useDismissAlert({key: LOCAL_STORAGE_KEY});\n\n  if (isDismissed) {\n    return null;\n  }\n\n  return (\n    <DOMAlertContainer data-test-id=\"player-dom-alert\">\n      <DOMAlert>\n        <StyledIconInfo size=\"xs\" />\n        <div>{t('Right click & inspect your appâ€™s DOM with your browser')}</div>\n        <DismissButton\n          priority=\"link\"\n          size=\"sm\"\n          icon={<IconClose size=\"xs\" />}\n          aria-label={t('Close Alert')}\n          onClick={dismiss}\n        />\n      </DOMAlert>\n    </DOMAlertContainer>\n  );\n}\n\nexport default PlayerDOMAlert;\n\nconst DOMAlertContainer = styled('div')`\n  position: absolute;\n  bottom: ${space(1)};\n  left: 0;\n  width: 100%;\n  text-align: center;\n  font-size: ${p => p.theme.fontSizeMedium};\n  pointer-events: none;\n`;\n\nconst DOMAlert = styled('div')`\n  display: inline-flex;\n  align-items: flex-start;\n  justify-items: center;\n  padding: ${space(1)} ${space(2)};\n  margin: 0 ${space(1)};\n  color: ${p => p.theme.white};\n  background-color: ${p => p.theme.blue400};\n  border-radius: ${p => p.theme.borderRadius};\n  gap: 0 ${space(1)};\n  line-height: 1em;\n`;\n\nconst StyledIconInfo = styled(IconInfo)`\n  margin-top: 1px;\n  min-width: 12px; /* Prevnt the icon from scaling down whenever text wraps */\n`;\n\nconst DismissButton = styled(Button)`\n  color: ${p => p.theme.white};\n  pointer-events: all;\n  &:hover {\n    color: ${p => p.theme.white};\n    opacity: 0.5;\n  }\n`;\n","import {useCallback} from 'react';\n\nimport {useLocalStorageState} from 'sentry/utils/useLocalStorageState';\n\ntype Opts = {\n  /**\n   * Key in localStorage.\n   * Use a format like: `${organization.id}:my-feature`\n   */\n  key: string;\n\n  /**\n   * Number of days before the dismissal is expired.\n   * After expiration the the user will need to re-dismiss things.\n   */\n  expirationDays?: number;\n};\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\n\nfunction isValid(timestamp: number, expirationDays: number) {\n  if (!timestamp || isNaN(timestamp)) {\n    return false;\n  }\n  const duration = Date.now() - timestamp;\n  const days = duration / MS_PER_DAY;\n  return days < expirationDays;\n}\n\n/**\n * Nominally for tracking dismissal/acknowledgement of in-app alerts and\n * notifications, specifically those that don't need to be persisted server side.\n *\n * Dismissal can be 'permanent' or have an expiration after some number of days.\n *\n * The real lifecycle depends on whether users reset localStorage or not, if you\n * need something really permanent then save the users' preference to the server.\n */\nfunction useDismissAlert({expirationDays = Number.MAX_SAFE_INTEGER, key}: Opts) {\n  const [dismissedTimestamp, setDismissedTimestamp] = useLocalStorageState<\n    undefined | string\n  >(key, val => (val ? String(val) : undefined));\n\n  const isDismissed =\n    expirationDays === Number.MAX_SAFE_INTEGER\n      ? Boolean(dismissedTimestamp)\n      : isValid(Number(dismissedTimestamp), expirationDays);\n\n  const dismiss = useCallback(() => {\n    setDismissedTimestamp(Date.now().toString());\n  }, [setDismissedTimestamp]);\n\n  return {\n    isDismissed,\n    dismiss,\n  };\n}\n\nexport default useDismissAlert;\n","import {useCallback, useEffect, useRef, useState} from 'react';\nimport styled from '@emotion/styled';\nimport {useResizeObserver} from '@react-aria/utils';\n\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {Panel as _Panel} from 'sentry/components/panels';\nimport BufferingOverlay from 'sentry/components/replays/player/bufferingOverlay';\nimport FastForwardBadge from 'sentry/components/replays/player/fastForwardBadge';\nimport {useReplayContext} from 'sentry/components/replays/replayContext';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport useOrganization from 'sentry/utils/useOrganization';\n\nimport PlayerDOMAlert from './playerDOMAlert';\n\ntype Dimensions = ReturnType<typeof useReplayContext>['dimensions'];\n\ninterface Props {\n  className?: string;\n  isPreview?: boolean;\n}\n\nfunction useVideoSizeLogger({\n  videoDimensions,\n  windowDimensions,\n}: {\n  videoDimensions: Dimensions;\n  windowDimensions: Dimensions;\n}) {\n  const organization = useOrganization();\n  const [didLog, setDidLog] = useState<boolean>(false);\n  useEffect(() => {\n    if (didLog || (videoDimensions.width === 0 && videoDimensions.height === 0)) {\n      return;\n    }\n\n    const aspect_ratio =\n      videoDimensions.width > videoDimensions.height ? 'landscape' : 'portrait';\n\n    const scale = Math.min(\n      windowDimensions.width / videoDimensions.width,\n      windowDimensions.height / videoDimensions.height,\n      1\n    );\n    const scale_bucket = (Math.floor(scale * 10) * 10) as Parameters<\n      typeof trackAdvancedAnalyticsEvent<'replay.render-player'>\n    >[1]['scale_bucket'];\n\n    trackAdvancedAnalyticsEvent('replay.render-player', {\n      organization,\n      aspect_ratio,\n      scale_bucket,\n    });\n    setDidLog(true);\n  }, [organization, windowDimensions, videoDimensions, didLog]);\n}\n\nfunction BasePlayerRoot({className, isPreview = false}: Props) {\n  const {\n    dimensions: videoDimensions,\n    fastForwardSpeed,\n    initRoot,\n    isBuffering,\n    isFetching,\n  } = useReplayContext();\n\n  const windowEl = useRef<HTMLDivElement>(null);\n  const viewEl = useRef<HTMLDivElement>(null);\n\n  const [windowDimensions, setWindowDimensions] = useState<Dimensions>({\n    width: 0,\n    height: 0,\n  });\n\n  useVideoSizeLogger({videoDimensions, windowDimensions});\n\n  // Create the `rrweb` instance which creates an iframe inside `viewEl`\n  useEffect(() => initRoot(viewEl.current), [initRoot]);\n\n  // Read the initial width & height where the player will be inserted, this is\n  // so we can shrink the video into the available space.\n  // If the size of the container changes, we can re-calculate the scaling factor\n  const updateWindowDimensions = useCallback(\n    () =>\n      setWindowDimensions({\n        width: windowEl.current?.clientWidth || 0,\n        height: windowEl.current?.clientHeight || 0,\n      }),\n    [setWindowDimensions]\n  );\n  useResizeObserver({ref: windowEl, onResize: updateWindowDimensions});\n  // If your browser doesn't have ResizeObserver then set the size once.\n  useEffect(() => {\n    if (typeof window.ResizeObserver !== 'undefined') {\n      return;\n    }\n    updateWindowDimensions();\n  }, [updateWindowDimensions]);\n\n  // Update the scale of the view whenever dimensions have changed.\n  useEffect(() => {\n    if (viewEl.current) {\n      const scale = Math.min(\n        windowDimensions.width / videoDimensions.width,\n        windowDimensions.height / videoDimensions.height,\n        1\n      );\n      if (scale) {\n        viewEl.current.style['transform-origin'] = 'top left';\n        viewEl.current.style.transform = `scale(${scale})`;\n        viewEl.current.style.width = `${videoDimensions.width * scale}px`;\n        viewEl.current.style.height = `${videoDimensions.height * scale}px`;\n      }\n    }\n  }, [windowDimensions, videoDimensions]);\n\n  return (\n    <SizingWindow ref={windowEl} className=\"sentry-block\">\n      <div ref={viewEl} className={className} />\n      {fastForwardSpeed ? <PositionedFastForward speed={fastForwardSpeed} /> : null}\n      {isBuffering ? <PositionedBuffering /> : null}\n      {isPreview ? null : <PlayerDOMAlert />}\n      {isFetching ? <PositionedLoadingIndicator /> : null}\n    </SizingWindow>\n  );\n}\n\n// Center the viewEl inside the windowEl.\n// This is useful when the window is inside a container that has large fixed\n// dimensions, like when in fullscreen mode.\n// If the container has a dimensions that can grow/shrink then it is\n// important to also set `overflow: hidden` on the container, so that the\n// SizingWindow can calculate size as things shrink.\nconst SizingWindow = styled('div')`\n  width: 100%;\n  display: flex;\n  flex-grow: 1;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n\n  background-color: ${p => p.theme.backgroundSecondary};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${p => p.theme.backgroundSecondary} 8px,\n      ${p => p.theme.backgroundSecondary} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${p => p.theme.gray100} 15px,\n      ${p => p.theme.gray100} 16px\n    );\n`;\n\nconst PositionedFastForward = styled(FastForwardBadge)`\n  position: absolute;\n  left: 0;\n  bottom: 0;\n`;\n\nconst PositionedBuffering = styled(BufferingOverlay)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nconst PositionedLoadingIndicator = styled(LoadingIndicator)`\n  position: absolute;\n`;\n\n// Base styles, to make the Replayer instance work\nconst PlayerRoot = styled(BasePlayerRoot)`\n  .replayer-wrapper {\n    user-select: none;\n  }\n\n  .replayer-wrapper > .replayer-mouse {\n    pointer-events: none;\n  }\n  .replayer-wrapper > .replayer-mouse-tail {\n    position: absolute;\n    pointer-events: none;\n  }\n\n  /* Override default user-agent styles */\n  .replayer-wrapper > iframe {\n    border: none;\n    background: white;\n\n    /* Set pointer-events to make it easier to right-click & inspect */\n    pointer-events: initial !important;\n  }\n`;\n\n// Sentry-specific styles for the player.\n// The elements we have to work with are:\n// ```css\n// div.replayer-wrapper {}\n// div.replayer-wrapper > div.replayer-mouse {}\n// div.replayer-wrapper > canvas.replayer-mouse-tail {}\n// div.replayer-wrapper > iframe {}\n// ```\n// The mouse-tail is also configured for color/size in `app/components/replays/replayContext.tsx`\nconst SentryPlayerRoot = styled(PlayerRoot)`\n  .replayer-mouse {\n    position: absolute;\n    width: 32px;\n    height: 32px;\n    transition: left 0.05s linear, top 0.05s linear;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxMiAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTZWMEwxMS42IDExLjZINC44TDQuNCAxMS43TDAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4xIDE2LjdMNS41IDE4LjJMMC43OTk5OTkgNy4xTDQuNSA1LjZMOS4xIDE2LjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNC42NzQ1MSA4LjYxODUxTDIuODMwMzEgOS4zOTI3MUw1LjkyNzExIDE2Ljc2OTVMNy43NzEzMSAxNS45OTUzTDQuNjc0NTEgOC42MTg1MVoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xIDIuNFYxMy42TDQgMTAuN0w0LjQgMTAuNkg5LjJMMSAyLjRaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K');\n    border-color: transparent;\n  }\n  .replayer-mouse:after {\n    content: '';\n    display: inline-block;\n    width: 32px;\n    height: 32px;\n    background: ${p => p.theme.purple300};\n    border-radius: 100%;\n    transform: translate(-50%, -50%);\n    opacity: 0.3;\n  }\n  .replayer-mouse.active:after {\n    animation: click 0.2s ease-in-out 1;\n  }\n  .replayer-mouse.touch-device {\n    background-image: none;\n    width: 70px;\n    height: 70px;\n    border-radius: 100%;\n    margin-left: -37px;\n    margin-top: -37px;\n    border: 4px solid rgba(73, 80, 246, 0);\n    transition: left 0s linear, top 0s linear, border-color 0.2s ease-in-out;\n  }\n  .replayer-mouse.touch-device.touch-active {\n    border-color: ${p => p.theme.purple200};\n    transition: left 0.25s linear, top 0.25s linear, border-color 0.2s ease-in-out;\n  }\n  .replayer-mouse.touch-device:after {\n    opacity: 0;\n  }\n  .replayer-mouse.touch-device.active:after {\n    animation: touch-click 0.2s ease-in-out 1;\n  }\n  @keyframes click {\n    0% {\n      opacity: 0.3;\n      width: 20px;\n      height: 20px;\n    }\n    50% {\n      opacity: 0.5;\n      width: 10px;\n      height: 10px;\n    }\n  }\n  @keyframes touch-click {\n    0% {\n      opacity: 0;\n      width: 20px;\n      height: 20px;\n    }\n    50% {\n      opacity: 0.5;\n      width: 10px;\n      height: 10px;\n    }\n  }\n`;\n\nexport default SentryPlayerRoot;\n","import FeatureBadge from 'sentry/components/featureBadge';\n\nfunction ReplaysFeatureBadge(\n  props: Omit<React.ComponentProps<typeof FeatureBadge>, 'type'>\n) {\n  return <FeatureBadge {...props} type=\"new\" />;\n}\n\nexport default ReplaysFeatureBadge;\n","import {duration} from 'moment';\n\nimport type {Crumb} from 'sentry/types/breadcrumbs';\nimport {\n  breadcrumbFactory,\n  getBreadcrumbsByCategory,\n  isMemorySpan,\n  isNetworkSpan,\n  mapRRWebAttachments,\n  replayTimestamps,\n  rrwebEventListFactory,\n  spansFactory,\n} from 'sentry/utils/replays/replayDataUtils';\nimport type {\n  MemorySpanType,\n  RecordingEvent,\n  ReplayError,\n  ReplayRecord,\n  ReplaySpan,\n} from 'sentry/views/replays/types';\n\ninterface ReplayReaderParams {\n  /**\n   * Loaded segment data\n   *\n   * This is a mix of rrweb data, breadcrumbs and spans/transactions sorted by time\n   * All three types are mixed together.\n   */\n  attachments: unknown[] | undefined;\n  errors: ReplayError[] | undefined;\n\n  /**\n   * The root Replay event, created at the start of the browser session.\n   */\n  replayRecord: ReplayRecord | undefined;\n}\n\ntype RequiredNotNull<T> = {\n  [P in keyof T]: NonNullable<T[P]>;\n};\n\nexport default class ReplayReader {\n  static factory({attachments, replayRecord, errors}: ReplayReaderParams) {\n    if (!attachments || !replayRecord || !errors) {\n      return null;\n    }\n\n    return new ReplayReader({attachments, replayRecord, errors});\n  }\n\n  private constructor({\n    attachments,\n    replayRecord,\n    errors,\n  }: RequiredNotNull<ReplayReaderParams>) {\n    const {breadcrumbs, rrwebEvents, spans} = mapRRWebAttachments(attachments);\n\n    // TODO(replays): We should get correct timestamps from the backend instead\n    // of having to fix them up here.\n    const {startTimestampMs, endTimestampMs} = replayTimestamps(\n      replayRecord,\n      rrwebEvents,\n      breadcrumbs,\n      spans\n    );\n    replayRecord.started_at = new Date(startTimestampMs);\n    replayRecord.finished_at = new Date(endTimestampMs);\n    replayRecord.duration = duration(\n      replayRecord.finished_at.getTime() - replayRecord.started_at.getTime()\n    );\n\n    const sortedSpans = spansFactory(spans);\n    this.networkSpans = sortedSpans.filter(isNetworkSpan);\n    this.memorySpans = sortedSpans.filter(isMemorySpan);\n\n    this.breadcrumbs = breadcrumbFactory(replayRecord, errors, breadcrumbs, sortedSpans);\n    this.consoleCrumbs = getBreadcrumbsByCategory(this.breadcrumbs, ['console', 'issue']);\n\n    this.rrwebEvents = rrwebEventListFactory(replayRecord, rrwebEvents);\n\n    this.replayRecord = replayRecord;\n  }\n\n  private replayRecord: ReplayRecord;\n  private rrwebEvents: RecordingEvent[];\n  private breadcrumbs: Crumb[];\n  private consoleCrumbs: ReturnType<typeof getBreadcrumbsByCategory>;\n  private networkSpans: ReplaySpan[];\n  private memorySpans: MemorySpanType[];\n\n  /**\n   * @returns Duration of Replay (milliseonds)\n   */\n  getDurationMs = () => {\n    return this.replayRecord.duration.asMilliseconds();\n  };\n\n  getReplay = () => {\n    return this.replayRecord;\n  };\n\n  getRRWebEvents = () => {\n    return this.rrwebEvents;\n  };\n\n  getRawCrumbs = () => {\n    return this.breadcrumbs;\n  };\n\n  getConsoleCrumbs = () => {\n    return this.consoleCrumbs;\n  };\n\n  getNetworkSpans = () => {\n    return this.networkSpans;\n  };\n\n  getMemorySpans = () => {\n    return this.memorySpans;\n  };\n}\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport * as Sentry from '@sentry/react';\nimport chunk from 'lodash/chunk';\n\nimport {mapResponseToReplayRecord} from 'sentry/utils/replays/replayDataUtils';\nimport ReplayReader from 'sentry/utils/replays/replayReader';\nimport RequestError from 'sentry/utils/requestError/requestError';\nimport useApi from 'sentry/utils/useApi';\nimport type {ReplayError, ReplayRecord} from 'sentry/views/replays/types';\n\ntype State = {\n  /**\n   * If any request returned an error then nothing is being returned\n   */\n  fetchError: undefined | RequestError;\n\n  /**\n   * If a fetch is underway for the requested root reply.\n   * This includes fetched all the sub-resources like attachments and `sentry-replay-event`\n   */\n  fetchingAttachments: boolean;\n  fetchingErrors: boolean;\n  fetchingReplay: boolean;\n};\n\ntype Options = {\n  /**\n   * The organization slug\n   */\n  orgSlug: string;\n\n  /**\n   * The projectSlug and replayId concatenated together\n   */\n  replaySlug: string;\n\n  /**\n   * Default: 50\n   * You can override this for testing\n   *\n   * Be mindful that the list of error-ids will appear in the GET request url,\n   * so don't make the url string too large!\n   */\n  errorsPerPage?: number;\n  /**\n   * Default: 100\n   * You can override this for testing\n   */\n  segmentsPerPage?: number;\n};\n\ninterface Result {\n  fetchError: undefined | RequestError;\n  fetching: boolean;\n  onRetry: () => void;\n  replay: ReplayReader | null;\n  replayRecord: ReplayRecord | undefined;\n}\n\nconst INITIAL_STATE: State = Object.freeze({\n  fetchError: undefined,\n  fetchingAttachments: true,\n  fetchingErrors: true,\n  fetchingReplay: true,\n});\n\n/**\n * A react hook to load core replay data over the network.\n *\n * Core replay data includes:\n * 1. The root replay EventTransaction object\n *    - This includes `startTimestamp`, and `tags`\n * 2. RRWeb, Breadcrumb, and Span attachment data\n *    - We make an API call to get a list of segments, each segment contains a\n *      list of attachments\n *    - There may be a few large segments, or many small segments. It depends!\n *      ie: If the replay has many events/errors then there will be many small segments,\n *      or if the page changes rapidly across each pageload, then there will be\n *      larger segments, but potentially fewer of them.\n * 3. Related Event data\n *    - Event details are not part of the attachments payload, so we have to\n *      request them separately\n *\n * This function should stay focused on loading data over the network.\n * Front-end processing, filtering and re-mixing of the different data streams\n * must be delegated to the `ReplayReader` class.\n *\n * @param {orgSlug, replaySlug} Where to find the root replay event\n * @returns An object representing a unified result of the network requests. Either a single `ReplayReader` data object or fetch errors.\n */\nfunction useReplayData({\n  replaySlug,\n  orgSlug,\n  errorsPerPage = 50,\n  segmentsPerPage = 100,\n}: Options): Result {\n  const [projectSlug, replayId] = replaySlug.split(':');\n\n  const api = useApi();\n\n  const [state, setState] = useState<State>(INITIAL_STATE);\n  const [attachments, setAttachments] = useState<unknown[]>([]);\n  const [errors, setErrors] = useState<ReplayError[]>([]);\n  const [replayRecord, setReplayRecord] = useState<ReplayRecord>();\n\n  // Fetch every field of the replay. We're overfetching, not every field is used\n  const fetchReplay = useCallback(async () => {\n    const response = await api.requestPromise(\n      `/projects/${orgSlug}/${projectSlug}/replays/${replayId}/`\n    );\n    const mappedRecord = mapResponseToReplayRecord(response.data);\n    setReplayRecord(mappedRecord);\n    setState(prev => ({...prev, fetchingReplay: false}));\n  }, [api, orgSlug, projectSlug, replayId]);\n\n  const fetchAttachments = useCallback(async () => {\n    if (!replayRecord) {\n      return;\n    }\n\n    if (!replayRecord.count_segments) {\n      setState(prev => ({...prev, fetchingAttachments: false}));\n      return;\n    }\n\n    const pages = Math.ceil(replayRecord.count_segments / segmentsPerPage);\n    const cursors = new Array(pages)\n      .fill(0)\n      .map((_, i) => `${segmentsPerPage}:${i}:${i === 0 ? 1 : 0}`);\n\n    await Promise.allSettled(\n      cursors.map(cursor => {\n        const promise = api.requestPromise(\n          `/projects/${orgSlug}/${projectSlug}/replays/${replayRecord.id}/recording-segments/`,\n          {\n            query: {\n              download: true,\n              per_page: segmentsPerPage,\n              cursor,\n            },\n          }\n        );\n        promise.then(response => {\n          setAttachments(prev => (prev ?? []).concat(...response));\n        });\n        return promise;\n      })\n    );\n    setState(prev => ({...prev, fetchingAttachments: false}));\n  }, [segmentsPerPage, api, orgSlug, projectSlug, replayRecord]);\n\n  const fetchErrors = useCallback(async () => {\n    if (!replayRecord) {\n      return;\n    }\n\n    if (!replayRecord.error_ids.length) {\n      setState(prev => ({...prev, fetchingErrors: false}));\n      return;\n    }\n\n    // Clone the `finished_at` time and bump it up one second because finishedAt\n    // has the `ms` portion truncated, while replays-events-meta operates on\n    // timestamps with `ms` attached. So finishedAt could be at time `12:00:00.000Z`\n    // while the event is saved with `12:00:00.450Z`.\n    const finishedAtClone = new Date(replayRecord.finished_at);\n    finishedAtClone.setSeconds(finishedAtClone.getSeconds() + 1);\n\n    const chunks = chunk(replayRecord.error_ids, errorsPerPage);\n    await Promise.allSettled(\n      chunks.map(errorIds => {\n        const promise = api.requestPromise(\n          `/organizations/${orgSlug}/replays-events-meta/`,\n          {\n            query: {\n              start: replayRecord.started_at.toISOString(),\n              end: finishedAtClone.toISOString(),\n              query: `id:[${String(errorIds)}]`,\n            },\n          }\n        );\n        promise.then(response => {\n          setErrors(prev => (prev ?? []).concat(response.data || []));\n        });\n        return promise;\n      })\n    );\n    setState(prev => ({...prev, fetchingErrors: false}));\n  }, [errorsPerPage, api, orgSlug, replayRecord]);\n\n  const onError = useCallback(error => {\n    Sentry.captureException(error);\n    setState(prev => ({...prev, fetchError: error}));\n  }, []);\n\n  const loadData = useCallback(\n    () => fetchReplay().catch(onError),\n    [fetchReplay, onError]\n  );\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  useEffect(() => {\n    if (state.fetchError) {\n      return;\n    }\n    fetchErrors().catch(onError);\n  }, [state.fetchError, fetchErrors, onError]);\n\n  useEffect(() => {\n    if (state.fetchError) {\n      return;\n    }\n    fetchAttachments().catch(onError);\n  }, [state.fetchError, fetchAttachments, onError]);\n\n  const replay = useMemo(() => {\n    return ReplayReader.factory({\n      attachments,\n      errors,\n      replayRecord,\n    });\n  }, [attachments, errors, replayRecord]);\n\n  return {\n    fetchError: state.fetchError,\n    fetching: state.fetchingAttachments || state.fetchingErrors || state.fetchingReplay,\n    onRetry: loadData,\n    replay,\n    replayRecord,\n  };\n}\n\nexport default useReplayData;\n","import styled from '@emotion/styled';\n\nconst FluidHeight = styled('div')`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  flex-grow: 1;\n  overflow: hidden;\n  height: 100%;\n`;\n\nexport default FluidHeight;\n"],"names":["BufferingOverlay","_ref","className","_jsx","Overlay","children","_jsxs","Message","IconClock","size","t","displayName","_styled","target","name","styles","space","p","theme","gray300","borderRadius","white","zIndex","initial","FastForwardBadge","speed","Badge","FastForwardTooltip","title","IconArrow","direction","Tooltip","PlayerDOMAlert","dismiss","isDismissed","expirationDays","Number","MAX_SAFE_INTEGER","key","dismissedTimestamp","setDismissedTimestamp","useLocalStorageState","val","String","undefined","Boolean","timestamp","isNaN","Date","now","isValid","useCallback","toString","useDismissAlert","DOMAlertContainer","DOMAlert","StyledIconInfo","DismissButton","priority","icon","IconClose","onClick","fontSizeMedium","blue400","IconInfo","Button","BasePlayerRoot","_ref2","isPreview","dimensions","videoDimensions","fastForwardSpeed","initRoot","isBuffering","isFetching","useReplayContext","windowEl","useRef","viewEl","windowDimensions","setWindowDimensions","useState","width","height","organization","useOrganization","didLog","setDidLog","useEffect","aspect_ratio","scale","Math","min","scale_bucket","floor","trackAdvancedAnalyticsEvent","useVideoSizeLogger","current","updateWindowDimensions","clientWidth","clientHeight","useResizeObserver","ref","onResize","window","ResizeObserver","style","transform","SizingWindow","PositionedFastForward","PositionedBuffering","PositionedLoadingIndicator","backgroundSecondary","gray100","LoadingIndicator","PlayerRoot","purple300","purple200","ReplaysFeatureBadge","props","FeatureBadge","type","ReplayReader","static","attachments","replayRecord","errors","constructor","_defineProperty","this","duration","asMilliseconds","rrwebEvents","breadcrumbs","consoleCrumbs","networkSpans","memorySpans","spans","mapRRWebAttachments","startTimestampMs","endTimestampMs","replayTimestamps","started_at","finished_at","getTime","sortedSpans","spansFactory","filter","isNetworkSpan","isMemorySpan","breadcrumbFactory","getBreadcrumbsByCategory","rrwebEventListFactory","INITIAL_STATE","Object","freeze","fetchError","fetchingAttachments","fetchingErrors","fetchingReplay","replaySlug","orgSlug","errorsPerPage","segmentsPerPage","projectSlug","replayId","split","api","useApi","state","setState","setAttachments","setErrors","setReplayRecord","fetchReplay","async","response","requestPromise","mappedRecord","mapResponseToReplayRecord","data","prev","fetchAttachments","count_segments","pages","ceil","cursors","Array","fill","map","_","i","Promise","allSettled","cursor","promise","id","query","download","per_page","then","concat","fetchErrors","error_ids","length","finishedAtClone","setSeconds","getSeconds","chunks","chunk","errorIds","start","toISOString","end","onError","error","Sentry","loadData","catch","replay","useMemo","factory","fetching","onRetry"],"sourceRoot":""}