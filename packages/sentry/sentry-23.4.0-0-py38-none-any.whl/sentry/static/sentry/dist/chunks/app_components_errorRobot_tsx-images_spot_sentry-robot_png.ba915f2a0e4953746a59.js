"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_errorRobot_tsx-images_spot_sentry-robot_png"],{"./app/components/errorRobot.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js");const o=s.p+"assets/sentry-robot.eedf05a7151c10da96fd.png";var i=s("./app/components/button.tsx"),n=s("./app/components/links/link.tsx"),p=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),l=s("./app/utils/useApi.tsx"),c=s("./app/views/onboarding/createSampleEventButton.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{org:t,project:s,sampleIssueId:r}=e;const o=(0,l.Z)(),[d,m]=(0,a.useState)(!1),[g,w]=(0,a.useState)(!1),[y,j]=(0,a.useState)(r);(0,a.useEffect)((()=>{!async function(){if(s&&void 0===r){m(!0);try{const e=await o.requestPromise(`/projects/${t.slug}/${s.slug}/issues/`,{method:"GET",data:{limit:1}});j(e.length>0&&e[0].id||"")}catch(e){w(e?.responseJSON?.detail??!0)}}}()}),[o,t,s,r]);const Z=s&&!d&&!g&&y?(0,u.tZ)("p",{children:(0,u.tZ)(n.Z,{to:`/${t.slug}/${s.slug}/issues/${y}/?sample`,children:(0,p.t)("Or see your sample event")})}):(0,u.tZ)("p",{children:(0,u.tZ)(c.Z,{priority:"link",project:s,source:"issues_list",disabled:!s,title:s?void 0:(0,p.t)("Select a project to create a sample event"),children:(0,p.t)("Create a sample event")})});return(0,u.BX)(h,{"data-test-id":"awaiting-events",className:"awaiting-events",children:[(0,u.tZ)(x,{"aria-hidden":!0,children:(0,u.tZ)(v,{})}),(0,u.BX)(b,{children:[(0,u.tZ)("h3",{children:(0,p.t)("Waiting for eventsâ€¦")}),(0,u.tZ)("p",{children:(0,p._N)("Our error robot is waiting to [strike:devour] receive your first event.",{strike:(0,u.tZ)(f,{})})}),(0,u.tZ)("p",{children:s&&(0,u.tZ)(i.zx,{"data-test-id":"install-instructions",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,children:(0,p.t)("Installation Instructions")})}),Z]})]})}m.displayName="ErrorRobot";const g=m,h=(0,r.Z)("div",{target:"ee6axyn4"})("display:flex;justify-content:center;font-size:",(e=>e.theme.fontSizeLarge),";border-radius:0 0 3px 3px;padding:40px ",(0,d.D)(3)," ",(0,d.D)(3),";min-height:260px;@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;align-items:center;padding:",(0,d.D)(3),";text-align:center;}"),x=(0,r.Z)("div",{target:"ee6axyn3"})("display:block;position:relative;width:220px;height:260px;background:url(",o,");background-size:cover;@media (max-width: ",(e=>e.theme.breakpoints.small),"){width:110px;height:130px;}"),v=(0,r.Z)("span",{target:"ee6axyn2"})("width:12px;height:12px;border-radius:50%;position:absolute;top:70px;left:81px;transform:translateZ(0);animation:blink-eye 0.6s infinite;@media (max-width: ",(e=>e.theme.breakpoints.small),"){width:6px;height:6px;top:35px;left:41px;}@keyframes blink-eye{0%{background:#e03e2f;box-shadow:0 0 10px #e03e2f;}50%{background:#4a4d67;box-shadow:none;}100%{background:#e03e2f;box-shadow:0 0 10px #e03e2f;}}"),b=(0,r.Z)("div",{target:"ee6axyn1"})("align-self:center;max-width:480px;margin-left:40px;@media (max-width: ",(e=>e.theme.breakpoints.small),"){margin:0;}"),f=(0,r.Z)("span",{target:"ee6axyn0"})({name:"1rcj98u",styles:"text-decoration:line-through"})},"./app/views/onboarding/createSampleEventButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>v});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/@sentry/core/esm/exports.js"),n=s("./app/actionCreators/indicator.tsx"),p=s("./app/components/button.tsx"),d=s("./app/locale.tsx"),l=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/utils/withApi.tsx"),u=s("./app/utils/withDomainRequired.tsx"),m=s("./app/utils/withOrganization.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=1e3;class x extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{creating:!1}),(0,r.Z)(this,"_isMounted",!0),(0,r.Z)(this,"createSampleGroup",(async()=>{const{api:e,organization:t,project:s,onCreateSampleGroup:r}=this.props;let a;if(!s)return;r?r():(0,l.Z)("growth.onboarding_view_sample_event",{platform:s.platform,organization:t}),(0,n.E3)((0,d.t)("Processing sample event..."),{duration:3e4}),this.setState({creating:!0});try{const r=`/projects/${t.slug}/${s.slug}/create-sample/`;a=await e.requestPromise(r,{method:"POST"})}catch(e){return i.$e((t=>{t.setExtra("error",e),i.Tb(new Error("Failed to create sample event"))})),this.setState({creating:!1}),(0,n.B8)(),void(0,n.Iw)((0,d.t)("Failed to create a new sample event"))}const p=performance.now(),{eventCreated:c,retries:m}=await async function(e,t){let s=0;for(;;){if(s>30)return{eventCreated:!1,retries:s-1};await new Promise((e=>window.setTimeout(e,h)));try{return await e.requestPromise(`/issues/${t}/events/latest/`),{eventCreated:!0,retries:s}}catch{++s}}}(e,a.groupID);if(!this._isMounted)return;const g=performance.now();(0,n.B8)(),this.setState({creating:!1});const x=Math.ceil(g-p);if(this.recordAnalytics({eventCreated:c,retries:m,duration:x}),!c)return(0,n.Iw)((0,d.t)("Failed to load sample event")),void i.$e((e=>{e.setTag("groupID",a.groupID),e.setTag("platform",s.platform||""),e.setTag("interval",h.toString()),e.setTag("retries",m.toString()),e.setTag("duration",x.toString()),e.setLevel("warning"),i.uT("Failed to load sample event")}));o.browserHistory.push((0,u.D)(`/organizations/${t.slug}/issues/${a.groupID}/?project=${s.id}&referrer=sample-error`))}))}componentDidMount(){const{organization:e,project:t,source:s}=this.props;t&&(0,l.Z)("sample_event.button_viewed",{organization:e,project_id:t.id,source:s})}componentWillUnmount(){this._isMounted=!1}recordAnalytics(e){let{eventCreated:t,retries:s,duration:r}=e;const{organization:a,project:o,source:i}=this.props;if(!o)return;const n="sample_event."+(t?"created":"failed");(0,l.Z)(n,{organization:a,project_id:o.id,platform:o.platform||"",interval:h,retries:s,duration:r,source:i})}render(){const{api:e,organization:t,project:s,source:r,...a}=this.props,{creating:o}=this.state;return(0,g.tZ)(p.zx,{...a,disabled:a.disabled||o,onClick:this.createSampleGroup})}}x.displayName="CreateSampleEventButton";const v=(0,c.Z)((0,m.Z)(x))}}]);
//# sourceMappingURL=../sourcemaps/app_components_errorRobot_tsx-images_spot_sentry-robot_png.b28f1c0bc312598fefdfe1af32eedbbf.js.map