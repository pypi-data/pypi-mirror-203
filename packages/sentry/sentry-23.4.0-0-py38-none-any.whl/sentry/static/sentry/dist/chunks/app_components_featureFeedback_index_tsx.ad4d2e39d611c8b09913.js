"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_featureFeedback_index_tsx"],{"./app/components/featureFeedback/feedbackModal.tsx":(e,t,a)=>{a.d(t,{aS:()=>I,fY:()=>N,rK:()=>M});var o=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=a("../node_modules/react/index.js"),n=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=a("../node_modules/@sentry/browser/esm/client.js"),r=a("../node_modules/@sentry/browser/esm/transports/fetch.js"),d=a("../node_modules/@sentry/browser/esm/stack-parsers.js"),c=a("../node_modules/@sentry/browser/esm/sdk.js"),l=a("../node_modules/lodash/cloneDeep.js"),p=a.n(l),u=a("./app/actionCreators/indicator.tsx"),m=a("./app/components/alert.tsx"),b=a("./app/components/button.tsx"),f=a("./app/components/buttonBar.tsx"),h=a("./app/components/forms/controls/textarea.tsx"),x=a("./app/components/forms/fieldGroup/index.tsx"),k=a("./app/components/forms/fields/selectField.tsx"),y=a("./app/components/links/externalLink.tsx"),g=a("./app/locale.tsx"),Z=a("./app/stores/configStore.tsx"),j=a("./app/stores/organizationStore.tsx"),v=a("./app/stores/useLegacyStore.tsx"),w=a("./app/styles/space.tsx"),C=a("./app/utils.tsx"),S=a("./app/utils/useLocation.tsx"),F=a("./app/utils/useMedia.tsx"),_=a("./app/utils/useProjects.tsx"),B=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I=new i.R({dsn:"https://3c5ef4e344a04a0694d187a1272e96de@o1.ingest.sentry.io/6356259",transport:r.f,stackParser:d.Dt,integrations:c.SS}),z=[(0,g.t)("I don't like this feature"),(0,g.t)("I like this feature"),(0,g.t)("Other reason")];function M(e){let{Header:t,Body:a,Footer:o,closeModal:i,...r}=e;const{organization:d}=(0,v.X)(j.Z),{projects:c,initiallyLoaded:l}=(0,_.Z)(),w=(0,S.T)(),M=(0,n.u)(),N=Z.Z.get("user"),q=Z.Z.get("isSelfHosted"),[T,D]=(0,s.useState)(void 0===r.children?{subject:void 0,additionalInfo:void 0}:r.initialData),X=(0,F.Z)(`(max-width: ${M.breakpoints.small})`),A=(0,s.useMemo)((()=>{if(l&&w.query.project)return c.find((e=>e.id===w.query.project))}),[l,c,w.query.project]),H=(0,s.useCallback)((e=>{const t=`${r.featureName} feedback by ${N.email}`,a={message:t,request:{url:window.location.href},extra:{orgFeatures:d?.features??[],orgAccess:d?.access??[],projectFeatures:A?.features??[]},tags:{featureName:r.featureName},user:N,level:"info"};if(void 0===r.children){const e=r.feedbackTypes??z;I.captureEvent({...a,contexts:{feedback:{additionalInfo:T.additionalInfo?.trim()?T.additionalInfo:null}},message:T.additionalInfo?.trim()?`${t} - ${e[T.subject]} - ${T.additionalInfo}`:`${t} - ${e[T.subject]}`})}else I.captureEvent({...a,...e??{}});(0,u.S9)((0,g.t)("Thanks for taking the time to provide us feedback!")),i()}),[i,d?.features,d?.access,A?.features,N,r,T]),L=(0,s.useCallback)((e=>{let{children:a}=e;return(0,B.tZ)(t,{closeButton:!0,children:(0,B.tZ)("h3",{children:a})})}),[t]),E=(0,s.useCallback)((e=>{let{onBack:t,onNext:a,submitEventData:s,primaryDisabledReason:n,secondaryAction:d}=e;return(0,B.BX)(o,{children:[d&&(0,B.tZ)($,{children:d}),t&&(0,B.tZ)(P,{children:(0,B.tZ)(b.zx,{onClick:t,children:(0,g.t)("Back")})}),(0,B.BX)(f.ZP,{gap:1,children:[(0,B.tZ)(b.zx,{onClick:i,children:(0,g.t)("Cancel")}),(0,B.tZ)(b.zx,{priority:"primary",title:void 0===r.children?(0,C.ri)(T.subject)?void 0:(0,g.t)("Required fields must be filled out"):n,onClick:a??(()=>H(s)),disabled:void 0===r.children?!(0,C.ri)(T.subject):(0,C.ri)(n),children:a?(0,g.t)("Next"):X?(0,g.t)("Submit"):(0,g.t)("Submit Feedback")})]})]})}),[o,X,i,H,T,r.children]),R=(0,s.useCallback)((e=>{let{children:t,showSelfHostedMessage:o=!0}=e;return(0,B.BX)(a,{children:[t,q&&o&&(0,B.tZ)(m.bZ,{type:"info",children:(0,g._N)("You agree that any feedback you submit is subject to Sentry's [privacyPolicy:Privacy Policy] and Sentry may use such feedback without restriction or obligation.",{privacyPolicy:(0,B.tZ)(y.Z,{href:"https://sentry.io/privacy/"})})})]})}),[a,q]);if(void 0===r.children){const e=r.feedbackTypes??z;return(0,B.BX)(s.Fragment,{children:[(0,B.tZ)(L,{children:(0,g.t)("Submit Feedback")}),(0,B.BX)(R,{children:[(0,B.tZ)(k.Z,{label:(0,g.t)("Type of feedback"),name:"subject",inline:!1,options:e.map(((e,t)=>({value:t,label:e}))),placeholder:(0,g.t)("Select type of feedback"),value:T.subject,onChange:e=>D({...T,subject:e}),flexibleControlStateSize:!0,stacked:!0,required:!0}),(0,B.tZ)(x.Z,{label:(0,g.t)("Additional feedback"),inline:!1,required:!1,flexibleControlStateSize:!0,stacked:!0,children:(0,B.tZ)(h.Z,{name:"additional-feedback",value:T.additionalInfo,rows:5,autosize:!0,placeholder:(0,g.t)("What did you expect?"),onChange:e=>D({...T,additionalInfo:e.target.value})})})]}),(0,B.tZ)(E,{secondaryAction:r?.secondaryAction})]})}return(0,B.tZ)(s.Fragment,{children:r.children({Header:L,Body:R,Footer:E,onFieldChange:function(e,t){const a=p()(T);a[e]=t,D(a)},state:T})})}M.displayName="FeedbackModal";const N={name:"16o92yp",styles:"width:100%;max-width:680px"},P=(0,o.Z)("div",{target:"e1bxa6fp1"})("margin-right:",(0,w.D)(1),";width:100%;"),$=(0,o.Z)("div",{target:"e1bxa6fp0"})({name:"s7lnbf",styles:"flex:1;align-self:center"})},"./app/components/featureFeedback/index.tsx":(e,t,a)=>{a.d(t,{z:()=>c});var o=a("./app/actionCreators/modal.tsx"),s=a("./app/components/button.tsx"),n=a("./app/components/featureFeedback/feedbackModal.tsx"),i=a("./app/icons/index.tsx"),r=a("./app/locale.tsx"),d=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{buttonProps:t={},...a}=e;return(0,d.tZ)(s.zx,{...t,icon:(0,d.tZ)(i.I8,{}),onClick:function(e){(0,o.openModal)((e=>(0,d.tZ)(n.rK,{...e,...a})),{modalCss:n.fY}),t.onClick?.(e)},children:(0,r.t)("Give Feedback")})}c.displayName="FeatureFeedback"}}]);
//# sourceMappingURL=../sourcemaps/app_components_featureFeedback_index_tsx.c344be7f897d3f52cb755966599b94dd.js.map