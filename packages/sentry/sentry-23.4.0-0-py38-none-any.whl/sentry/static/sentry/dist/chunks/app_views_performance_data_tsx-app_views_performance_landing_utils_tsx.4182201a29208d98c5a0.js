"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_data_tsx-app_views_performance_landing_utils_tsx"],{"./app/components/performance/searchBar.tsx":(t,e,r)=>{r.d(e,{D:()=>x,Z:()=>E});var a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),s=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/lodash/debounce.js"),i=r.n(o),c=r("./app/components/searchBar.tsx"),l=r("./app/components/smartSearchBar/utils.tsx"),u=r("./app/constants/index.tsx"),p=r("./app/locale.tsx"),d=r("./app/utils/discover/genericDiscoverQuery.tsx"),m=r("./app/utils/tokenizeSearch.tsx"),f=r("./app/utils/useApi.tsx"),h=r("./app/utils/useOnClickOutside.tsx"),y=r("./app/utils/withDomainRequired.tsx"),_=r("./app/views/performance/transactionSummary/utils.tsx"),g=r("./app/components/smartSearchBar/searchDropdown.tsx"),v=r("./app/components/smartSearchBar/types.tsx"),w=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function T(t){const{organization:e,eventView:r,onSearch:a,query:o}=t,[T,E]=(0,n.useState)([]),b=T[0]?.children?.length||0,[D,F]=(0,n.useState)(-1),[j,L]=(0,n.useState)(!1),q=()=>L(!1),[O,R]=(0,n.useState)(!1),[C,N]=(0,n.useState)(o),k=(0,n.useRef)(null);(0,h.Z)(k,(0,n.useCallback)(q,[]));const I=(0,f.Z)(),$=r.clone(),B=`/organizations/${e.slug}/events/`,M=$.project?.map(String),V=(0,n.useCallback)(i()((async t=>{try{R(!0);const e=new m.MY("");e.addFilterValues("transaction",[x(t)],!1),e.addFilterValues("event.type",["transaction"]),Object.keys(I.activeRequests).length&&I.clear();const[r]=await(0,d.AA)(I,B,{field:["transaction","project_id","count()"],project:M,sort:"-count()",query:e.formatString(),statsPeriod:$.statsPeriod,referrer:"api.performance.transaction-name-search-bar"}),a=r.data.reduce(((t,e)=>(t.children.push({value:A(e),title:e.transaction,type:v.q.LINK,desc:""}),t)),{title:"All Transactions",children:[],icon:null,type:"header"});F(-1),E([a])}catch(t){throw new Error("Unable to fetch event field values")}finally{R(!1)}}),u.Dk,{leading:!0}),[I,B,$.statsPeriod,M.join(",")]),W=t=>{const e=S(t);Z(e.transaction,!1)},Z=(t,e)=>{E([]),N(t),t=new m.MY(t).formatString(),a(t?e?t:`transaction:"${t}"`:""),q()};return(0,w.BX)(P,{"data-test-id":"transaction-search-bar",ref:k,children:[(0,w.tZ)(c.Z,{placeholder:(0,p.t)("Search Transactions"),onChange:t=>{if(N(t),0===t.length&&a(""),t.length<3)return E([]),void q();L(!0),V(t)},onKeyDown:t=>{const{key:e}=t;if(!O)if("Escape"===e&&j)q();else{if(("ArrowUp"===e||"ArrowDown"===e)&&j&&b>0){const t=T[0].children[D],r=(D+b+("ArrowUp"===e?-1:1))%b;F(r);const a=T[0].children[r];let n=T;return t&&(n=(0,l.$l)(T,t,!1)),a&&(n=(0,l.$l)(n,a,!0)),void E(n)}if("Enter"===e){t.preventDefault();const e=T[0]?.children[D];e?.value?W(e.value):Z(C,!0)}}},query:C}),j&&(0,w.tZ)(g.Z,{maxMenuHeight:300,searchSubstring:C,loading:O,items:T,onClick:W,onIconClick:t=>{(t=>{const{transaction:r,project_id:a}=t,n=$.generateQueryStringObject();E([]);const o=(0,_.e1)({orgSlug:e.slug,transaction:r,projectID:String(a),query:n});s.browserHistory.push((0,y.D)(o))})(S(t))}})]})}T.displayName="SearchBar";const A=t=>`${t.transaction}:${t.project_id}`,S=t=>{const e=t.lastIndexOf(":");return{project_id:parseInt(t.slice(e+1),10),transaction:t.slice(0,e)}},x=t=>(t.startsWith("*")||(t="*"+t),t.endsWith("*")||(t+="*"),t),P=(0,a.Z)("div",{target:"efn8czs0"})({name:"bjn8wh",styles:"position:relative"}),E=T},"./app/utils/useOnClickOutside.tsx":(t,e,r)=>{r.d(e,{Z:()=>n});var a=r("../node_modules/react/index.js");const n=function(t,e){(0,a.useEffect)((()=>{const r=r=>{const a=t?.current;a&&!a.contains(r.target)&&e(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[t,e])}},"./app/views/performance/data.tsx":(t,e,r)=>{r.d(e,{$r:()=>T,AM:()=>x,C:()=>S,GY:()=>f,V$:()=>v,hj:()=>y,mW:()=>h,yX:()=>g}),r("../node_modules/core-js/modules/es.array.push.js");var a=r("./app/components/gridEditable/index.tsx"),n=r("./app/components/performance/searchBar.tsx"),s=r("./app/constants/pageFilters.tsx"),o=r("./app/locale.tsx"),i=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/performance/vitals/constants.tsx"),l=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/trends/utils.tsx"),d=r("./app/views/performance/landing/utils.tsx"),m=r("./app/views/performance/vitalDetail/utils.tsx");const f="7d",h=300,y=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"],_=["transaction"],g=t=>t?.features?.includes("performance-landing-page-stats-period")?"14d":f;let v;!function(t){t.TPM="tpm",t.THROUGHPUT="throughput",t.FAILURE_RATE="failureRate",t.P50="p50",t.P75="p75",t.P95="p95",t.P99="p99",t.LCP="lcp",t.FCP="fcp",t.FID="fid",t.CLS="cls",t.STATUS_BREAKDOWN="statusBreakdown",t.DURATION_DISTRIBUTION="durationDistribution",t.USER_MISERY="userMisery",t.APDEX="apdex",t.APP_START_COLD="appStartCold",t.APP_START_WARM="appStartWarm",t.SLOW_FRAMES="slowFrames",t.FROZEN_FRAMES="frozenFrames",t.STALL_PERCENTAGE="stallPercentage",t.MOST_ISSUES="mostIssues",t.MOST_ERRORS="mostErrors",t.SLOW_HTTP_SPANS="slowHTTPSpans",t.TIME_TO_FULL_DISPLAY="timeToFullDisplay",t.TIME_TO_INITIAL_DISPLAY="timeToInitialDisplay"}(v||(v={}));const w={tpm:()=>(0,o.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,o.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,o.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,o.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,o.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,o.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,o.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,o.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,o.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,o.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,o.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),statusBreakdown:()=>(0,o.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,o.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMisery:()=>(0,o.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdex:()=>(0,o.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,o.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,o.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,o.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,o.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,o.t)("Transactions with the most associated errors."),mostIssues:()=>(0,o.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,o.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,o.t)("The percentage of the transaction duration in which the application is in a stalled state."),timeToFullDisplay:()=>(0,o.t)("The time between application launch and complete display of all resources and views"),timeToInitialDisplay:()=>(0,o.t)("The time it takes for an application to produce its first frame")};function T(t,e){return w.hasOwnProperty(e)?w[e](t):""}function A(t,e){const r=new u.MY(t);if(r.freeText.length>0){const t=r.freeText.join(" ");r.setFilterValues("transaction",[(0,n.D)(t)],!1),r.freeText=[]}return e&&(r.tokens=r.tokens.filter((t=>t.key&&_.includes(t.key)))),r.formatString()}function S(t,e){let{isTrends:r=!1,withStaticFilters:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;const m=function(t,e,r){const{query:n}=t,s=n.start&&n.end,u={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},d=Array(u.fields.length).fill(a.z7);d[u.fields.length-1]="110",u.widths=d,n.statsPeriod||s||(u.range=g(r)),u.orderby=(0,l.ro)(n.sort,"-tpm");const m=(0,l.ro)(n.query,"");u.query=A(m,e);const f=i.ZP.fromNewQueryWithLocation(u,t);if(f.additionalConditions.addFilterValues("event.type",["transaction"]),n.trendParameter){const e=(0,p.IO)(t,[],[]);c.r9[e.column]&&f.additionalConditions.addFilterValues("has",[e.column])}return f}(t,n,u);if(r)return m;const f=(0,d.Q_)(t,e,m);switch(f?.field){case d.BY.FRONTEND_PAGELOAD:return function(t,e,r){const{query:n}=t,s=n.start&&n.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(a.z7);u[c.fields.length-1]="110",c.widths=u,n.statsPeriod||s||(c.range=g(r)),c.orderby=(0,l.ro)(n.sort,"-tpm");const p=(0,l.ro)(n.query,"");c.query=A(p,e);const d=i.ZP.fromNewQueryWithLocation(c,t);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d.additionalConditions.addFilterValues("transaction.op",["pageload"]),d}(t,n,u);case d.BY.FRONTEND_OTHER:return function(t,e,r){const{query:n}=t,s=n.start&&n.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(a.z7);u[c.fields.length-1]="110",c.widths=u,n.statsPeriod||s||(c.range=g(r)),c.orderby=(0,l.ro)(n.sort,"-tpm");const p=(0,l.ro)(n.query,"");c.query=A(p,e);const d=i.ZP.fromNewQueryWithLocation(c,t);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}(t,n,u);case d.BY.BACKEND:return function(t,e,r){const{query:n}=t,s=n.start&&n.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(a.z7);u[c.fields.length-1]="110",c.widths=u,n.statsPeriod||s||(c.range=g(r)),c.orderby=(0,l.ro)(n.sort,"-tpm");const p=(0,l.ro)(n.query,"");c.query=A(p,e);const d=i.ZP.fromNewQueryWithLocation(c,t);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}(t,n,u);case d.BY.MOBILE:return function(t,e,r,n,c){const{query:u}=t,p=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"];c.features.includes("mobile-vitals")&&p.push("p75(measurements.time_to_initial_display)");const d=r.project;if(d.length>0&&d[0]!==s.mP){const t=e.filter((t=>d.includes(parseInt(t.id,10))));t.length>0&&t.every((t=>"react-native"===t.platform))&&p.push("p75(measurements.stall_percentage)")}const m=u.start&&u.end,f={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...p,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},h=Array(f.fields.length).fill(a.z7);h[f.fields.length-1]="110",f.widths=h,u.statsPeriod||m||(f.range=g(c)),f.orderby=(0,l.ro)(u.sort,"-tpm");const y=(0,l.ro)(u.query,"");f.query=A(y,n);const _=i.ZP.fromNewQueryWithLocation(f,t);return _.additionalConditions.addFilterValues("event.type",["transaction"]),_}(t,e,m,n,u);default:return m}}function x(t,e){const{query:r}=t,a=(0,m.iF)(t),n=r.start&&r.end,s={id:void 0,name:(0,o.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()",`p50(${a})`,`p75(${a})`,`p95(${a})`,(0,m.Ve)(a),(0,m.q4)(a)],version:2,yAxis:[`p75(${a})`]};r.statsPeriod||n||(s.range=g(e)),s.orderby=(0,l.ro)(r.sort,"-count");const c=(0,l.ro)(r.query,"");s.query=A(c,!1);const u=i.ZP.fromNewQueryWithLocation(s,t);return u.additionalConditions.addFilterValues("event.type",["transaction"]),u.additionalConditions.addFilterValues("has",[a]),u}},"./app/views/performance/landing/utils.tsx":(t,e,r)=>{r.d(e,{BY:()=>h,Cf:()=>g,Lx:()=>y,NJ:()=>T,Oo:()=>A,Q_:()=>w,TT:()=>v,ZR:()=>x,hv:()=>S,kP:()=>_}),r("../node_modules/core-js/modules/es.array.push.js");var a=r("../node_modules/react-router/es/index.js"),n=r("../node_modules/lodash/omit.js"),s=r.n(n),o=r("./app/locale.tsx"),i=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=r("./app/utils/formatters.tsx"),l=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/data.tsx"),d=r("./app/views/performance/utils.tsx");const m="left",f="right";let h;!function(t){t.ALL="all",t.FRONTEND_PAGELOAD="frontend_pageload",t.FRONTEND_OTHER="frontend_other",t.BACKEND="backend",t.MOBILE="mobile"}(h||(h={}));const y=[{label:(0,o.t)("All Transactions"),field:h.ALL},{label:(0,o.t)("Web Vitals"),field:h.FRONTEND_PAGELOAD},{label:(0,o.t)("Frontend"),field:h.FRONTEND_OTHER},{label:(0,o.t)("Backend"),field:h.BACKEND},{label:(0,o.t)("Mobile"),field:h.MOBILE}];function _(t,e){const{eventView:r,location:n}=e,s=new u.MY(r.query);s.addFilterValues("!transaction",[`${t}`]),a.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:s.formatString()}})}function g(t){const e=(0,l.ro)(t?.query?.landingDisplay);return y.find((t=>{let{field:r}=t;return r===e}))}function v(t,e){const r=A(t,e);return y.find((t=>{let{field:e}=t;return e===r}))||y[0]}function w(t,e,r){return g(t)||v(e,r)}function T(t,e,r,n,o){const c=(0,l.ro)(e.query.query,""),p=new u.MY(c);p.removeFilter("transaction.op");const d={...s()(e.query,["landingDisplay","sort"]),query:p.formatString()};delete d[m],delete d[f];const h=A(r,o),y=w(e,r,o).field,_=h===t?{...d}:{...d,landingDisplay:t};(0,i.Z)("performance_views.landingv3.display_change",{organization:n,change_to_display:t,default_display:h,current_display:y,is_default:h===y}),a.browserHistory.push({pathname:e.pathname,query:_})}function A(t,e){if(!e)return h.ALL;const r=e.project;return{[d.iy.ANY]:h.ALL,[d.iy.FRONTEND]:h.FRONTEND_PAGELOAD,[d.iy.BACKEND]:h.BACKEND,[d.iy.MOBILE]:h.MOBILE}[(0,d.Bh)(t,r)]??h.ALL}const S=t=>({"p75(transaction.duration)":{title:(0,o.t)("Duration (p75)"),tooltip:(0,p.$r)(t,p.V$.P75),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"tpm()":{title:(0,o.t)("Throughput"),tooltip:(0,p.$r)(t,p.V$.THROUGHPUT),formatter:c.Du},"failure_rate()":{title:(0,o.t)("Failure Rate"),tooltip:(0,p.$r)(t,p.V$.FAILURE_RATE),formatter:t=>(0,c.rl)(t,2)},"apdex()":{title:(0,o.t)("Apdex"),tooltip:(0,p.$r)(t,p.V$.APDEX),formatter:t=>(0,c.$1)(t,4)},"p75(measurements.frames_slow_rate)":{title:(0,o.t)("Slow Frames (p75)"),tooltip:(0,p.$r)(t,p.V$.SLOW_FRAMES),formatter:t=>(0,c.rl)(t,2)},"p75(measurements.frames_frozen_rate)":{title:(0,o.t)("Frozen Frames (p75)"),tooltip:(0,p.$r)(t,p.V$.FROZEN_FRAMES),formatter:t=>(0,c.rl)(t,2)},"p75(measurements.app_start_cold)":{title:(0,o.t)("Cold Start (p75)"),tooltip:(0,p.$r)(t,p.V$.APP_START_COLD),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,o.t)("Warm Start (p75)"),tooltip:(0,p.$r)(t,p.V$.APP_START_WARM),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,o.t)("Stall Percentage (p75)"),tooltip:(0,p.$r)(t,p.V$.STALL_PERCENTAGE),formatter:t=>(0,c.rl)(t,2)}});function x(t){return Boolean(t.getFields().find((t=>t.includes("measurements.stall_percentage"))))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_data_tsx-app_views_performance_landing_utils_tsx.9c4719ee85eeaf043dcc96e6bcae2746.js.map