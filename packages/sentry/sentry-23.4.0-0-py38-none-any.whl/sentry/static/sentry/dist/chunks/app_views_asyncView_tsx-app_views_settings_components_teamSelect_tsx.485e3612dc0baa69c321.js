"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_asyncView_tsx-app_views_settings_components_teamSelect_tsx"],{"./app/components/roleSelectControl.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/forms/controls/selectControl.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{roles:t,disableUnallowed:s,...o}=e;return(0,a.tZ)(n.Z,{options:t?.map((e=>({value:e.id,label:e.name,disabled:s&&!e.allowed||e.isRetired,details:(0,a.tZ)(r,{children:e.desc})}))),showDividers:!0,...o})}i.displayName="RoleSelectControl";const l=i,r=(0,o.Z)("span",{target:"eu9y8de0"})({name:"vad6xm",styles:"display:inline-block;width:20rem"})},"./app/utils/orgRole.tsx":(e,t,s)=>{function o(e,t){const s=t.reduce(((e,t,s)=>(e[t.id]={index:s,role:t},e)),{});return e.sort(((e,t)=>s[t].index-s[e].index)),s[e[0]]?.role}s.d(t,{M:()=>o})},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends o.Z{getTitle(){return""}render(){return(0,a.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/components/teamSelect.tsx":(e,t,s)=>{s.d(t,{Z:()=>P});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.regexp.flags.js"),s("../node_modules/react/index.js")),a=s("../node_modules/lodash/debounce.js"),i=s.n(a),l=s("../node_modules/lodash/startCase.js"),r=s.n(l),d=s("./app/components/button.tsx"),m=s("./app/components/confirm.tsx"),c=s("./app/components/dropdownAutoComplete/index.tsx"),p=s("./app/components/dropdownButton.tsx"),u=s("./app/components/emptyMessage.tsx"),g=s("./app/components/idBadge/teamBadge/index.tsx"),x=s("./app/components/links/link.tsx"),h=s("./app/components/loadingIndicator.tsx"),f=s("./app/components/panels/index.tsx"),Z=s("./app/components/roleSelectControl.tsx"),R=s("./app/components/tooltip.tsx"),w=s("./app/constants/index.tsx"),b=s("./app/icons/index.tsx"),v=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),T=s("./app/utils/orgRole.tsx"),z=s("./app/utils/useTeams.tsx"),j=s("./app/views/settings/organizationTeams/roleOverwriteWarning.tsx"),_=s("./app/views/settings/organizationTeams/utils.tsx"),C=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function S(e){let{disabled:t,isOrgOwner:s,loadingTeams:o,enforceIdpProvisioned:a,menuHeader:l,confirmLastTeamRemoveMessage:r,selectedOrgRole:d,selectedTeamRoles:m,selectedTeams:g,organization:x,onAddTeam:Z,onRemoveTeam:b,onChangeTeamRole:y}=e;const{teams:S,onSearch:B,fetching:I}=(0,z.Z)(),{orgRoleList:A,teamRoleList:P}=x,q=g?.map((e=>e.slug))||m?.map((e=>e.teamSlug))||[],D=S.filter((e=>q.includes(e.slug)&&e.orgRole)).map((e=>e.orgRole));d&&D.push(d);const U=(0,T.M)(D,A)?.id,V=S.filter((e=>!q.some((t=>t===e.slug)))).map(((e,o)=>{const n=a&&e.flags["idp:provisioned"];return{index:o,value:e.slug,searchKey:e.slug,label:()=>{const t=null!==e.orgRole&&!s,o=(0,_.m)(n,t);return n||t?(0,C.tZ)(R.u,{title:o,children:(0,C.tZ)(N,{avatarSize:18,team:e})}):(0,C.tZ)(L,{avatarSize:18,team:e})},disabled:t||n||null!==e.orgRole&&!s}}));return(0,C.BX)(f.s_,{children:[(0,C.BX)(f.V9,{hasButtons:!0,children:[(0,v.t)("Team"),(0,C.tZ)(c.Z,{items:V,busyItemsStillVisible:I,onChange:i()((e=>B(e.target.value)),w.Dk),onSelect:e=>Z(e.value),emptyMessage:(0,v.t)("No teams"),menuHeader:l,disabled:t,alignMenu:"right",children:e=>{let{isOpen:s}=e;return(0,C.tZ)(p.Z,{"aria-label":(0,v.t)("Add Team"),isOpen:s,size:"xs",disabled:t,children:(0,v.t)("Add Team")})}})]}),(0,C.tZ)(f.N,{children:o?(0,C.tZ)(h.Z,{}):(()=>{const e=g?.length||m?.length;if(0===e)return(0,C.tZ)(u.Z,{children:(0,v.t)("No Teams assigned")});const o=1===e&&r?r:null;return(0,C.BX)(n.Fragment,{children:[x.features.includes("team-roles")&&U&&(0,C.tZ)(j.pu,{orgRole:U,orgRoleList:A,teamRoleList:P}),g&&g.map((e=>(0,C.tZ)(O,{disabled:t,confirmMessage:o,organization:x,team:e,onRemoveTeam:e=>b(e)},e.slug))),U&&m&&m.map((e=>{const n=S.find((t=>t.slug===e.teamSlug));return n?(0,C.tZ)(M,{disabled:t,enforceIdpProvisioned:a,confirmMessage:o,organization:x,team:n,isOrgOwner:s??!1,selectedOrgRole:U,selectedTeamRole:e.role,onChangeTeamRole:y,onRemoveTeam:e=>b(e)},e.teamSlug):(0,C.tZ)(k,{children:(0,v._N)("Cannot find #[slug]",{slug:e.teamSlug})},e.teamSlug)}))]})})()})]})}function O(e){let{organization:t,team:s,onRemoveTeam:o,disabled:n,confirmMessage:a}=e;return(0,C.BX)(k,{"data-test-id":"team-row-for-project",children:[(0,C.tZ)(B,{to:`/settings/${t.slug}/teams/${s.slug}/`,children:(0,C.tZ)(g.a,{team:s})}),(0,C.tZ)(m.Z,{message:a,bypass:!a,onConfirm:()=>o(s.slug),disabled:n,children:(0,C.tZ)(d.zx,{size:"xs",icon:(0,C.tZ)(b.JZ,{isCircled:!0,size:"xs"}),disabled:n,children:(0,v.t)("Remove")})})]})}function M(e){let{organization:t,team:s,selectedOrgRole:o,selectedTeamRole:a,onRemoveTeam:i,onChangeTeamRole:l,isOrgOwner:c,disabled:p,confirmMessage:u,enforceIdpProvisioned:x}=e;const{teamRoleList:h,orgRoleList:f}=t,Z=(0,j.d8)({orgRole:o,orgRoleList:f,teamRoleList:h}),R=Z?h[1]:h.find((e=>e.id===a))||h[0],w=s.orgRole?`${r()(s.orgRole)} Team`:null,y=x&&s.flags["idp:provisioned"],T=null!==s.orgRole&&!c,z=p||y||T,S=(0,_.m)(y,T);return(0,C.BX)(k,{"data-test-id":"team-row-for-member",children:[(0,C.tZ)(B,{to:`/settings/${t.slug}/teams/${s.slug}/`,children:(0,C.tZ)(g.a,{team:s})}),(0,C.tZ)(I,{children:w}),t.features.includes("team-roles")&&l&&(0,C.tZ)(n.Fragment,{children:(0,C.tZ)(A,{disabled:p||Z,disableUnallowed:!1,size:"xs",roles:h,value:R?.id,onChange:e=>l(s.slug,e.value)})}),(0,C.tZ)(m.Z,{message:u,bypass:!u,onConfirm:()=>i(s.slug),disabled:z,children:(0,C.tZ)(d.zx,{size:"xs",icon:(0,C.tZ)(b.JZ,{isCircled:!0,size:"xs"}),disabled:z,title:S,children:(0,v.t)("Remove")})})]})}S.displayName="TeamSelect",O.displayName="ProjectTeamRow",M.displayName="MemberTeamRow";const L=(0,o.Z)(g.a,{target:"ey5q24x5"})("font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";text-transform:none;"),N=(0,o.Z)(g.a,{target:"ey5q24x4"})("font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";text-transform:none;filter:grayscale(1);"),k=(0,o.Z)(f.Lv,{target:"ey5q24x3"})("padding:",(0,y.D)(2),";align-items:center;justify-content:space-between;"),B=(0,o.Z)(x.Z,{target:"ey5q24x2"})({name:"aco78w",styles:"flex-grow:4"}),I=(0,o.Z)("div",{target:"ey5q24x1"})({name:"1k42tn9",styles:"min-width:90px;flex-grow:1;display:flex;justify-content:center"}),A=(0,o.Z)(Z.Z,{target:"ey5q24x0"})("min-width:200px;margin-right:",(0,y.D)(2),";"),P=S},"./app/views/settings/organizationTeams/roleOverwriteWarning.tsx":(e,t,s)=>{s.d(t,{Sk:()=>r,d8:()=>m,pu:()=>d});var o=s("./app/components/panels/index.tsx"),n=s("./app/components/tooltip.tsx"),a=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return m(e)?(0,l.tZ)(n.u,{title:c(e),children:(0,l.tZ)(a.aU,{size:"sm",color:"gray300"})}):null}function d(e){return m(e)?(0,l.tZ)(o.aU,{"data-test-id":"alert-role-overwrite",children:c(e)}):null}function m(e){const{orgRole:t,orgRoleList:s,teamRoleList:o}=e,n=s.find((e=>e.id===t));return o.findIndex((e=>e.id===n?.minimumTeamRole))>0}function c(e){const{orgRole:t,orgRoleList:s,teamRoleList:o,isSelf:n}=e,a=s.find((e=>e.id===t)),r=o.find((e=>e.id===a?.minimumTeamRole));return a&&r?(0,i._N)("[selfNoun] organization role as [article] [orgRole] has granted [selfPronoun] a minimum team-level role of [teamRole]",{selfNoun:n?"Your":"This user's",selfPronoun:n?"you":"them",article:"AEIOU".includes(a.name[0])?"an":"a",orgRole:(0,l.tZ)("strong",{children:a.name}),teamRole:(0,l.tZ)("strong",{children:r.name})}):""}r.displayName="RoleOverwriteIcon",d.displayName="RoleOverwritePanelAlert"},"./app/views/settings/organizationTeams/utils.tsx":(e,t,s)=>{s.d(t,{m:()=>n});var o=s("./app/locale.tsx");function n(e,t){return e?(0,o.t)("Membership to this team is managed through your organization's identity provider."):t?(0,o.t)("Membership to a team with an organization role is managed by org owners."):void 0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_asyncView_tsx-app_views_settings_components_teamSelect_tsx.96d658046fc3d01029acb9d291761b78.js.map