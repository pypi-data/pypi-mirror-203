"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetViewerModal_tsx"],{"./app/components/gridEditable/sortLink.tsx":(e,t,i)=>{i.d(t,{Z:()=>y});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=i("../node_modules/react-router/es/index.js"),n=i("../node_modules/lodash/omit.js"),o=i.n(n),r=i("./app/components/links/link.tsx"),l=i("./app/icons/index.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{align:t,title:i,canSort:s,generateSortLink:n,onClick:o,direction:r,replace:l}=e;const p=n();if(!p||!s)return(0,d.tZ)(u,{align:t,children:i});const y=r?(0,d.tZ)(g,{size:"xs",direction:"desc"===r?"down":"up"}):null;return(0,d.BX)(c,{align:t,to:p,onClick:e=>{l&&(e.preventDefault(),a.browserHistory.replace(p)),o?.(e)},children:[i," ",y]})}p.displayName="SortLink";const c=(0,s.Z)((e=>{const t=o()(e,["align","css"]);return(0,d.tZ)(r.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,s.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),g=(0,s.Z)(l.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),y=p},"./app/components/modals/widgetViewerModal.tsx":(e,t,i)=>{i.r(t),i.d(t,{default:()=>Oe,modalCss:()=>ve});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.push.js"),i("../node_modules/core-js/modules/es.array.unshift.js"),i("../node_modules/react/index.js")),n=i("../node_modules/react-select/dist/index-4bd03571.esm.js"),o=i("../node_modules/@sentry/core/esm/exports.js"),r=i("../node_modules/@sentry/utils/esm/string.js"),l=i("../node_modules/lodash/cloneDeep.js"),d=i.n(l),p=i("../node_modules/lodash/isEqual.js"),c=i.n(p),u=i("../node_modules/lodash/trimStart.js"),g=i.n(u),y=i("../node_modules/moment/moment.js"),m=i.n(y),h=i("./app/actionCreators/events.tsx"),w=i("./app/components/alert.tsx"),b=i("./app/components/button.tsx"),x=i("./app/components/buttonBar.tsx"),Z=i("./app/components/forms/controls/selectControl.tsx"),v=i("./app/components/forms/controls/selectOption.tsx"),R=i("./app/components/gridEditable/index.tsx"),f=i("./app/components/pagination.tsx"),T=i("./app/components/questionTooltip.tsx"),E=i("./app/components/searchSyntax/parser.tsx"),S=i("./app/components/searchSyntax/renderer.tsx"),_=i("./app/locale.tsx"),O=i("./app/styles/space.tsx"),C=i("./app/utils.tsx"),q=i("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),k=i("./app/utils/dates.tsx"),L=i("./app/utils/discover/fields.tsx"),D=i("./app/utils/parseLinkHeader.tsx"),z=i("./app/utils/performance/contexts/metricsCardinality.tsx"),F=i("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),B=i("./app/utils/queryString.tsx"),A=i("./app/utils/useApi.tsx"),I=i("./app/utils/useLocation.tsx"),P=i("./app/utils/useRouter.tsx"),j=i("./app/utils/withPageFilters.tsx"),N=i("./app/views/dashboards/types.tsx"),V=i("./app/views/dashboards/utils.tsx"),M=i("./app/views/dashboards/widgetCard/index.tsx"),H=i("./app/views/dashboards/widgetCard/chart.tsx"),U=i("./app/views/dashboards/widgetCard/dashboardsMEPContext.tsx"),G=i("./app/views/dashboards/widgetCard/issueWidgetQueries.tsx"),X=i("./app/views/dashboards/widgetCard/releaseWidgetQueries.tsx"),$=i("./app/views/dashboards/widgetCard/widgetCardChartContainer.tsx"),Q=i("./app/views/dashboards/widgetCard/widgetQueries.tsx"),W=i("./app/views/discover/utils.tsx"),Y=i("./app/views/organizationContext.tsx"),J=i("./app/views/performance/landing/metricsDataSwitcher.tsx"),K=i("./app/components/modals/widgetViewerModal/utils.tsx"),ee=i("./app/components/gridEditable/sortLink.tsx"),te=(i("./app/components/links/link.tsx"),i("./app/components/tooltip.tsx")),ie=i("./app/utils/dashboards/issueFieldRenderers.tsx"),se=i("./app/utils/discover/eventView.tsx"),ae=i("./app/utils/discover/fieldRenderers.tsx"),ne=i("./app/views/dashboards/widgetBuilder/issueWidget/fields.tsx"),oe=i("./app/views/discover/table/topResultsIndicator.tsx"),re=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const le=e=>{let{location:t,widget:i,tableData:s,organization:a,onHeaderClick:n}=e;return function(e,o){const r=s?.meta,l=(0,L.qG)(e.name,e.type,r),d=(0,ie.N)(String(e.key));return(0,re.tZ)(ee.Z,{align:l,title:(0,re.tZ)(ue,{title:e.name,children:e.name}),direction:i.queries[0].orderby===d?"desc":void 0,canSort:!!d,generateSortLink:()=>({...t,query:{...t.query,[K.R.SORT]:d,[K.R.PAGE]:void 0,[K.R.CURSOR]:void 0}}),onClick:()=>{n?.(),(0,q.Z)("dashboards_views.widget_viewer.sort",{organization:a,widget_type:N.l9.ISSUE,display_type:i.displayType,column:e.name,order:"desc"})}})}},de=e=>{let{location:t,selection:i,widget:s,tableData:a,organization:n,onHeaderClick:o,isMetricsData:r}=e;return function(e,l){const{orderby:d}=s.queries[0],p=`${d.startsWith("-")?"-":""}${(0,L.LY)(g()(d,"-"))}`,c=(0,V.tT)(s.title,{...s.queries[0],orderby:p},i,s.displayType),u=a?.meta,y=(0,L.qG)(e.name,e.type,u),m={field:String(e.key),width:e.width},h=c.sortForField(m,u),w=!(r&&"title"===m.field)&&(0,se.M3)(m,u),b=(0,L.uI)(e.name)?c.getEquations()[(0,L.G5)(e.name)]:e.name;return(0,re.tZ)(ee.Z,{align:y,title:(0,re.tZ)(ue,{title:b,children:b}),direction:h?h.kind:void 0,canSort:w,generateSortLink:function(){if(!u)return;const e=c.sortOnField(m,u,void 0,!0).generateQueryStringObject();return{...t,query:{...t.query,[K.R.SORT]:e.sort,[K.R.PAGE]:void 0,[K.R.CURSOR]:void 0}}},onClick:()=>{o?.(),(0,q.Z)("dashboards_views.widget_viewer.sort",{organization:n,widget_type:N.l9.DISCOVER,display_type:s.displayType,column:e.name,order:"desc"===h?.kind?"asc":"desc"})}})}},pe=e=>{let{location:t,organization:i,widget:s,tableData:n,isFirstPage:o}=e;return function(e,r,l,d){const p=String(e.key),c=s.displayType===N.FO.TOP_N;let u;switch(s.widgetType){case N.l9.ISSUE:u=((0,ie.O)(p)??(0,ae.Js)(p,ne.$L))(r,{organization:i,location:t});break;case N.l9.DISCOVER:default:if(!n||!n.meta)return r[e.key];const s=n.meta.units?.[e.key];u=(0,ae.Js)(p,n.meta,!1)(r,{organization:i,location:t,unit:s});const a=(0,L.LY)(p),o=r[a];if("integer"===n.meta[a]&&(0,C.ri)(o)&&o>999)return(0,re.tZ)(te.u,{title:o.toLocaleString(),containerDisplayMode:"block",position:"right",children:u})}const g=n?Math.min(n?.data.length,5):5;return(0,re.BX)(a.Fragment,{children:[c&&o&&l<5&&0===d?(0,re.tZ)(oe.Z,{count:g,index:l}):null,u]})}},ce=e=>{let{location:t,widget:i,tableData:s,organization:a,onHeaderClick:n}=e;return function(e,o){const r=s?.meta,l=(0,L.qG)(e.name,e.type,r),d=i.queries[0].orderby,p={kind:d.startsWith("-")?"desc":"asc",field:d.startsWith("-")?d.slice(1):d},c=(0,L.h1)(e.name),u=e.name;return(0,re.tZ)(ee.Z,{align:l,title:(0,re.tZ)(ue,{title:u,children:u}),direction:p.field===e.name?p.kind:void 0,canSort:c,generateSortLink:function(){const i=e.name===p.field?{...p,kind:"desc"===p.kind?"asc":"desc"}:{kind:"desc",field:e.name};return{...t,query:{...t.query,[K.R.SORT]:"desc"===i.kind?`-${i.field}`:i.field,[K.R.PAGE]:void 0,[K.R.CURSOR]:void 0}}},onClick:()=>{n?.(),(0,q.Z)("dashboards_views.widget_viewer.sort",{organization:a,widget_type:N.l9.RELEASE,display_type:i.displayType,column:e.name,order:"desc"===p?.kind?"asc":"desc"})}})}},ue=(0,s.Z)(te.u,{target:"e17t3rbx1"})({name:"168giuu",styles:"display:initial"}),ge="geo.country_code",ye="(Empty Query Condition)",me=(e,t)=>{const i=t.selection===e.selection,s=t.location.query[K.R.SORT]===e.location.query[K.R.SORT],a=c()(t.chartZoomOptions,e.chartZoomOptions),n=t.widget.displayType!==N.FO.TOP_N&&!(0,C.ri)(t.widget.limit);return i&&a&&(s||n)},he=(0,a.memo)($.b,me),we=(0,a.memo)(H.Z,me);function be(e){const{organization:t,widget:i,selection:s,Footer:l,Body:p,Header:c,closeModal:u,onEdit:y,seriesData:T,tableData:j,totalIssuesCount:$,pageLinks:ee,seriesResultsType:te}=e,ie=(0,I.T)(),se=(0,P.Z)(),ae=t.features.includes("widget-viewer-modal-minimap"),ne=(0,B.ro)(ie.query[K.R.START]),oe=(0,B.ro)(ie.query[K.R.END]),ue=i.displayType===N.FO.TABLE,me=i.queries.some((e=>e.aggregates.some((e=>e.includes("session.duration"))))),be=(0,a.useMemo)((()=>ne&&oe?{...s,datetime:{start:ne,end:oe,period:null,utc:null}}:s),[ne,oe,s]),[ve,Oe]=(0,a.useState)(!0),[Ce,qe]=(0,a.useState)({start:0,end:100}),[ke,Le]=(0,a.useState)(be),De=(0,a.useRef)(ke);(0,a.useEffect)((()=>{"POP"===ie.action&&(Le(be),qe(ne&&oe?{startValue:1e3*m().utc(ne).unix(),endValue:1e3*m().utc(oe).unix()}:{start:0,end:100}))}),[oe,ie,be,ne]);const[ze,Fe]=(0,a.useState)((0,B.qP)(ie.query[K.R.LEGEND]).reduce(((e,t)=>(e[t]=!1,e)),{})),[Be,Ae]=(0,a.useState)(),Ie=(0,B._q)(ie.query[K.R.QUERY])??0,Pe=(0,B._q)(ie.query[K.R.PAGE])??0,je=(0,B.ro)(ie.query[K.R.CURSOR]),Ne=(0,B.qP)(ie.query[K.R.WIDTH]),Ve=(0,B.ro)(ie.query[K.R.SORT]),Me=d()(Ve?i.queries.map((e=>({...e,orderby:Ve}))):i.queries),He=i.displayType===N.FO.TOP_N||void 0!==i.limit?{...i,queries:Me}:i,Ue=(0,A.Z)(),Ge={...d()({...i,queries:[Me[Ie]]}),displayType:N.FO.TABLE},{aggregates:Xe,columns:$e}=Ge.queries[0],{orderby:Qe}=i.queries[0],We=Qe.startsWith("-"),Ye=g()(Qe,"-"),Je=(0,C.ri)(Ge.queries[0].fields)?Ge.queries[0].fields:[...$e,...Xe];i.widgetType!==N.l9.DISCOVER||!Qe||(0,L.uI)(Ye)||Je.includes(Ye)||(Je.push(Ye),[Ge,He].forEach((e=>{(0,L.h1)(Ye)||(0,L.GO)(Ye)?e.queries.forEach((e=>{e.aggregates.includes(Ye)||e.aggregates.push(Ye)})):e.queries.forEach((e=>{e.columns.includes(Ye)||e.columns.push(Ye)}))}))),(0,L.GO)(Ye)&&Ge.queries[0].orderby===Qe&&(Ge.queries[0].orderby=`${We?"-":""}equation[${(0,V.yd)(Je)-1}]`),i.displayType!==N.FO.WORLD_MAP||$e.includes(ge)||(Je.unshift(ge),$e.unshift(ge));const Ke=[N.FO.AREA,N.FO.LINE,N.FO.BIG_NUMBER,N.FO.BAR].includes(i.displayType)&&i.widgetType&&[N.l9.DISCOVER,N.l9.RELEASE].includes(i.widgetType)&&!(0,C.ri)(i.limit);if(ue||(0,V.Mf)(Je).forEach((e=>{(0,L.h1)(e)&&!Xe.includes(e)&&Xe.unshift(e),(0,L.h1)(e)||$e.includes(e)||$e.unshift(e)})),$e.forEach((e=>{Je.includes(e)||Je.unshift(e)})),Ke)switch(i.widgetType){case N.l9.DISCOVER:1===Je.length&&(Ge.queries[0].orderby=Ge.queries[0].orderby||`-${Je[0]}`),Je.unshift("title"),$e.unshift("title");break;case N.l9.RELEASE:Je.unshift("release"),$e.unshift("release")}const et=(0,V.tT)(Ge.title,Ge.queries[0],ke,Ge.displayType);let tt=(0,W.Hg)(Je.map((e=>({field:e}))));const it=et.getSorts();tt=tt.map(((e,t)=>({...e,width:parseInt(Ne[t],10)||-1})));const st=Me.map(((e,t)=>{let{name:i,conditions:s}=e;const a=(0,V.DF)((0,V.lM)(ie)),n=!i&&s?(0,E.UG)(s+(""===a?"":` ${a}`)):null;return{label:(0,r.$G)(i||s,120),value:t,getHighlightedQuery:e=>null!==n?(0,re.tZ)(Ee,{...e,children:(0,re.tZ)(S.Z,{parsedQuery:n})}):void 0}})),at=(e,t)=>{const i=t.width?Number(t.width):R.z7,s=new Array(Math.max(e,Ne.length)).fill(R.z7);Ne.forEach(((e,t)=>s[t]=parseInt(e,10))),s[e]=i,se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.WIDTH]:s}})};function nt(e){let{selected:s}=e;Fe(s),se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.LEGEND]:Object.keys(s).filter((e=>!s[e]))}}),(0,q.Z)("dashboards_views.widget_viewer.toggle_legend",{organization:t,widget_type:i.widgetType??N.l9.DISCOVER,display_type:i.displayType})}function ot(s){let{tableResults:n,loading:o,pageLinks:r}=s;const{isMetricsData:l}=(0,U.XA)(),d=(0,D.Z)(r??null),p=!1===d.previous?.results;return(0,re.BX)(a.Fragment,{children:[(0,re.tZ)(R.ZP,{isLoading:o,data:n?.[0]?.data??[],columnOrder:tt,columnSortBy:it,grid:{renderHeadCell:de({...e,location:ie,widget:Ge,tableData:n?.[0],onHeaderClick:()=>{([N.FO.TOP_N,N.FO.TABLE].includes(i.displayType)||(0,C.ri)(i.limit))&&Oe(!1)},isMetricsData:l}),renderBodyCell:pe({...e,location:ie,tableData:n?.[0],isFirstPage:p}),onResizeColumn:at},location:ie}),(d?.previous?.results||d?.next?.results)&&(0,re.tZ)(f.Z,{pageLinks:r,onCursor:e=>{se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.CURSOR]:e}}),i.displayType===N.FO.TABLE&&Oe(!1),(0,q.Z)("dashboards_views.widget_viewer.paginate",{organization:t,widget_type:N.l9.DISCOVER,display_type:i.displayType})}})]})}(0,a.useEffect)((()=>{(async()=>{i.widgetType===N.l9.DISCOVER&&Ae(await async function(e,t,i,s){if(s.isValid())try{return(await(0,h.JE)(e,t.slug,s.getEventsAPIPayload(i))).toLocaleString()}catch(e){return void o.Tb(e)}}(Ue,t,ie,et))})()}),[Ie]);const rt=e=>{let{tableResults:n,loading:o,pageLinks:r,totalCount:l}=e;void 0===Be&&l&&Ae(l);const d=(0,D.Z)(r??null);return(0,re.BX)(a.Fragment,{children:[(0,re.tZ)(R.ZP,{isLoading:o,data:n?.[0]?.data??[],columnOrder:tt,columnSortBy:it,grid:{renderHeadCell:le({location:ie,organization:t,selection:s,widget:Ge,onHeaderClick:()=>{Oe(!1)}}),renderBodyCell:pe({location:ie,organization:t,selection:s,widget:Ge}),onResizeColumn:at},location:ie}),(d?.previous?.results||d?.next?.results)&&(0,re.tZ)(f.Z,{pageLinks:r,onCursor:(e,s,a,n)=>{let o=isNaN(Pe)?n:Pe+n,r=e;o<=0&&(r=void 0,o=0),se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.CURSOR]:r,[K.R.PAGE]:o}}),i.displayType===N.FO.TABLE&&Oe(!1),(0,q.Z)("dashboards_views.widget_viewer.paginate",{organization:t,widget_type:N.l9.ISSUE,display_type:i.displayType})}})]})},lt=s=>{let{tableResults:n,loading:o,pageLinks:r}=s;const l=(0,D.Z)(r??null),d=!1===l.previous?.results;return(0,re.BX)(a.Fragment,{children:[(0,re.tZ)(R.ZP,{isLoading:o,data:n?.[0]?.data??[],columnOrder:tt,columnSortBy:it,grid:{renderHeadCell:ce({...e,location:ie,widget:Ge,tableData:n?.[0],onHeaderClick:()=>{([N.FO.TOP_N,N.FO.TABLE].includes(i.displayType)||(0,C.ri)(i.limit))&&Oe(!1)}}),renderBodyCell:pe({...e,location:ie,tableData:n?.[0],isFirstPage:d}),onResizeColumn:at},location:ie}),!Ge.queries[0].orderby.match(/^-?release$/)&&(l?.previous?.results||l?.next?.results)&&(0,re.tZ)(f.Z,{pageLinks:r,onCursor:e=>{se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.CURSOR]:e}}),(0,q.Z)("dashboards_views.widget_viewer.paginate",{organization:t,widget_type:N.l9.RELEASE,display_type:i.displayType})}})]})},dt=(e,s)=>{const a=s.getModel(),{seriesStart:n,seriesEnd:o}=e;let r,l;r=a._payload.batch?.[0].startValue,l=a._payload.batch?.[0].endValue;const d=n?new Date(n).getTime():void 0,p=o?new Date(o).getTime():void 0;if(void 0===r||void 0===l){if(!d||!p)return;{const e=p-d;r=e*a._payload.start*.01+d,l=e*a._payload.end*.01+d}}qe({startValue:r,endValue:l});const c=(0,k.v5)(m().utc(r)),u=(0,k.v5)(m().utc(l));Le({...ke,datetime:{...ke.datetime,start:c,end:u,period:null}}),se.push({pathname:ie.pathname,query:{...ie.query,[K.R.START]:c,[K.R.END]:u}}),(0,q.Z)("dashboards_views.widget_viewer.zoom",{organization:t,widget_type:i.widgetType??N.l9.DISCOVER,display_type:i.displayType})};function pt(){switch(i.widgetType){case N.l9.ISSUE:return j&&ve&&i.displayType===N.FO.TABLE?rt({tableResults:j,loading:!1,errorMessage:void 0,pageLinks:ee,totalCount:$}):(0,re.tZ)(G.Z,{api:Ue,organization:t,widget:Ge,selection:ke,limit:i.displayType===N.FO.TABLE?20:10,cursor:je,dashboardFilters:(0,V.lM)(ie)??void 0,children:rt});case N.l9.RELEASE:return j&&ve&&i.displayType===N.FO.TABLE?lt({tableResults:j,loading:!1,pageLinks:ee}):(0,re.tZ)(X.ZP,{api:Ue,organization:t,widget:Ge,selection:ke,limit:i.displayType===N.FO.TABLE?20:10,cursor:je,dashboardFilters:(0,V.lM)(ie)??void 0,children:lt});case N.l9.DISCOVER:default:return j&&ve&&i.displayType===N.FO.TABLE?(0,re.tZ)(ot,{tableResults:j,loading:!1,pageLinks:ee}):(0,re.tZ)(Q.ZP,{api:Ue,organization:t,widget:Ge,selection:ke,limit:i.displayType===N.FO.TABLE?20:10,cursor:je,dashboardFilters:(0,V.lM)(ie)??void 0,children:e=>{let{tableResults:t,loading:i,pageLinks:s}=e;return(0,re.tZ)(ot,{tableResults:t,loading:i,pageLinks:s})}})}}return(0,re.tZ)(a.Fragment,{children:(0,re.tZ)(Y.g.Provider,{value:t,children:(0,re.tZ)(U.KC,{children:(0,re.tZ)(z.BT,{organization:t,location:ie,children:(0,re.tZ)(J.d,{organization:t,eventView:et,location:ie,hideLoadingIndicator:!0,children:e=>(0,re.BX)(F.kP,{location:ie,forceTransactions:e.forceTransactionsOnly,children:[(0,re.tZ)(c,{closeButton:!0,children:(0,re.tZ)("h3",{children:i.title})}),(0,re.tZ)(p,{children:(0,re.BX)(a.Fragment,{children:[me&&M.f0,i.displayType!==N.FO.TABLE&&(0,re.tZ)(Re,{height:i.displayType!==N.FO.BIG_NUMBER?300+(ae&&[N.FO.AREA,N.FO.LINE,N.FO.BAR,N.FO.TOP_N].includes(i.displayType)?H.R:0):null,children:(T||j)&&ve?(0,re.tZ)(we,{timeseriesResults:T,timeseriesResultsTypes:te,tableResults:j,errorMessage:void 0,loading:!1,location:ie,widget:i,selection:s,router:se,organization:t,onZoom:dt,onLegendSelectChanged:nt,legendOptions:{selected:ze},expandNumbers:!0,showSlider:ae,noPadding:!0,chartZoomOptions:Ce}):(0,re.tZ)(he,{location:ie,api:Ue,organization:t,selection:De.current,dashboardFilters:(0,V.lM)(ie)??void 0,widget:He,onZoom:dt,onLegendSelectChanged:nt,legendOptions:{selected:ze},expandNumbers:!0,showSlider:ae,noPadding:!0,chartZoomOptions:Ce})}),i.queries.length>1&&(0,re.tZ)(w.bZ,{type:"info",showIcon:!0,children:(0,_.t)("This widget was built with multiple queries. Table data can only be displayed for one query at a time. To edit any of the queries, edit the widget.")}),(i.queries.length>1||i.queries[0].conditions)&&(0,re.BX)(fe,{children:[(0,re.tZ)(Z.Z,{value:Ie,options:st,onChange:e=>{se.replace({pathname:ie.pathname,query:{...ie.query,[K.R.QUERY]:e.value,[K.R.PAGE]:void 0,[K.R.CURSOR]:void 0}}),(0,q.Z)("dashboards_views.widget_viewer.select_query",{organization:t,widget_type:i.widgetType??N.l9.DISCOVER,display_type:i.displayType})},components:{SingleValue:e=>(0,re.tZ)(n.c.SingleValue,{...e,getStyles:()=>({wordBreak:"break-word",flex:1,display:"flex",padding:`0 ${(0,O.D)(.5)}`}),children:st[Ie].getHighlightedQuery({display:"block"})??(st[Ie].label||(0,re.tZ)(_e,{children:ye}))}),Option:e=>{const t=e.data.getHighlightedQuery({display:"flex"});return(0,re.tZ)(v.Z,{...t?{...e,label:t}:e.label?e:{...e,label:(0,re.tZ)(_e,{children:ye})}})},...i.queries.length<2?{IndicatorsContainer:e=>null}:{}},isSearchable:!1,isDisabled:i.queries.length<2}),1===i.queries.length&&(0,re.tZ)(Te,{title:(0,_.t)("To edit this query, you must edit the widget."),size:"sm"})]}),pt()]})}),(0,re.tZ)(l,{children:(0,re.BX)(Se,{children:[Ze(Be,i.widgetType),(0,re.BX)(x.ZP,{gap:1,children:[y&&i.id&&(0,re.tZ)(b.zx,{onClick:()=>{u(),y(),(0,q.Z)("dashboards_views.widget_viewer.edit",{organization:t,widget_type:i.widgetType??N.l9.DISCOVER,display_type:i.displayType})},children:(0,_.t)("Edit Widget")}),i.widgetType&&(0,re.tZ)(xe,{widget:He,organization:t,selection:ke,selectedQueryIndex:Ie})]})]})})]})})})})})})}function xe(e){let t,i,{widget:s,selection:a,organization:n,selectedQueryIndex:o}=e;const{isMetricsData:r}=(0,U.XA)();switch(s.widgetType){case N.l9.ISSUE:t=(0,_.t)("Open in Issues"),i=(0,V.hS)(s,a,n);break;case N.l9.RELEASE:t=(0,_.t)("Open in Releases"),i=(0,V.Cg)(s,a,n);break;case N.l9.DISCOVER:default:t=(0,_.t)("Open in Discover"),i=(0,V.z1)({...s,queries:[s.queries[o]]},a,n,0,r)}return(0,re.tZ)(b.zx,{to:i,priority:"primary",onClick:()=>{(0,q.Z)("dashboards_views.widget_viewer.open_source",{organization:n,widget_type:s.widgetType??N.l9.DISCOVER,display_type:s.displayType})},children:t})}function Ze(e,t){if(void 0===e)return(0,re.tZ)("span",{});switch(t){case N.l9.ISSUE:return(0,re.tZ)("span",{children:(0,_._N)("[description:Total Issues:] [total]",{description:(0,re.tZ)("strong",{}),total:"1000"===e?"1000+":e})});case N.l9.DISCOVER:return(0,re.tZ)("span",{children:(0,_._N)("[description:Total Events:] [total]",{description:(0,re.tZ)("strong",{}),total:e})});default:return(0,re.tZ)("span",{})}}be.displayName="WidgetViewerModal",xe.displayName="OpenButton";const ve={name:"zhkibu",styles:"width:100%;max-width:1200px"},Re=(0,s.Z)("div",{target:"empe4o65"})("height:",(e=>e.height?`${e.height}px`:"auto"),";position:relative;padding-bottom:",(0,O.D)(3),";"),fe=(0,s.Z)("div",{target:"empe4o64"})("margin-bottom:",(0,O.D)(2),";position:relative;"),Te=(0,s.Z)(T.Z,{target:"empe4o63"})("position:absolute;top:",(0,O.D)(1.5),";right:",(0,O.D)(2),";"),Ee=(0,s.Z)("span",{target:"empe4o62"})("display:",(e=>e.display),";gap:",(0,O.D)(1),";font-family:",(e=>e.theme.text.familyMono),";font-size:",(e=>e.theme.fontSizeSmall),";line-height:2;flex:1;"),Se=(0,s.Z)("div",{target:"empe4o61"})("display:flex;flex-grow:1;flex-direction:column;gap:",(0,O.D)(1),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){align-items:center;flex-direction:row;justify-content:space-between;}"),_e=(0,s.Z)("span",{target:"empe4o60"})("color:",(e=>e.theme.disabled),";"),Oe=(0,j.Z)(be)},"./app/components/pagination.tsx":(e,t,i)=>{i.d(t,{Z:()=>w});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.push.js"),i("../node_modules/react-router/es/index.js")),n=i("./app/components/button.tsx"),o=i("./app/components/buttonBar.tsx"),r=i("./app/icons/index.tsx"),l=i("./app/locale.tsx"),d=i("./app/styles/space.tsx"),p=i("./app/utils/parseLinkHeader.tsx"),c=i("./app/utils/useLocation.tsx"),u=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=(e,t,i,s)=>a.browserHistory.push({pathname:t,query:{...i,cursor:e}});function y(e){let{to:t,className:i,onCursor:s=g,paginationAnalyticsEvent:a,pageLinks:d,size:y="sm",caption:w,disabled:b=!1}=e;const x=(0,c.T)();if(!d)return null;const Z=t??x.pathname,v=x.query,R=(0,p.Z)(d),f=b||!1===R.previous?.results,T=b||!1===R.next?.results;return(0,u.BX)(m,{className:i,"data-test-id":"pagination",children:[w&&(0,u.tZ)(h,{children:w}),(0,u.BX)(o.ZP,{merged:!0,children:[(0,u.tZ)(n.zx,{icon:(0,u.tZ)(r.g6,{direction:"left",size:"sm"}),"aria-label":(0,l.t)("Previous"),size:y,disabled:f,onClick:()=>{s?.(R.previous?.cursor,Z,v,-1),a?.("Previous")}}),(0,u.tZ)(n.zx,{icon:(0,u.tZ)(r.g6,{direction:"right",size:"sm"}),"aria-label":(0,l.t)("Next"),size:y,disabled:T,onClick:()=>{s?.(R.next?.cursor,Z,v,1),a?.("Next")}})]})]})}y.displayName="Pagination";const m=(0,s.Z)("div",{target:"e1yybcqw1"})("display:flex;align-items:center;justify-content:flex-end;margin:",(0,d.D)(3)," 0 0 0;"),h=(0,s.Z)("span",{target:"e1yybcqw0"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,d.D)(2),";"),w=y}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetViewerModal_tsx.2783ff4fcb74e9f6d4da4fcc7a6f0ccc.js.map