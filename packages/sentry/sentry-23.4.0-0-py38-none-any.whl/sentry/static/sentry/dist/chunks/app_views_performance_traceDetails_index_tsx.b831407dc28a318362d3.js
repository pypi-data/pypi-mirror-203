"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_traceDetails_index_tsx"],{"./app/utils/fuzzySearch.tsx":(e,t,r)=>{r.d(t,{I:()=>s}),r("../node_modules/core-js/modules/es.error.cause.js");const n={includeScore:!0,includeMatches:!0,threshold:.4,location:0,distance:75,minMatchCharLength:2};async function s(e,t){if(!t.keys)throw new Error("You need to define `options.keys`");return new((await r.e("vendors-node_modules_fuse_js_dist_fuse_esm_js").then(r.bind(r,"../node_modules/fuse.js/dist/fuse.esm.js"))).default)(e,{...n,...t})}},"./app/utils/performance/histogram/utils.tsx":(e,t,r)=>{r.d(t,{GT:()=>i,_W:()=>a,te:()=>s}),r("../node_modules/core-js/modules/es.error.cause.js");var n=r("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=s(e);return e.map((e=>{const r=e.bin;return{start:r,end:r+t}}))}function i(e){let{precision:t,type:r,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(r){case"duration":const s=t??(e<1e3?0:3);return(0,n.g9)(e/1e3,s,!0);case"number":const a=10**(t??0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${r}`)}};return e.map((e=>({value:e.count,name:a(e.bin),...s?.(e.bin)??{}})))}},"./app/utils/performance/quickTrace/traceFullQuery.tsx":(e,t,r)=>{r.d(t,{H:()=>p,g:()=>l});var n=r("../node_modules/react/index.js"),s=r("./app/utils/discover/genericDiscoverQuery.tsx"),a=r("./app/utils/performance/quickTrace/utils.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{detailed:t,eventId:r,...n}=e;const s=(0,a.eF)(n);return s.detailed=t?"1":"0",r&&(s.event_id=r),s}function c(e){let{children:t}=e;return(0,i.tZ)(n.Fragment,{children:t({isLoading:!1,error:null,traces:null,type:"full"})})}function u(e){let{traceId:t,start:r,end:n,statsPeriod:u,children:l,...p}=e;if(!t)return(0,i.tZ)(c,{children:l});const d=(0,a._Z)({start:r,end:n,statsPeriod:u});return(0,i.tZ)(s.ZP,{route:`events-trace/${t}`,getRequestPayload:o,eventView:d,...p,children:e=>{let{tableData:t,...r}=e;return l({traces:t||null,type:"full",...r})}})}function l(e){return(0,i.tZ)(u,{...e,detailed:!1})}function p(e){return(0,i.tZ)(u,{...e,detailed:!0})}c.displayName="EmptyTrace",u.displayName="GenericTraceFullQuery",l.displayName="TraceFullQuery",p.displayName="TraceFullDetailedQuery"},"./app/utils/performance/quickTrace/traceMetaQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>c});var n=r("../node_modules/react/index.js"),s=r("./app/utils/discover/genericDiscoverQuery.tsx"),a=r("./app/utils/performance/quickTrace/utils.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{traceId:t,start:r,end:o,statsPeriod:c,children:u,...l}=e;if(!t)return(0,i.tZ)(n.Fragment,{children:u({isLoading:!1,error:null,meta:null})});const p=(0,a._Z)({start:r,end:o,statsPeriod:c});return(0,i.tZ)(s.ZP,{route:`events-trace-meta/${t}`,getRequestPayload:a.eF,eventView:p,...l,children:e=>{let{tableData:t,...r}=e;return u({meta:t,...r})}})}o.displayName="TraceMetaQuery";const c=o},"./app/views/performance/breadcrumb.tsx":(e,t,r)=>{r.d(t,{Z:()=>g}),r("../node_modules/core-js/modules/es.array.push.js");var n=r("./app/components/breadcrumbs.tsx"),s=r("./app/locale.tsx"),a=r("./app/utils/queryString.tsx"),i=r("./app/views/performance/transactionSummary/tabs.tsx"),o=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),u=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),l=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),p=r("./app/views/performance/transactionSummary/utils.tsx"),d=r("./app/views/performance/vitalDetail/utils.tsx"),m=r("./app/views/performance/utils.tsx"),f=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){return(0,f.tZ)(n.Z,{crumbs:function(){const t=[],{organization:r,location:n,transaction:f,vitalName:h,spanSlug:g,eventSlug:y,traceSlug:v,tab:x}=e,S={pathname:(0,m.de)(r),query:{...n.query,transaction:void 0}};if(t.push({to:S,label:(0,s.t)("Performance"),preservePageFilters:!0}),h){const e=(0,d.i4)({orgSlug:r.slug,vitalName:"fcp",projectID:(0,a.ro)(n.query.project),query:n.query});t.push({to:e,label:(0,s.t)("Vital Detail"),preservePageFilters:!0})}else if(f){const e={orgSlug:r.slug,transaction:f.name,projectID:f.project,query:n.query};switch(x){case i.Z.Tags:{const r=(0,u.vG)(e);t.push({to:r,label:(0,s.t)("Tags"),preservePageFilters:!0});break}case i.Z.Events:{const r=(0,o.xr)(e);t.push({to:r,label:(0,s.t)("All Events"),preservePageFilters:!0});break}case i.Z.WebVitals:{const r=(0,l.Pl)(e);t.push({to:r,label:(0,s.t)("Web Vitals"),preservePageFilters:!0});break}case i.Z.Spans:{const r=(0,c.hN)(e);t.push({to:r,label:(0,s.t)("Spans"),preservePageFilters:!0});break}case i.Z.TransactionSummary:default:{const r=(0,p.e1)(e);t.push({to:r,label:(0,s.t)("Transaction Summary"),preservePageFilters:!0})}}}return f&&g?t.push({to:"",label:(0,s.t)("Span Summary")}):f&&y?t.push({to:"",label:(0,s.t)("Event Details")}):v&&t.push({to:"",label:(0,s.t)("Trace View")}),t}()})}h.displayName="Breadcrumb";const g=h},"./app/views/performance/traceDetails/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>$});var n=r("../node_modules/react/index.js"),s=r("./app/components/layouts/thirds.tsx"),a=r("./app/components/noProjectMessage.tsx"),i=r("./app/components/organizations/pageFilters/parse.tsx"),o=r("./app/components/sentryDocumentTitle.tsx"),c=r("./app/constants/pageFilters.tsx"),u=r("./app/locale.tsx"),l=r("./app/utils/discover/eventView.tsx"),p=r("./app/utils/discover/genericDiscoverQuery.tsx"),d=r("./app/utils/performance/quickTrace/traceFullQuery.tsx"),m=r("./app/utils/performance/quickTrace/traceMetaQuery.tsx"),f=r("./app/utils/queryString.tsx"),h=r("./app/utils/withApi.tsx"),g=r("./app/utils/withOrganization.tsx"),y=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),v=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),x=(r("../node_modules/core-js/modules/es.array.push.js"),r("./app/components/alert.tsx")),S=r("./app/components/assistant/guideAnchor.tsx"),T=r("./app/components/buttonBar.tsx"),_=r("./app/components/discoverButton.tsx"),b=r("./app/components/links/externalLink.tsx"),w=r("./app/components/loadingError.tsx"),Z=r("./app/components/loadingIndicator.tsx"),E=r("./app/components/timeSince.tsx"),I=r("./app/styles/space.tsx"),q=r("./app/utils.tsx"),j=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),P=r("./app/utils/formatters.tsx"),k=r("./app/utils/fuzzySearch.tsx"),D=r("./app/utils/getDynamicText.tsx"),V=r("./app/utils/performance/quickTrace/utils.tsx"),C=r("./app/utils/performanceForSentry.tsx"),F=r("./app/views/performance/breadcrumb.tsx"),M=r("./app/views/performance/transactionDetails/styles.tsx"),L=r("./app/views/performance/traceDetails/styles.tsx"),A=r("./app/views/performance/traceDetails/traceNotFound.tsx"),z=r("./app/views/performance/traceDetails/traceView.tsx"),N=r("./app/views/performance/traceDetails/utils.tsx"),U=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class X extends n.Component{constructor(){super(...arguments),(0,y.Z)(this,"state",{searchQuery:void 0,filteredTransactionIds:void 0}),(0,y.Z)(this,"fuse",null),(0,y.Z)(this,"traceViewRef",(0,n.createRef)()),(0,y.Z)(this,"virtualScrollbarContainerRef",(0,n.createRef)()),(0,y.Z)(this,"handleTransactionFilter",(e=>{this.setState({searchQuery:e||void 0},this.filterTransactions)})),(0,y.Z)(this,"filterTransactions",(()=>{const{traces:e}=this.props,{filteredTransactionIds:t,searchQuery:r}=this.state;if(!r||null===e||e.length<=0||!(0,q.ri)(this.fuse))return void(void 0!==t&&this.setState({filteredTransactionIds:void 0}));const n=this.fuse.search(r).filter((e=>{let{matches:t}=e;return t?.length})).map((e=>{let{item:t}=e;return t.transaction.event_id})),s=e.flatMap((e=>(0,V.xB)(e,(e=>{let{event_id:t,span_id:n}=e;return t.includes(r)||n.includes(r)})))).map((e=>e.event_id));this.setState({filteredTransactionIds:new Set([...n,...s])})}))}componentDidMount(){this.initFuse()}componentDidUpdate(e){this.props.traces!==e.traces&&this.initFuse()}async initFuse(){if((0,q.ri)(this.props.traces)&&this.props.traces.length>0){const e=this.props.traces.flatMap((e=>(0,V.S2)(e,((e,t)=>{const r=[t["transaction.op"],t.transaction,t.project_slug];return e.push({transaction:t,indexed:r}),e}),[])));this.fuse=await(0,k.I)(e,{keys:["indexed"],includeMatches:!0,threshold:.6,location:0,distance:100,maxPatternLength:32})}}renderTraceLoading(){return(0,U.tZ)(Z.Z,{})}renderTraceRequiresDateRangeSelection(){return(0,U.tZ)(w.Z,{message:(0,u.t)("Trace view requires a date range selection.")})}renderSearchBar(){return(0,U.tZ)(L.pH,{children:(0,U.tZ)(L.Iq,{defaultQuery:"",query:this.state.searchQuery||"",placeholder:(0,u.t)("Search for transactions"),onSearch:this.handleTransactionFilter})})}renderTraceHeader(e){const{meta:t}=this.props,r=t?.errors??e.errors.size,n=t?.performance_issues??e.performanceIssues.size;return(0,U.BX)(L.Z9,{children:[(0,U.tZ)(S.Z,{target:"trace_view_guide_breakdown",children:(0,U.tZ)(M.U,{headingText:(0,u.t)("Event Breakdown"),tooltipText:(0,u.t)("The number of transactions and issues there are in this trace."),bodyText:(0,u._N)("[transactions]  |  [errors]",{transactions:(0,u.tn)("%s Transaction","%s Transactions",t?.transactions??e.transactions.size),errors:(0,u.tn)("%s Issue","%s Issues",r+n)}),subtext:(0,u.tn)("Across %s project","Across %s projects",t?.projects??e.projects.size)})}),(0,U.tZ)(M.U,{headingText:(0,u.t)("Total Duration"),tooltipText:(0,u.t)("The time elapsed between the start and end of this trace."),bodyText:(0,P.g9)(e.endTimestamp-e.startTimestamp,2,!0),subtext:(0,D.Z)({value:(0,U.tZ)(E.Z,{date:1e3*(e.endTimestamp||0)}),fixed:"5 days ago"})})]})}renderTraceWarnings(){const{traces:e}=this.props,{roots:t,orphans:r}=(e??[]).reduce(((e,t)=>((0,N.uM)(t)?e.roots++:e.orphans++,e)),{roots:0,orphans:0});let n=null;return 0===t&&r>0?n=(0,U.tZ)(x.bZ,{type:"info",showIcon:!0,children:(0,U.tZ)(b.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,u.t)("A root transaction is missing. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):1===t&&r>0?n=(0,U.tZ)(x.bZ,{type:"info",showIcon:!0,children:(0,U.tZ)(b.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,u.t)("This trace has broken subtraces. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):t>1&&(n=(0,U.tZ)(x.bZ,{type:"info",showIcon:!0,children:(0,U.tZ)(b.Z,{href:"https://docs.sentry.io/product/sentry-basics/tracing/trace-view/#multiple-roots",children:(0,u.t)("Multiple root transactions have been found with this trace ID.")})})),n}renderContent(){const{dateSelected:e,isLoading:t,error:r,organization:s,location:a,traceEventView:i,traceSlug:o,traces:c,meta:u}=this.props;if(!e)return this.renderTraceRequiresDateRangeSelection();if(t)return this.renderTraceLoading();if(null!==r||null===c||c.length<=0)return(0,U.tZ)(A.Z,{meta:u,traceEventView:i,traceSlug:o,location:a,organization:s});const l=(0,N.Rg)(c);return(0,U.BX)(n.Fragment,{children:[this.renderTraceWarnings(),this.renderTraceHeader(l),this.renderSearchBar(),(0,U.tZ)(B,{children:(0,U.tZ)(C.oF,{id:"PerformanceDetails-TraceView",hasData:!!c.length,children:(0,U.tZ)(z.Z,{filteredTransactionIds:this.state.filteredTransactionIds,traceInfo:l,location:a,organization:s,traceEventView:i,traceSlug:o,traces:c,meta:u})})})]})}render(){const{organization:e,location:t,traceEventView:r,traceSlug:a}=this.props;return(0,U.BX)(n.Fragment,{children:[(0,U.BX)(s.h4,{children:[(0,U.BX)(s.oB,{children:[(0,U.tZ)(F.Z,{organization:e,location:t,traceSlug:a}),(0,U.tZ)(s.Dx,{"data-test-id":"trace-header",children:(0,u.t)("Trace ID: %s",a)})]}),(0,U.tZ)(s.kP,{children:(0,U.tZ)(T.ZP,{gap:1,children:(0,U.tZ)(_.Z,{size:"sm",to:r.getResultsViewUrlTarget(e.slug),onClick:()=>{(0,j.Z)("performance_views.trace_view.open_in_discover",{organization:e})},children:(0,u.t)("Open in Discover")})})})]}),(0,U.tZ)(s.uT,{children:(0,U.tZ)(s.or,{fullWidth:!0,children:this.renderContent()})})]})}}X.displayName="TraceDetailsContent";const B=(0,v.Z)("div",{target:"epic5s0"})("margin-top:",(0,I.D)(2),";"),R=X;class Q extends n.Component{getDocumentTitle(){return[(0,u.t)("Trace Details"),(0,u.t)("Performance")].join(" - ")}getTraceSlug(){const{traceSlug:e}=this.props.params;return"string"==typeof e?e.trim():""}getDateSelection(){const{location:e}=this.props,t=(0,i.fK)(e.query,{allowAbsolutePageDatetime:!0});return{start:(0,f.ro)(t.start),end:(0,f.ro)(t.end),statsPeriod:(0,f.ro)(t.statsPeriod)}}getTraceEventView(){const e=this.getTraceSlug(),{start:t,end:r,statsPeriod:n}=this.getDateSelection();return l.ZP.fromSavedQuery({id:void 0,name:`Events with Trace ID ${e}`,fields:["title","event.type","project","timestamp"],orderby:"-timestamp",query:`trace:${e}`,projects:[c.mP],version:2,start:t,end:r,range:n})}renderContent(){const{location:e,organization:t,params:r}=this.props,n=this.getTraceSlug(),{start:s,end:a,statsPeriod:i}=this.getDateSelection(),o=Boolean(i||s&&a),c=s=>{let{isLoading:a,error:i,traces:c,meta:u}=s;return(0,U.tZ)(R,{location:e,organization:t,params:r,traceSlug:n,traceEventView:this.getTraceEventView(),dateSelected:o,isLoading:a,error:i,traces:c,meta:u})};return o?(0,U.tZ)(d.H,{location:e,orgSlug:t.slug,traceId:n,start:s,end:a,statsPeriod:i,children:r=>(0,U.tZ)(m.Z,{location:e,orgSlug:t.slug,traceId:n,start:s,end:a,statsPeriod:i,children:e=>c({isLoading:r.isLoading||e.isLoading,error:r.error||e.error,traces:r.traces,meta:e.meta})})}):c({isLoading:!1,error:new p.o("date selection not specified"),traces:null,meta:null})}render(){const{organization:e}=this.props;return(0,U.tZ)(o.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,U.tZ)(s.T3,{children:(0,U.tZ)(a.Z,{organization:e,children:this.renderContent()})})})}}Q.displayName="TraceSummary";const $=(0,g.Z)((0,h.Z)(Q))},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,r)=>{var n;r.d(t,{Z:()=>s}),function(e){e.TransactionSummary="summary",e.WebVitals="vitals",e.Tags="tags",e.Events="events",e.Spans="spans",e.Anomalies="anomalies",e.Replays="replays",e.Profiling="profiling"}(n||(n={}));const s=n},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,r)=>{r.d(t,{Kc:()=>m,Lc:()=>f,Zq:()=>d,_S:()=>c,q3:()=>o,qg:()=>p,tb:()=>l,xr:()=>u});var n=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),a=r("./app/views/performance/transactionSummary/filter.tsx"),i=r("./app/views/performance/transactionSummary/utils.tsx");let o;function c(e,t){const{p99:r,p95:s,p75:i,p50:c}=t||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:c?[["transaction.duration",`<=${c.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p50")},[o.p75]:{name:o.p75,query:i?[["transaction.duration",`<=${i.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p75")},[o.p95]:{name:o.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p95")},[o.p99]:{name:o.p99,query:r?[["transaction.duration",`<=${r.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p99")},[o.p100]:{name:o.p100,label:(0,n.t)("p100")}}}function u(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function l(e){return t=(0,s.ro)(e.query.showTransactions,o.p100),Object.values(o).includes(t)?t:o.p100;var t}function p(e,t){const r=c(t),n=r[e].sort?.kind,s=r[e].sort?.field,a={showTransactions:e};return n&&s&&(a.sort=`${"desc"===n?"-":""}${s}`),a}function d(e){switch(e){case i.K0.OUTLIER:return o.p100;case i.K0.SLOW:return o.p95;default:return}}function m(e){return{p100:e?.["p100()"],p99:e?.["p99()"],p95:e?.["p95()"],p75:e?.["p75()"],p50:e?.["p50()"]}}function f(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,r)=>{let n,s;r.d(t,{g:()=>s,p:()=>n}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(n||(n={})),function(e){e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,r)=>{r.d(t,{CS:()=>h,E5:()=>g,KK:()=>S,TK:()=>x,W6:()=>T,bc:()=>f,hN:()=>m,mV:()=>Z,uQ:()=>w,xz:()=>_,zW:()=>b});var n=r("../node_modules/lodash/pick.js"),s=r.n(n),a=r("./app/constants/index.tsx"),i=r("./app/locale.tsx"),o=r("./app/utils.tsx"),c=r("./app/utils/discover/eventView.tsx"),u=r("./app/utils/discover/fields.tsx"),l=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t});return{pathname:a,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const f=30,h=s()(a.wh,["1h","24h","7d","14d","30d"]),g=[{prefix:(0,i.t)("Sort By"),label:(0,i.t)("Total Self Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p50 Self Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p75 Self Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p95 Self Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p99 Self Time"),field:d.p.P99_EXCLUSIVE_TIME}],y=d.g.SUM_EXCLUSIVE_TIME;function v(e){return g.find((t=>t.field===e))||g.find((e=>e.field===y))}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";return v((0,l.ro)(e?.query?.[t])??y)}function S(e){return v(e.sorts.length?e.sorts[0].field:y)}function T(e){if(!(0,o.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function _(e){let{location:t,transactionName:r}=e;const n=(0,l.ro)(t.query.query,""),s=new p.MY(n);s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[r]),Object.keys(s.filters).forEach((e=>{(0,u.h1)(e)&&s.removeFilter(e)}));const a=c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:[...Object.values(d.g),...Object.values(d.p)],query:s.formatString(),projects:[]},t),i=x(t);return a.withSorts([{field:i.field,kind:"desc"}])}function b(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["sum","transaction.duration",void 0,void 0]}]),r=new p.MY(e.query);return Object.keys(r.filters).forEach((e=>{(0,u.h1)(e)&&r.removeFilter(e)})),t.query=r.formatString(),t}const w={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function Z(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,r)=>{r.d(t,{Zn:()=>a,bZ:()=>i,oT:()=>u,oc:()=>c,vG:()=>o});var n=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),s=r("./app/utils/queryString.tsx");function a(e){return(0,s.ro)(e.query.tagKey)}function i(e){(0,n.Z)("performance_views.tags.interaction",{organization:e})}function o(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t});return{pathname:a,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function c(e){let t=(0,s.ro)(e.query?.tagSort)??"-frequency";return["sumdelta"].find((e=>t?.includes(e)))&&(t="-frequency"),t}function u(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const r=t.split("_");return{histogramField:t,bucketSize:parseInt(r[r.length-3],10),offset:parseInt(r[r.length-2],10),multiplier:parseInt(r[r.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,r)=>{r.d(t,{A1:()=>u,L0:()=>o,Pl:()=>s,eH:()=>i,jb:()=>c,oZ:()=>a});var n=r("./app/utils/performance/histogram/utils.tsx");function s(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t});return{pathname:a,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function a(e,t){const r=(0,n.te)(e);return!e.length||t>=e[e.length-1].bin+r?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/r)}function i(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const r=e[t];for(let n=t+1;n<e.length;n++){const s=e[n];if(r.bin!==s.bin&&r.count!==s.count)return{point1:{x:t,y:Math.min(r.count,s.count)},point2:{x:n,y:Math.max(r.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(e,t){const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(r?.[0])||isNaN(r?.[1]))return null;const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(n?.[0])||isNaN(n?.[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function c(e,t,r){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;const n=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*s}}function u(e,t){return!(e&&!t.some((t=>!e[t])))||Object.values(e).filter((e=>0===e.total)).length>0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_traceDetails_index_tsx.58fd12d09977ec94e9af320b6d498079.js.map