"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamNotifications_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var i=n("./app/components/asyncComponent.tsx"),s=n("./app/components/sentryDocumentTitle.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends i.Z{getTitle(){return""}render(){return(0,a.tZ)(s.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/organizationTeams/teamNotifications.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/actionCreators/indicator.tsx"),o=n("./app/components/button.tsx"),r=n("./app/components/confirm.tsx"),l=n("./app/components/emptyMessage.tsx"),d=n("./app/components/forms/fields/textField.tsx"),c=n("./app/components/links/externalLink.tsx"),m=n("./app/components/panels/index.tsx"),p=n("./app/components/tooltip.tsx"),h=n("./app/icons/index.tsx"),u=n("./app/locale.tsx"),g=n("./app/styles/space.tsx"),x=n("./app/utils.tsx"),f=n("./app/utils/withOrganization.tsx"),Z=n("./app/views/asyncView.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k="https://docs.sentry.io/product/integrations/notification-incidents/slack/#team-notifications",w=["slack"];class b extends Z.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleDelete",(async e=>{try{const{organization:t,team:n}=this.props,i=`/teams/${t.slug}/${n.slug}/external-teams/${e.id}/`;await this.api.requestPromise(i,{method:"DELETE"}),(0,a.S9)((0,u.t)("Deletion successful")),this.fetchData()}catch{(0,a.Iw)((0,u.t)("An error occurred"))}}))}getTitle(){return"Team Notification Settings"}getEndpoints(){const{organization:e,team:t}=this.props;return[["teamDetails",`/teams/${e.slug}/${t.slug}/`,{query:{expand:["externalTeams"]}}],["integrations",`/organizations/${e.slug}/integrations/`,{query:{includeConfig:0}}]]}renderBody(){return(0,y.BX)(m.s_,{children:[(0,y.tZ)(m.V9,{children:(0,u.t)("Notifications")}),(0,y.tZ)(m.N,{children:this.renderPanelBody()})]})}renderPanelBody(){const{organization:e}=this.props,{teamDetails:t,integrations:n}=this.state,i=n.filter((e=>w.includes(e.provider.key)));if(!i.length)return(0,y.tZ)(l.Z,{children:(0,u.t)("No Notification Integrations have been installed yet.")});const s=(t.externalTeams||[]).filter((e=>w.includes(e.provider)));if(!s.length)return(0,y.BX)(l.Z,{children:[(0,y.tZ)("div",{children:(0,u.t)("No teams have been linked yet.")}),(0,y.tZ)(T,{children:(0,u._N)("Head over to Slack and type [code] to get started. [link].",{code:(0,y.tZ)("code",{children:"/sentry link team"}),link:(0,y.tZ)(c.Z,{href:k,children:(0,u.t)("Learn more")})})})]});const a=Object.fromEntries(i.map((e=>[e.id,e]))),d=e.access.includes("team:write");return s.map((e=>(0,y.BX)(N,{children:[(0,y.tZ)(D,{disabled:!0,label:(0,y.BX)("div",{children:[(0,y.BX)(z,{children:[(0,x.LF)(e.provider),":",a[e.integrationId].name]}),(0,y.tZ)(T,{children:(0,u._N)("Unlink this channel in Slack with [code]. [link].",{code:(0,y.tZ)("code",{children:"/sentry unlink team"}),link:(0,y.tZ)(c.Z,{href:k,children:(0,u.t)("Learn more")})})})]}),labelText:(0,u.t)("Unlink this channel in slack with `/slack unlink team`"),name:"externalName",value:e.externalName}),(0,y.tZ)(_,{children:(0,y.tZ)(p.u,{title:(0,u.t)("You must be an organization owner, manager or admin to remove a Slack team link"),disabled:d,children:(0,y.tZ)(r.Z,{disabled:!d,onConfirm:()=>this.handleDelete(e),message:(0,u.t)("Are you sure you want to remove this Slack team link?"),children:(0,y.tZ)(o.zx,{size:"sm",icon:(0,y.tZ)(h.Fz,{size:"md"}),"aria-label":(0,u.t)("delete"),disabled:!d})})})})]},e.id)))}}const v=(0,f.Z)(b),z=(0,s.Z)("div",{target:"e84f6wt4"})("color:",(e=>e.theme.textColor),";line-height:",(0,g.D)(2),";"),T=(0,s.Z)("div",{target:"e84f6wt3"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeRelativeSmall),";line-height:1.4;margin-top:",(0,g.D)(1),";"),N=(0,s.Z)("div",{target:"e84f6wt2"})({name:"1dmiggy",styles:"display:flex;align-items:center;justify-content:flex-start"}),D=(0,s.Z)(d.Z,{target:"e84f6wt1"})({name:"82a6rk",styles:"flex:1"}),_=(0,s.Z)("div",{target:"e84f6wt0"})("margin-right:",(0,g.D)(4),";padding-right:",(0,g.D)(.5),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamNotifications_tsx.612e278678c4bfde764ab3fd9e6fc471.js.map