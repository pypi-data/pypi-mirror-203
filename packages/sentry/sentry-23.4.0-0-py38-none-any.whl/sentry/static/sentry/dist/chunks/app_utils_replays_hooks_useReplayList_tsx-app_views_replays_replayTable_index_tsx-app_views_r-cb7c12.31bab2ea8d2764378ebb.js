"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_replays_hooks_useReplayList_tsx-app_views_replays_replayTable_index_tsx-app_views_r-cb7c12"],{"./app/utils/replays/fetchReplayList.tsx":(e,t,r)=>{r.d(t,{Z:()=>n,y:()=>a}),r("../node_modules/core-js/modules/es.array.push.js");var s=r("../node_modules/@sentry/core/esm/exports.js"),i=r("./app/utils/replays/replayDataUtils.tsx");const a="-started_at",n=async function(e){let{api:t,organization:r,location:a,eventView:n}=e;try{const e=`/organizations/${r.slug}/replays/`,s=n.getEventsAPIPayload(a);if(s.field=s.field.map((e=>e.split(".")[0])),r.features.includes("session-replay-slim-table")){const e=["browser","os","urls"];s.field=s.field.filter((t=>!e.includes(t))),s.field.push("count_urls")}else s.field=s.field.filter((e=>"count_urls"!==e));s.field=Array.from(new Set(s.field));const[{data:o},l,d]=await t.requestPromise(e,{includeAllArgs:!0,query:{...s,cursor:a.query.cursor}});return{fetchError:void 0,pageLinks:d?.getResponseHeader("Link")??"",replays:o.map(i.qC)}}catch(e){return e.responseJSON?.detail?{fetchError:e.responseJSON.detail,pageLinks:null,replays:[]}:(s.Tb(e),{fetchError:e,pageLinks:null,replays:[]})}}},"./app/utils/replays/hooks/useReplayList.tsx":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("../node_modules/react/index.js"),i=r("./app/utils/replays/fetchReplayList.tsx"),a=r("./app/utils/useApi.tsx");const n=function(e){let{eventView:t,location:r,organization:n}=e;const o=(0,a.Z)(),[l,d]=(0,s.useState)({fetchError:void 0,isFetching:!0,pageLinks:null,replays:[]}),c=(0,s.useCallback)((async()=>{o.clear(),d((e=>({...e,isFetching:!0})));const e=await(0,i.Z)({api:o,organization:n,location:r,eventView:t});d({...e,isFetching:!1})}),[o,n,r,t]);return(0,s.useEffect)((()=>{c()}),[c]),l}},"./app/views/replays/replayTable/index.tsx":(e,t,r)=>{r.d(t,{Z:()=>ae});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("../node_modules/react/index.js"),a=r("./app/components/alert.tsx"),n=r("./app/components/panels/index.tsx"),o=r("./app/locale.tsx"),l=r("./app/utils/discover/eventView.tsx"),d=r("./app/utils/getRouteStringFromRoutes.tsx"),c=r("./app/utils/useLocation.tsx"),p=r("./app/utils/useOrganization.tsx"),u=r("./app/utils/useRoutes.tsx"),m=r("./app/components/links/link.tsx"),y=r("./app/components/questionTooltip.tsx"),h=r("./app/icons/index.tsx"),Z=r("./app/styles/space.tsx"),g=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),v=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){const t=(0,c.T)(),r=(0,p.Z)();if(!("sort"in e)||!e.sort){const{label:t,tooltip:r}=e;return(0,v.BX)(x,{children:[t,r?(0,v.tZ)(w,{size:"xs",position:"top",title:r}):null]})}const{fieldName:s,label:i,sort:a,tooltip:n}=e,o="asc"===a?.kind?"up":"down",l=(0,v.tZ)(h.CC,{color:"gray300",size:"xs",direction:o});return(0,v.BX)(x,{children:[(0,v.BX)(b,{role:"columnheader","aria-sort":a?.field.endsWith(s)?"asc"===a?.kind?"ascending":"descending":"none",onClick:()=>{const e=a?.field.endsWith(s)&&"desc"===a?.kind?s:"-"+s;(0,g.Z)("replay.list-sorted",{organization:r,column:e})},to:{pathname:t.pathname,query:{...t.query,sort:a?.field.endsWith(s)&&"desc"===a?.kind?s:"-"+s}},children:[i," ",a?.field===s&&l]}),n?(0,v.tZ)(w,{size:"xs",position:"top",title:n}):null]})}f.displayName="SortableHeader";const x=(0,s.Z)("div",{target:"e1shm7bh2"})("display:grid;grid-template-columns:repeat(2, max-content);align-items:center;padding:",(0,Z.D)(1.5),";"),b=(0,s.Z)(m.Z,{target:"e1shm7bh1"})({name:"1qowyn7",styles:"color:inherit;:hover{color:inherit;}svg{vertical-align:top;}"}),w=(0,s.Z)(y.Z,{target:"e1shm7bh0"})("margin-left:",(0,Z.D)(.5),";"),_=f;var z=r("./app/views/replays/replayTable/types.tsx");const k=function(e){let{column:t,sort:r}=e;switch(t){case z.M.activity:return(0,v.tZ)(_,{sort:r,fieldName:"activity",label:(0,o.t)("Activity"),tooltip:(0,o.t)("Activity represents how much user activity happened in a replay. It is determined by the number of errors encountered, duration, and UI events.")});case z.M.browser:return(0,v.tZ)(_,{sort:r,fieldName:"browser.name",label:(0,o.t)("Browser")});case z.M.countErrors:return(0,v.tZ)(_,{sort:r,fieldName:"count_errors",label:(0,o.t)("Errors")});case z.M.duration:return(0,v.tZ)(_,{sort:r,fieldName:"duration",label:(0,o.t)("Duration")});case z.M.os:return(0,v.tZ)(_,{sort:r,fieldName:"os.name",label:(0,o.t)("OS")});case z.M.replay:return(0,v.tZ)(_,{sort:r,fieldName:"started_at",label:(0,o.t)("Replay")});case z.M.slowestTransaction:return(0,v.tZ)(_,{label:(0,o.t)("Slowest Transaction"),tooltip:(0,o.t)("Slowest single instance of this transaction captured by this session.")});default:return null}};var B=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),j=r("./app/components/avatar/index.tsx"),E=r("./app/components/idBadge/userBadge.tsx"),C=r("./app/components/replays/contextIcon.tsx"),A=r("./app/components/replays/header/errorCount.tsx"),M=r("./app/components/replays/utils.tsx"),T=r("./app/components/replays/walker/urlWalker.tsx"),X=r("./app/components/scoreBar.tsx"),N=r("./app/components/timeSince.tsx"),S=r("./app/constants/chartPalette.tsx"),L=r("./app/utils/discover/fieldRenderers.tsx"),R=r("./app/utils/events.tsx"),D=r("./app/utils/useMedia.tsx"),q=r("./app/utils/useProjects.tsx");function P(e){return e.is_archived?{username:"",email:"",id:"",ip_address:"",name:""}:{username:e.user?.display_name||"",email:e.user?.email||"",id:e.user?.id||"",ip_address:e.user?.ip||"",name:e.user?.username||""}}function W(e){let{eventView:t,organization:r,referrer:s,replay:i}=e;const{projects:a}=(0,q.Z)(),n=a.find((e=>e.id===i.project_id)),l={pathname:`/organizations/${r.slug}/replays/${n?.slug}:${i.id}/`,query:{referrer:s,...t.generateQueryStringObject()}};if(i.is_archived)return(0,v.tZ)(Y,{isArchived:i.is_archived,children:(0,v.BX)($,{gap:1,children:[(0,v.tZ)(F,{color:"gray500",size:"md"}),(0,v.BX)("div",{children:[(0,v.tZ)($,{gap:.5,children:(0,o.t)("Deleted Replay")}),(0,v.BX)($,{gap:.5,children:[n?(0,v.tZ)(j.Z,{size:12,project:n}):null,(0,R.XQ)(i.id)]})]})]})});const d=i.urls?(0,v.BX)(V,{children:[(0,v.tZ)(T.j,{urls:i.urls}),(0,v.BX)($,{gap:1,children:[(0,v.BX)($,{gap:.5,children:[n?(0,v.tZ)(j.Z,{size:12,project:n}):null,(0,v.tZ)(m.Z,{to:l,children:(0,R.XQ)(i.id)})]}),(0,v.BX)($,{gap:.5,children:[(0,v.tZ)(h.jt,{color:"gray300",size:"xs"}),(0,v.tZ)(N.Z,{date:i.started_at})]})]})]}):(0,v.tZ)(V,{children:(0,v.BX)($,{gap:1,children:[(0,v.BX)($,{gap:.5,minWidth:80,children:[n?(0,v.tZ)(j.Z,{size:12,project:n}):null,(0,v.tZ)(m.Z,{to:l,children:(0,R.XQ)(i.id)})]}),(0,v.BX)($,{gap:.5,minWidth:80,children:[(0,v.tZ)(h.tM,{color:"green400",size:"sm"}),(0,o.tn)("%s Page","%s Pages",i.count_urls)]}),(0,v.BX)($,{gap:.5,children:[(0,v.tZ)(h.jt,{color:"gray300",size:"xs"}),(0,v.tZ)(N.Z,{date:i.started_at})]})]})});return(0,v.tZ)(Y,{children:(0,v.tZ)(O,{avatarSize:24,displayName:i.is_archived?i.user?.display_name||(0,o.t)("Unknown User"):(0,v.tZ)(U,{to:l,children:i.user?.display_name||(0,o.t)("Unknown User")}),user:P(i),displayEmail:d})})}W.displayName="ReplayCell";const F=(0,s.Z)(h.Fz,{target:"e28z4od7"})("margin:",(0,Z.D)(.25),";"),O=(0,s.Z)(E.Z,{target:"e28z4od6"})({name:"1d3w5wq",styles:"width:100%"}),V=(0,s.Z)("div",{target:"e28z4od5"})("display:flex;flex-direction:column;gap:",(0,Z.D)(.5),";width:100%;"),$=(0,s.Z)("div",{target:"e28z4od4"})("display:flex;gap:",(e=>(0,Z.D)(e.gap)),";align-items:center;",(e=>e.minWidth?`min-width: ${e.minWidth}px;`:""),";"),U=(0,s.Z)(m.Z,{target:"e28z4od3"})("font-size:",(e=>e.theme.fontSizeLarge),";");function I(e){let{organization:t,replay:r}=e;const s=(0,c.T)();if(r.is_archived)return(0,v.tZ)(Y,{isArchived:!0});const i="txEvent"in r,a=i?r.txEvent?.["transaction.duration"]:void 0;return i?(0,v.BX)(te,{children:[a?(0,v.BX)("div",{children:[a,"ms"]}):null,(0,L.as)(r.txEvent,{organization:t,location:s},{enableOnClick:!1})]}):null}function Q(e){let{replay:t}=e;const{name:r,version:s}=t.os??{},i=(0,B.u)(),a=(0,D.Z)(`(min-width: ${i.breakpoints.large})`);return t.is_archived?(0,v.tZ)(Y,{isArchived:!0}):(0,v.tZ)(Y,{children:(0,v.tZ)(C.Z,{name:r??"",version:s&&a?s:void 0})})}function H(e){let{replay:t}=e;const{name:r,version:s}=t.browser??{},i=(0,B.u)(),a=(0,D.Z)(`(min-width: ${i.breakpoints.large})`);return t.is_archived?(0,v.tZ)(Y,{isArchived:!0}):(0,v.tZ)(Y,{children:(0,v.tZ)(C.Z,{name:r??"",version:s&&a?s:void 0})})}function J(e){let{replay:t}=e;return t.is_archived?(0,v.tZ)(Y,{isArchived:!0}):(0,v.tZ)(Y,{children:(0,v.tZ)(ee,{children:(0,M.mr)(t.duration.asMilliseconds())})})}function K(e){let{replay:t}=e;return t.is_archived?(0,v.tZ)(Y,{isArchived:!0}):(0,v.tZ)(Y,{"data-test-id":"replay-table-count-errors",children:(0,v.tZ)(A.Z,{countErrors:t.count_errors})})}function G(e){let{replay:t}=e;if(t.is_archived)return(0,v.tZ)(Y,{isArchived:!0});const r=new Array(10).fill([S.Z[0][0]]);return(0,v.tZ)(Y,{children:(0,v.tZ)(X.Z,{size:20,score:t?.activity??1,palette:r,radius:0})})}Q.displayName="OSCell",H.displayName="BrowserCell",J.displayName="DurationCell",K.displayName="ErrorCountCell",G.displayName="ActivityCell";const Y=(0,s.Z)("div",{target:"e28z4od2"})("display:flex;align-items:center;gap:",(0,Z.D)(1),";padding:",(0,Z.D)(1.5),";",(e=>e.isArchived?"opacity: 0.5;":""),";"),ee=(0,s.Z)("span",{target:"e28z4od1"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),te=(0,s.Z)("div",{target:"e28z4od0"})("width:100%;display:flex;flex-direction:column;gap:",(0,Z.D)(.5),";color:",(e=>e.theme.gray500),";font-size:",(e=>e.theme.fontSizeMedium),";text-align:right;");function re(e){let{fetchError:t,isFetching:r,replays:s,sort:a,visibleColumns:n}=e;const m=(0,u.V)(),y=(0,c.T)(),h=(0,p.Z)(),Z=!h.features.includes("session-replay-slim-table");n=n.filter((e=>Z||!["browser","os"].includes(e)));const g=n.filter(Boolean).map((e=>(0,v.tZ)(k,{column:e,sort:a},e)));if(t&&!r)return(0,v.tZ)(se,{headers:g,isLoading:!1,visibleColumns:n,"data-test-id":"replay-table",children:(0,v.tZ)(ie,{type:"error",showIcon:!0,children:"string"==typeof t?t:(0,o.t)("Sorry, the list of replays could not be loaded. This could be due to invalid search parameters or an internal systems error.")})});const f=(0,d.Z)(m),x=l.ZP.fromLocation(y);return(0,v.tZ)(se,{headers:g,isEmpty:0===s?.length,isLoading:r,visibleColumns:n,disablePadding:!0,"data-test-id":"replay-table",children:s?.map((e=>(0,v.tZ)(i.Fragment,{children:n.map((t=>{switch(t){case z.M.activity:return(0,v.tZ)(G,{replay:e},"activity");case z.M.browser:return(0,v.tZ)(H,{replay:e},"browser");case z.M.countErrors:return(0,v.tZ)(K,{replay:e},"countErrors");case z.M.duration:return(0,v.tZ)(J,{replay:e},"duration");case z.M.os:return(0,v.tZ)(Q,{replay:e},"os");case z.M.replay:return(0,v.tZ)(W,{replay:e,eventView:x,organization:h,referrer:f},"session");case z.M.slowestTransaction:return(0,v.tZ)(I,{replay:e,organization:h},"slowestTransaction");default:return null}}))},e.id)))})}re.displayName="ReplayTable";const se=(0,s.Z)(n.KB,{target:"e14y06dl1"})("grid-template-columns:",(e=>e.visibleColumns.filter(Boolean).map((e=>"replay"===e?"minmax(100px, 1fr)":"max-content")).join(" ")),";"),ie=(0,s.Z)(a.bZ,{target:"e14y06dl0"})({name:"1uq1iuo",styles:"border-radius:0;border-width:1px 0 0 0;grid-column:1/-1;margin-bottom:0"}),ae=re},"./app/views/replays/replayTable/types.tsx":(e,t,r)=>{let s;r.d(t,{M:()=>s}),function(e){e.activity="activity",e.browser="browser",e.countErrors="countErrors",e.duration="duration",e.os="os",e.replay="replay",e.slowestTransaction="slowestTransaction"}(s||(s={}))},"./app/views/replays/types.tsx":(e,t,r)=>{r.d(t,{p:()=>s});const s=["activity","browser.name","browser.version","count_errors","count_urls","duration","finished_at","id","is_archived","os.name","os.version","project_id","started_at","urls","user"]}}]);
//# sourceMappingURL=../sourcemaps/app_utils_replays_hooks_useReplayList_tsx-app_views_replays_replayTable_index_tsx-app_views_r-cb7c12.9d4e4dcf770a0fd7cd89f7f9a7823c11.js.map