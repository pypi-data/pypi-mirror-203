"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectKeys_details_keySettings_tsx"],{"./app/views/settings/project/projectKeys/details/keySettings.tsx":(e,t,n)=>{n.d(t,{Fd:()=>B,Jr:()=>V});var i=n("../node_modules/react/index.js"),r=n("./app/actionCreators/indicator.tsx"),o=n("./app/components/acl/access.tsx"),s=n("./app/components/button.tsx"),a=n("./app/components/confirm.tsx"),l=n("./app/components/dateTime.tsx"),d=n("./app/components/forms/fieldGroup/index.tsx"),c=n("./app/components/forms/fields/booleanField.tsx"),p=n("./app/components/forms/fields/selectField.tsx"),u=n("./app/components/forms/fields/textField.tsx"),h=n("./app/components/forms/form.tsx"),m=n("./app/components/links/externalLink.tsx"),f=n("./app/components/panels/index.tsx"),y=n("./app/components/textCopyInput.tsx"),Z=n("./app/locale.tsx"),b=n("./app/utils/getDynamicText.tsx"),S=n("./app/utils/handleXhrErrorResponse.tsx"),x=n("./app/utils/useApi.tsx"),w=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),_=n("../node_modules/lodash/sortBy.js"),v=n.n(_),g=n("./app/components/acl/feature.tsx"),k=n("./app/components/acl/featureDisabled.tsx"),D=n("./app/components/forms/controls/rangeSlider/index.tsx"),E=n("./app/components/forms/formField/index.tsx"),j=n("./app/components/input.tsx"),C=n("./app/styles/space.tsx"),N=n("./app/utils.tsx"),R=n("./app/utils/formatters.tsx"),K=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const L=[0,60,300,900,3600,7200,14400,21600,43200,86400];function P(e){let{data:t,disabled:n,organization:i,params:r}=e;function o(e,t,n){e({...t,count:Number(n.target.value)},n)}function s(e){const{rateLimit:n}=t,{window:i}=n??{};if((0,N.ri)(i)){if(e!==i)return L;if(!L.includes(i))return v()([...L,i])}return L}const{keyId:a,projectId:l}=r,d=`/projects/${i.slug}/${l}/keys/${a}/`,c=e=>{let{features:t}=e;return(0,K.tZ)(k.Z,{alert:f.aU,features:t,featureName:(0,Z.t)("Key Rate Limits")})};return(0,K.tZ)(h.Z,{saveOnBlur:!0,apiEndpoint:d,apiMethod:"PUT",initialData:t,children:(0,K.tZ)(g.Z,{features:["projects:rate-limits"],hookName:"feature-disabled:rate-limits",renderDisabled:e=>{let{children:t,...n}=e;return"function"==typeof t&&t({...n,renderDisabled:c})},children:e=>{let{hasFeature:t,features:r,project:a,renderDisabled:l}=e;return(0,K.BX)(f.s_,{children:[(0,K.tZ)(f.V9,{children:(0,Z.t)("Rate Limits")}),(0,K.BX)(f.N,{children:[(0,K.tZ)(f.aU,{type:"info",showIcon:!0,children:(0,Z.t)("Rate limits provide a flexible way to manage your error\n                    volume. If you have a noisy project or environment you\n                    can configure a rate limit for this key to reduce the\n                    number of errors processed. To manage your transaction\n                    volume, we recommend adjusting your sample rate in your\n                    SDK configuration.")}),!t&&"function"==typeof l&&l({organization:i,project:a,features:r,hasFeature:t,children:null}),(0,K.tZ)(E.Z,{name:"rateLimit",label:(0,Z.t)("Rate Limit"),disabled:n||!t,validate:e=>{let{form:t}=e;return t&&t.rateLimit&&void 0!==t.rateLimit.count&&void 0!==t.rateLimit.window?[]:[["rateLimit",(0,Z.t)("Fill in both fields first")]]},formatMessageValue:e=>{let{count:t,window:n}=e;return(0,Z._N)("[errors] in [timeWindow]",{errors:(0,Z.tn)("%s error ","%s errors ",t),timeWindow:0===n?(0,Z.t)("no time window"):(0,R._U)(n)})},help:(0,Z.t)("Apply a rate limit to this credential to cap the amount of errors accepted during a time window."),inline:!1,children:e=>{let{onChange:i,onBlur:r,value:a}=e;const l="object"==typeof a?a.window:void 0;return(0,K.BX)(U,{children:[(0,K.tZ)(j.Z,{type:"number",name:"rateLimit.count",min:0,value:"object"==typeof a?a.count:void 0,placeholder:(0,Z.t)("Count"),disabled:n||!t,onChange:e=>o(i,a,e),onBlur:e=>o(r,a,e)}),(0,K.tZ)(T,{children:(0,Z.t)("event(s) in")}),(0,K.tZ)(D.Z,{name:"rateLimit.window",allowedValues:s(l),value:l,placeholder:(0,Z.t)("Window"),formatLabel:e=>{if("number"==typeof e)return 0===e?(0,Z.t)("None"):(0,R._U)(e)},disabled:n||!t,onChange:(e,t)=>function(e,t,n,i,r){const o={...n,window:i};e(o,r),t(o,r)}(i,r,a,Number(e),t)})]})}})]})]})}})})}P.displayName="KeyRateLimitsForm";const I=P,U=(0,w.Z)("div",{target:"e16o2t481"})("display:grid;grid-template-columns:2fr 1fr 2fr;align-items:center;gap:",(0,C.D)(1),";"),T=(0,w.Z)("small",{target:"e16o2t480"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";text-align:center;white-space:nowrap;");var A=n("./app/views/settings/project/projectKeys/projectKeyCredentials.tsx");let B;!function(e){e.HAS_DEBUG="hasDebug",e.HAS_PERFORMANCE="hasPerformance",e.HAS_REPLAY="hasReplay"}(B||(B={}));const O={[B.HAS_PERFORMANCE]:{label:(0,Z.t)("Enable Performance Monitoring"),requiresV7:!0},[B.HAS_REPLAY]:{label:(0,Z.t)("Enable Session Replay"),requiresV7:!0},[B.HAS_DEBUG]:{label:(0,Z.t)("Enable Debug Bundles"),requiresV7:!1}};function V(e){let{onRemove:t,organization:n,params:w,data:_}=e;const v=(0,x.Z)(),[g,k]=(0,i.useState)(_.browserSdkVersion),[D,E]=(0,i.useState)(_.dynamicSdkLoaderOptions);(0,i.useEffect)((()=>{k(_.browserSdkVersion)}),[_.browserSdkVersion]),(0,i.useEffect)((()=>{E(_.dynamicSdkLoaderOptions)}),[_.dynamicSdkLoaderOptions]);const{keyId:j,projectId:C}=w,N=`/projects/${n.slug}/${C}/keys/${j}/`,R=(0,b.Z)({value:_.dsn.cdn,fixed:"__JS_SDK_LOADER_URL__"}),L=(0,i.useCallback)((async()=>{(0,r.E3)((0,Z.t)("Revoking keyâ€¦"));try{await v.requestPromise(`/projects/${n.slug}/${C}/keys/${j}/`,{method:"DELETE"}),t(),(0,r.S9)((0,Z.t)("Revoked key"))}catch(e){(0,r.Iw)((0,Z.t)("Unable to revoke key"))}}),[n,v,t,j,C]),P=(0,i.useCallback)((async(e,t)=>{const n=Object.keys(D).reduce(((n,i)=>i===e?{...n,[i]:t}:{...n,[i]:D[i]}),{});(0,r.E3)();try{const e=await v.requestPromise(N,{method:"PUT",data:{dynamicSdkLoaderOptions:n}});E(e.dynamicSdkLoaderOptions),(0,r.S9)((0,Z.t)("Successfully updated dynamic SDK loader configuration"))}catch(e){const t=(0,Z.t)("Unable to updated dynamic SDK loader configuration");(0,S.Z)(t)(e),(0,r.Iw)(t)}}),[v,N,D,E]),U=(0,i.useCallback)((async e=>{(0,r.E3)();const t={browserSdkVersion:e},n=!z(e);if(n){const e={...D,hasPerformance:!1,hasReplay:!1};t.dynamicSdkLoaderOptions=e}try{const e=await v.requestPromise(N,{method:"PUT",data:t});k(e.browserSdkVersion),n&&E(e.dynamicSdkLoaderOptions),(0,r.S9)((0,Z.t)("Successfully updated SDK version"))}catch(e){const t=(0,Z.t)("Unable to updated SDK version");(0,S.Z)(t)(e),(0,r.Iw)(t)}}),[v,N,k,E,D]);return(0,K.tZ)(o.Z,{access:["project:write"],children:e=>{let{hasAccess:t}=e;return(0,K.BX)(i.Fragment,{children:[(0,K.tZ)(h.Z,{saveOnBlur:!0,allowUndo:!0,apiEndpoint:N,apiMethod:"PUT",initialData:_,children:(0,K.BX)(f.s_,{children:[(0,K.tZ)(f.V9,{children:(0,Z.t)("Details")}),(0,K.BX)(f.N,{children:[(0,K.tZ)(u.Z,{name:"name",label:(0,Z.t)("Name"),disabled:!t,required:!1,maxLength:64}),(0,K.tZ)(c.Z,{name:"isActive",label:(0,Z.t)("Enabled"),required:!1,disabled:!t,help:"Accept events from this key? This may be used to temporarily suspend a key."}),(0,K.tZ)(d.Z,{label:(0,Z.t)("Created"),children:(0,K.tZ)("div",{className:"controls",children:(0,K.tZ)(l.Z,{date:_.dateCreated})})})]})]})}),(0,K.tZ)(I,{organization:n,params:w,data:_,disabled:!t}),(0,K.BX)(f.s_,{children:[(0,K.tZ)(f.V9,{children:(0,Z.t)("JavaScript Loader")}),(0,K.BX)(f.N,{children:[(0,K.tZ)(d.Z,{help:(0,Z._N)("Copy this script into your website to setup your JavaScript SDK without any additional configuration. [link]",{link:(0,K.tZ)(m.Z,{href:"https://docs.sentry.io/platforms/javascript/install/lazy-load-sentry/",children:"What does the script provide?"})}),inline:!1,flexibleControlStateSize:!0,children:(0,K.tZ)(y.Z,{children:`<script src='${R}' crossorigin="anonymous"><\/script>`})}),(0,K.tZ)(p.Z,{name:"browserSdkVersion",options:_.browserSdk?_.browserSdk.choices.map((e=>{let[t,n]=e;return{value:t,label:n}})):[],value:g,onChange:e=>U(e),placeholder:(0,Z.t)("4.x"),allowClear:!1,disabled:!t,help:(0,Z.t)("Select the version of the SDK that should be loaded. Note that it can take a few minutes until this change is live.")})]}),(0,K.tZ)(f.jH,{children:Object.entries(O).map((e=>{let[n,i]=e;const r=Object.keys(D).find((e=>e===n));return r?(0,K.tZ)(c.Z,{label:i.label,name:n,value:!(i.requiresV7&&!z(g))&&D[r],onChange:()=>P(r,!D[r]),disabled:!t||i.requiresV7&&!z(g),help:i.requiresV7&&!z(g)?(0,Z.t)("Only available in SDK version 7.x and above"):n===B.HAS_REPLAY&&D[r]?(0,Z.t)("When using Replay, the loader will load the ES6 bundle instead of the ES5 bundle."):void 0,disabledReason:t?void 0:(0,Z.t)("You do not have permission to edit this setting")},n):null}))})]}),(0,K.BX)(f.s_,{children:[(0,K.tZ)(f.V9,{children:(0,Z.t)("Credentials")}),(0,K.BX)(f.N,{children:[(0,K.tZ)(f.aU,{type:"info",showIcon:!0,children:(0,Z.t)("Your credentials are coupled to a public and secret key. Different clients will require different credentials, so make sure you check the documentation before plugging things in.")}),(0,K.tZ)(A.Z,{projectId:`${_.projectId}`,data:_,showPublicKey:!0,showSecretKey:!0,showProjectId:!0})]})]}),(0,K.tZ)(o.Z,{access:["project:admin"],children:(0,K.BX)(f.s_,{children:[(0,K.tZ)(f.V9,{children:(0,Z.t)("Revoke Key")}),(0,K.tZ)(f.N,{children:(0,K.tZ)(d.Z,{label:(0,Z.t)("Revoke Key"),help:(0,Z.t)("Revoking this key will immediately remove and suspend the credentials. This action is irreversible."),children:(0,K.tZ)("div",{children:(0,K.tZ)(a.Z,{priority:"danger",message:(0,Z.t)("Are you sure you want to revoke this key? This will immediately remove and suspend the credentials."),onConfirm:L,confirmText:(0,Z.t)("Revoke Key"),children:(0,K.tZ)(s.zx,{priority:"danger",children:(0,Z.t)("Revoke Key")})})})})})]})})]})}})}function z(e){return"latest"===e||"7.x"===e}V.displayName="KeySettings"},"./app/views/settings/project/projectKeys/projectKeyCredentials.tsx":(e,t,n)=>{n.d(t,{Z:()=>f});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("../node_modules/react/index.js"),o=n("./app/components/forms/fieldGroup/index.tsx"),s=n("./app/components/links/externalLink.tsx"),a=n("./app/components/links/link.tsx"),l=n("./app/components/textCopyInput.tsx"),d=n("./app/locale.tsx"),c=n("./app/styles/space.tsx"),p=n("./app/utils/getDynamicText.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{data:t,projectId:n,showDsn:i=!0,showDsnPublic:c=!0,showMinidump:h=!0,showProjectId:f=!1,showPublicKey:y=!1,showSecretKey:Z=!1,showSecurityEndpoint:b=!0,showUnreal:S=!0}=e;const[x,w]=(0,r.useState)(!1);return(0,u.BX)(r.Fragment,{children:[c&&(0,u.BX)(o.Z,{label:(0,d.t)("DSN"),inline:!1,flexibleControlStateSize:!0,help:(0,d._N)("The DSN tells the SDK where to send the events to. [link]",{link:i?(0,u.tZ)(a.Z,{to:"",onClick:()=>w((e=>!e)),children:x?(0,d.t)("Hide deprecated DSN"):(0,d.t)("Show deprecated DSN")}):null}),children:[(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.public,fixed:"__DSN__"})}),x&&(0,u.tZ)(m,{label:null,help:(0,d.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.secret,fixed:"__DSN_DEPRECATED__"})})})]}),!c&&i&&(0,u.tZ)(o.Z,{label:(0,d.t)("DSN (Deprecated)"),help:(0,d.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.secret,fixed:"__DSN_DEPRECATED__"})})}),b&&(0,u.tZ)(o.Z,{label:(0,d.t)("Security Header Endpoint"),help:(0,d.t)("Use your security header endpoint for features like CSP and Expect-CT reports."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.security,fixed:"__SECURITY_HEADER_ENDPOINT__"})})}),h&&(0,u.tZ)(o.Z,{label:(0,d.t)("Minidump Endpoint"),help:(0,d._N)("Use this endpoint to upload [link], for example with Electron, Crashpad or Breakpad.",{link:(0,u.tZ)(s.Z,{href:"https://docs.sentry.io/platforms/native/guides/minidumps/",children:"minidump crash reports"})}),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.minidump,fixed:"__MINIDUMP_ENDPOINT__"})})}),S&&(0,u.tZ)(o.Z,{label:(0,d.t)("Unreal Engine 4 Endpoint"),help:(0,d.t)("Use this endpoint to configure your UE4 Crash Reporter."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.dsn.unreal||"",fixed:"__UNREAL_ENDPOINT__"})})}),y&&(0,u.tZ)(o.Z,{label:(0,d.t)("Public Key"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.public,fixed:"__PUBLICKEY__"})})}),Z&&(0,u.tZ)(o.Z,{label:(0,d.t)("Secret Key"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:t.secret,fixed:"__SECRETKEY__"})})}),f&&(0,u.tZ)(o.Z,{label:(0,d.t)("Project ID"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.Z,{children:(0,p.Z)({value:n,fixed:"__PROJECTID__"})})})]})}h.displayName="ProjectKeyCredentials";const m=(0,i.Z)(o.Z,{target:"edkubn60"})("padding:",(0,c.D)(.5)," 0 0 0;"),f=h}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectKeys_details_keySettings_tsx.3bb16062142bb014375a03ef98da7e2c.js.map