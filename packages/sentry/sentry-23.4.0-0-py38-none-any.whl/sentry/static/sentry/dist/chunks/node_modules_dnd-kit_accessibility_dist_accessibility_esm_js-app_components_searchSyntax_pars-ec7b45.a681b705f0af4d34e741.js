"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["node_modules_dnd-kit_accessibility_dist_accessibility_esm_js-app_components_searchSyntax_pars-ec7b45","vendors-node_modules_dnd-kit_accessibility_dist_accessibility_esm_js-node_modules_react-grid--85d690"],{"../node_modules/@dnd-kit/accessibility/dist/accessibility.esm.js":(e,t,a)=>{a.d(t,{LE:()=>s,Mv:()=>i,qg:()=>l});var n=a("../node_modules/react/index.js");const r={display:"none"};function i({id:e,value:t}){return n.createElement("div",{id:e,style:r},t)}const o={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function s({id:e,announcement:t}){return n.createElement("div",{id:e,style:o,role:"status","aria-live":"assertive","aria-atomic":!0},t)}function l(){const[e,t]=(0,n.useState)("");return{announce:(0,n.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}},"./app/components/searchSyntax/parser.tsx":(e,t,a)=>{a.d(t,{D3:()=>T,J$:()=>v,UG:()=>k,WU:()=>p,iq:()=>S,me:()=>f,oV:()=>m,vA:()=>h});var n=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=a("../node_modules/moment/moment.js"),i=a.n(r),o=a("./app/locale.tsx"),s=a("./app/utils/discover/fields.tsx"),l=a("./app/components/searchSyntax/grammar.pegjs"),u=a.n(l),c=a("./app/components/searchSyntax/utils.tsx");const d=e=>{let[t,a,n,r,i]=e;return{separator:[t.value,a,n.value].join(""),value:i}};let p,m,g,h;!function(e){e.Spaces="spaces",e.Filter="filter",e.FreeText="freeText",e.LogicGroup="logicGroup",e.LogicBoolean="logicBoolean",e.KeySimple="keySimple",e.KeyExplicitTag="keyExplicitTag",e.KeyAggregate="keyAggregate",e.KeyAggregateArgs="keyAggregateArgs",e.KeyAggregateParam="keyAggregateParam",e.ValueIso8601Date="valueIso8601Date",e.ValueRelativeDate="valueRelativeDate",e.ValueDuration="valueDuration",e.ValueSize="valueSize",e.ValuePercentage="valuePercentage",e.ValueBoolean="valueBoolean",e.ValueNumber="valueNumber",e.ValueText="valueText",e.ValueNumberList="valueNumberList",e.ValueTextList="valueTextList"}(p||(p={})),function(e){e.Default="",e.GreaterThanEqual=">=",e.LessThanEqual="<=",e.GreaterThan=">",e.LessThan="<",e.Equal="=",e.NotEqual="!="}(m||(m={})),function(e){e.And="AND",e.Or="OR"}(g||(g={})),function(e){e.Text="text",e.TextIn="textIn",e.Date="date",e.SpecificDate="specificDate",e.RelativeDate="relativeDate",e.Duration="duration",e.Size="size",e.Numeric="numeric",e.NumericIn="numericIn",e.Boolean="boolean",e.AggregateDuration="aggregateDuration",e.AggregateSize="aggregateSize",e.AggregatePercentage="aggregatePercentage",e.AggregateNumeric="aggregateNumeric",e.AggregateDate="aggregateDate",e.AggregateRelativeDate="aggregateRelativeDate",e.Has="has",e.Is="is"}(h||(h={}));const f=[m.Default,m.GreaterThanEqual,m.LessThanEqual,m.GreaterThan,m.LessThan,m.Equal,m.NotEqual],y=[m.Default,m.NotEqual],v={[h.SpecificDate]:[h.Date],[h.Date]:[h.SpecificDate]},x=[p.KeySimple,p.KeyExplicitTag],b={b:1e9,m:1e6,k:1e3},S={[h.Text]:{validKeys:x,validOps:y,validValues:[p.ValueText],canNegate:!0},[h.TextIn]:{validKeys:x,validOps:[],validValues:[p.ValueTextList],canNegate:!0},[h.Date]:{validKeys:[p.KeySimple],validOps:f,validValues:[p.ValueIso8601Date],canNegate:!1},[h.SpecificDate]:{validKeys:[p.KeySimple],validOps:[],validValues:[p.ValueIso8601Date],canNegate:!1},[h.RelativeDate]:{validKeys:[p.KeySimple],validOps:[],validValues:[p.ValueRelativeDate],canNegate:!1},[h.Duration]:{validKeys:[p.KeySimple],validOps:f,validValues:[p.ValueDuration],canNegate:!0},[h.Size]:{validKeys:[p.KeySimple],validOps:f,validValues:[p.ValueSize],canNegate:!0},[h.Numeric]:{validKeys:[p.KeySimple],validOps:f,validValues:[p.ValueNumber],canNegate:!0},[h.NumericIn]:{validKeys:[p.KeySimple],validOps:[],validValues:[p.ValueNumberList],canNegate:!0},[h.Boolean]:{validKeys:[p.KeySimple],validOps:y,validValues:[p.ValueBoolean],canNegate:!0},[h.AggregateDuration]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValueDuration],canNegate:!0},[h.AggregateSize]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValueSize],canNegate:!0},[h.AggregateNumeric]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValueNumber],canNegate:!0},[h.AggregatePercentage]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValuePercentage],canNegate:!0},[h.AggregateDate]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValueIso8601Date],canNegate:!0},[h.AggregateRelativeDate]:{validKeys:[p.KeyAggregate],validOps:f,validValues:[p.ValueRelativeDate],canNegate:!0},[h.Has]:{validKeys:[p.KeySimple],validOps:y,validValues:[],canNegate:!0},[h.Is]:{validKeys:[p.KeySimple],validOps:y,validValues:[p.ValueText],canNegate:!0}},w={textOperatorKeys:new Set(["release.version","release.build","release.package","release.stage"]),durationKeys:new Set(["transaction.duration"]),percentageKeys:new Set(["percentage"]),numericKeys:new Set(["project_id","project.id","issue.id","stack.colno","stack.lineno","stack.stack_level","transaction.duration"]),dateKeys:new Set(["start","end","firstSeen","lastSeen","last_seen()","time","event.timestamp","timestamp","timestamp.to_hour","timestamp.to_day"]),booleanKeys:new Set(["error.handled","error.unhandled","stack.in_app","team_key_transaction"]),sizeKeys:new Set([]),allowBoolean:!0},D={TokenConverter:class{constructor(e){let{text:t,location:a,config:r}=e;(0,n.Z)(this,"text",void 0),(0,n.Z)(this,"location",void 0),(0,n.Z)(this,"config",void 0),(0,n.Z)(this,"keyValidation",{isNumeric:e=>this.config.numericKeys.has(e)||(0,s.Xr)(e)||(0,s.yK)(e),isBoolean:e=>this.config.booleanKeys.has(e),isPercentage:e=>this.config.percentageKeys.has(e),isDate:e=>this.config.dateKeys.has(e),isDuration:e=>this.config.durationKeys.has(e)||(0,s.yK)(e)||"duration"===(0,s.Cq)(e),isSize:e=>this.config.sizeKeys.has(e)}),(0,n.Z)(this,"tokenSpaces",(e=>({...this.defaultTokenFields,type:p.Spaces,value:e}))),(0,n.Z)(this,"tokenFilter",((e,t,a,n,r)=>{const i={type:p.Filter,filter:e,key:t,value:a,negated:r,operator:n??m.Default,invalid:this.checkInvalidFilter(e,t,a)};return{...this.defaultTokenFields,...i}})),(0,n.Z)(this,"tokenFreeText",((e,t)=>({...this.defaultTokenFields,type:p.FreeText,value:e,quoted:t}))),(0,n.Z)(this,"tokenLogicGroup",(e=>({...this.defaultTokenFields,type:p.LogicGroup,inner:e}))),(0,n.Z)(this,"tokenLogicBoolean",(e=>({...this.defaultTokenFields,type:p.LogicBoolean,value:e}))),(0,n.Z)(this,"tokenKeySimple",((e,t)=>({...this.defaultTokenFields,type:p.KeySimple,value:e,quoted:t}))),(0,n.Z)(this,"tokenKeyExplicitTag",((e,t)=>({...this.defaultTokenFields,type:p.KeyExplicitTag,prefix:e,key:t}))),(0,n.Z)(this,"tokenKeyAggregateParam",((e,t)=>({...this.defaultTokenFields,type:p.KeyAggregateParam,value:e,quoted:t}))),(0,n.Z)(this,"tokenKeyAggregate",((e,t,a,n)=>({...this.defaultTokenFields,type:p.KeyAggregate,name:e,args:t,argsSpaceBefore:a,argsSpaceAfter:n}))),(0,n.Z)(this,"tokenKeyAggregateArgs",((e,t)=>({...this.defaultTokenFields,type:p.KeyAggregateArgs,args:[{separator:"",value:e},...t.map(d)]}))),(0,n.Z)(this,"tokenValueIso8601Date",(e=>({...this.defaultTokenFields,type:p.ValueIso8601Date,value:i()(e)}))),(0,n.Z)(this,"tokenValueRelativeDate",((e,t,a)=>({...this.defaultTokenFields,type:p.ValueRelativeDate,value:Number(e),sign:t,unit:a}))),(0,n.Z)(this,"tokenValueDuration",((e,t)=>({...this.defaultTokenFields,type:p.ValueDuration,value:Number(e),unit:t}))),(0,n.Z)(this,"tokenValueSize",((e,t)=>({...this.defaultTokenFields,type:p.ValueSize,value:Number(e),unit:t}))),(0,n.Z)(this,"tokenValuePercentage",(e=>({...this.defaultTokenFields,type:p.ValuePercentage,value:Number(e)}))),(0,n.Z)(this,"tokenValueBoolean",(e=>({...this.defaultTokenFields,type:p.ValueBoolean,value:["1","true"].includes(e.toLowerCase())}))),(0,n.Z)(this,"tokenValueNumber",((e,t)=>({...this.defaultTokenFields,type:p.ValueNumber,value:e,rawValue:Number(e)*(b[t]??1),unit:t}))),(0,n.Z)(this,"tokenValueNumberList",((e,t)=>({...this.defaultTokenFields,type:p.ValueNumberList,items:[{separator:"",value:e},...t.map(d)]}))),(0,n.Z)(this,"tokenValueTextList",((e,t)=>({...this.defaultTokenFields,type:p.ValueTextList,items:[{separator:"",value:e},...t.map(d)]}))),(0,n.Z)(this,"tokenValueText",((e,t)=>({...this.defaultTokenFields,type:p.ValueText,value:e,quoted:t}))),(0,n.Z)(this,"predicateFilter",((e,t)=>{const a=(0,c.Ck)(t),n=t,{isNumeric:r,isDuration:i,isBoolean:o,isDate:s,isPercentage:l,isSize:u}=this.keyValidation,d=e=>n.args?.args.some((t=>e(t?.value?.value??"")));switch(e){case h.Numeric:case h.NumericIn:return r(a);case h.Duration:return i(a);case h.Size:return u(a);case h.Boolean:return o(a);case h.Date:case h.RelativeDate:case h.SpecificDate:return s(a);case h.AggregateDuration:return d(i);case h.AggregateDate:return d(s);case h.AggregatePercentage:return d(l);default:return!0}})),(0,n.Z)(this,"predicateTextOperator",(e=>this.config.textOperatorKeys.has((0,c.Ck)(e)))),(0,n.Z)(this,"checkInvalidFilter",((e,t,a)=>this.config.validateKeys&&this.config.supportedTags&&!this.config.supportedTags[t.text]?{reason:(0,o.t)('Invalid key. "%s" is not a supported search key.',t.text)}:e===h.Text?this.checkInvalidTextFilter(t,a):e===h.Is||e===h.Has?this.checkInvalidTextValue(a):[h.TextIn,h.NumericIn].includes(e)?this.checkInvalidInFilter(a):null)),(0,n.Z)(this,"checkInvalidTextFilter",((e,t)=>{if(e.type===p.KeyExplicitTag)return this.checkInvalidTextValue(t);const a=(0,c.Ck)(e);if(this.keyValidation.isDuration(a))return{reason:(0,o.t)("Invalid duration. Expected number followed by duration unit suffix"),expectedType:[h.Duration]};if(this.keyValidation.isDate(a)){const e=new Date;e.setSeconds(0),e.setMilliseconds(0);const t=e.toISOString();return{reason:(0,o.t)("Invalid date format. Expected +/-duration (e.g. +1h) or ISO 8601-like (e.g. %s or %s)",t.slice(0,10),t),expectedType:[h.Date,h.SpecificDate,h.RelativeDate]}}return this.keyValidation.isBoolean(a)?{reason:(0,o.t)("Invalid boolean. Expected true, 1, false, or 0."),expectedType:[h.Boolean]}:this.keyValidation.isSize(a)?{reason:(0,o.t)("Invalid file size. Expected number followed by file size unit suffix"),expectedType:[h.Size]}:this.keyValidation.isNumeric(a)?{reason:(0,o.t)("Invalid number. Expected number then optional k, m, or b suffix (e.g. 500k)"),expectedType:[h.Numeric,h.NumericIn]}:this.checkInvalidTextValue(t)})),(0,n.Z)(this,"checkInvalidTextValue",(e=>!e.quoted&&/(^|[^\\])"/.test(e.value)?{reason:(0,o.t)("Quotes must enclose text or be escaped")}:e.quoted||""!==e.value?null:{reason:(0,o.t)("Filter must have a value")})),(0,n.Z)(this,"checkInvalidInFilter",(e=>{let{items:t}=e;return t.some((e=>null===e.value))?{reason:(0,o.t)("Lists should not have empty values")}:null})),this.text=t,this.location=a,this.config=r}get defaultTokenFields(){return{text:this.text(),location:this.location()}}},TermOperator:m,FilterType:h,config:w};function k(e,t){const a=t?{...t,...Object.keys(w).reduce(((e,a)=>(e[a]="object"==typeof w[a]?new Set([...w[a],...t[a]??[]]):w[a],e)),{})}:w;try{return u().parse(e,{...D,config:a})}catch(e){}return null}function T(e,t,a){return e&&e.length?(t?" ":"")+(1===e.length?e[0].text:e.map((e=>e.text)).join(a?" ":"")):""}},"./app/utils/discover/charts.tsx":(e,t,a)=>{a.d(t,{CX:()=>o,Xp:()=>u,gu:()=>s,x1:()=>l});var n=a("./app/locale.tsx"),r=a("./app/utils.tsx"),i=a("./app/utils/formatters.tsx");function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,r.ri)(e)?function(e,t){if(!(0,r.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,i.rl)(e,2);case"duration":return(0,i.g9)(e/1e3,2,!0);case"size":return(0,r.F)(e);default:return e.toString()}}(e,t):"—"}function s(e,t){return l(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0)}function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return a?(0,i.Du)(e):e.toLocaleString();case"percentage":return(0,i.rl)(e,0);case"duration":return function(e,t){if(t??=c(e),0===e)return"0";switch(t){case i.ps:{const t=(e/i.ps).toFixed(0);return(0,n.t)("%swk",t)}case i.x4:{const t=(e/i.x4).toFixed(0);return(0,n.t)("%sd",t)}case i.kr:{const t=(e/i.kr).toFixed(0);return(0,n.t)("%shr",t)}case i.EB:{const t=(e/i.EB).toFixed(0);return(0,n.t)("%smin",t)}case i.sh:{const t=(e/i.sh).toFixed(0);return(0,n.t)("%ss",t)}default:const t=e.toFixed(0);return(0,n.t)("%sms",t)}}(e,o);case"size":return(0,r.F)(e,0);default:return e.toString()}}function u(e,t){let a=0;const n=function(e,t){let a;if(e[0]?.data){let n,r=e[0];e.forEach(((a,i)=>{let{seriesName:o,data:s}=a;!1!==t?.selected?.[o]&&s.length&&(r=e[i],n??=e[i])})),n?.data&&(a={max:Math.max(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return a}(e,t);if(n){const e=(n.max+n.min)/2;a=c((n.max-n.min)/5),(e/a).toFixed(0).length>6&&(a=c(e))}return a}function c(e){return e>=i.ps?i.ps:e>=i.x4?i.x4:e>=i.kr?i.kr:e>=i.EB?i.EB:e>=i.sh?i.sh:1}},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,a)=>{a.d(t,{AA:()=>x,JC:()=>S,ZP:()=>w,o:()=>m});var n=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(a("../node_modules/core-js/modules/es.error.cause.js"),a("../node_modules/react/index.js"));if("app"==a.j)var i=a("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs");var o=a("./app/api.tsx"),s=a("./app/locale.tsx"),l=a("./app/utils/discover/eventView.tsx"),u=a("./app/utils/performance/contexts/performanceEventViewContext.tsx"),c=a("./app/views/organizationContext.tsx"),d=a("./app/utils/useApi.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m{constructor(e,t){(0,n.Z)(this,"message",void 0),(0,n.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class g extends r.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null,api:new o.KU}),(0,n.Z)(this,"_shouldRefetchData",(e=>{const t=b(this.props),a=b(e);return!(0,l.ze)(t,a)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,n.Z)(this,"_parseError",(e=>{if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const t=e.responseJSON?.detail;if("string"==typeof t)return new m(t,e);const a=t?.message;return new m("string"==typeof a?a:(0,s.t)("An unknown error occurred."),e)})),(0,n.Z)(this,"fetchData",(async()=>{const{queryBatching:e,beforeFetch:t,afterFetch:a,didFetch:n,eventView:r,orgSlug:i,route:o,setError:s}=this.props,{api:l}=this.state;if(!r.isValid())return;const u=`/organizations/${i}/${o}/`,c=Symbol("tableFetchID"),d=b(this.props);this.setState({isLoading:!0,tableFetchID:c}),s?.(void 0),t?.(l),l.clear();try{const[t,,r]=await x(l,u,d,{queryBatching:e});if(this.state.tableFetchID!==c)return;const i=a?a(t,this.props):t;n?.(i),this.setState((e=>({isLoading:!1,tableFetchID:void 0,error:null,pageLinks:r?.getResponseHeader("Link")??e.pageLinks,tableData:i})))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),s&&s(t??void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),a=!1===e.eventView.isValid()&&this.props.eventView.isValid(),n=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||a||n)&&this.fetchData()}render(){const{isLoading:e,error:t,tableData:a,pageLinks:n}=this.state,r={isLoading:e,error:t,tableData:a,pageLinks:n},i=this.props.children;return i?.(r)}}function h(e){const t=(0,r.useContext)(c.g)?.slug,a=(0,r.useContext)(u.uL)?.eventView,n=e.orgSlug??t,i=e.eventView??a;if(void 0===n||void 0===i)throw new Error("GenericDiscoverQuery requires both an orgSlug and eventView");const o={...e,orgSlug:n,eventView:i};return(0,p.tZ)(g,{...o})}g.displayName="_GenericDiscoverQuery",h.displayName="GenericDiscoverQuery";const f=200,y=2,v=e=>new Promise((t=>setTimeout(t,e)));async function x(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{queryBatching:r,retry:i}=n;if(r?.batchRequest)return r.batchRequest(e,t,{query:a,includeAllArgs:!0});const o=i?.baseTimeout??f,s=i?.timeoutMultiplier??y,l=i?.statusCodes??[],u=i?.tries??1;let c,d=0,p=0;for(;d<u&&(!c||l.includes(c.status));){p>0&&await v(p);try{return d++,await e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...a}})}catch(e){c=e,p=o*s**(d-1)}}throw c}function b(e){const{cursor:t,limit:a,noPagination:n,referrer:r,getRequestPayload:i,eventView:o,location:s,forceAppendRawQueryString:l}=e,u=i?i(e):o.getEventsAPIPayload(s,l);return t&&(u.cursor=t),a&&(u.per_page=a),n&&(u.noPagination=n),r&&(u.referrer=r),Object.assign(u,e.queryExtras??{}),u}function S(e){const t=(0,d.Z)(),{orgSlug:a,route:n}=e,r=`/organizations/${a}/${n}/`,o=b(e);return(0,i.a)([n,o],(async()=>{const[a]=await x(t,r,o,{queryBatching:e.queryBatching});return a}))}const w=h},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,a)=>{a.d(t,{BT:()=>w,e0:()=>k});var n=a("../node_modules/react/index.js"),r=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),i=a("./app/utils/dates.tsx"),o=a("./app/utils/discover/eventView.tsx"),s=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=a("../node_modules/lodash/omit.js"),u=a.n(l),c=a("./app/utils/discover/genericDiscoverQuery.tsx"),d=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{eventView:t,location:a}=e;return u()(t.getEventsAPIPayload(a),["field","sort","per_page","query"])}function m(e){let{children:t,...a}=e;return(0,d.tZ)(c.ZP,{route:"metrics-compatibility-sums",getRequestPayload:p,...a,children:e=>{let{tableData:a,...n}=e;return t({tableData:a,...n})}})}function g(e){let{eventView:t,location:a}=e;return u()(t.getEventsAPIPayload(a),["field","sort","per_page","query"])}function h(e){let{children:t,...a}=e;return(0,d.tZ)(c.ZP,{route:"metrics-compatibility",getRequestPayload:g,...a,children:e=>{let{tableData:a,...n}=e;return t({tableData:a,...n})}})}m.displayName="MetricsCompatibilityQuery",h.displayName="MetricsCompatibilitySumsQuery";var f=a("./app/utils/performance/contexts/utils.tsx");const y=.01,v=.01,[x,b,S]=(0,f.n)({name:"MetricsCardinalityContext",strict:!1});function w(e){if(!(0,s.gp)(e.organization))return(0,d.tZ)(x,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},a=o.ZP.fromLocation(e.location);a.fields=[{field:"tpm()"}];const r=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,i.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(a);return(0,d.tZ)(n.Fragment,{children:(0,d.tZ)(m,{eventView:r,...t,children:a=>(0,d.tZ)(h,{eventView:r,...t,children:t=>{const n=a.isLoading||t.isLoading,r=a.isLoading||t.isLoading?void 0:function(e,t,a){const n={forceTransactionsOnly:!0},r=a.features.includes("performance-mep-bannerless-ui");if(!e)return n;const i=e.compatible_projects;return t?n:e?function(e){return!T(e).metricsCount}(e)?n:function(e,t){const a=T(e);return t?a.nullCount/a.metricsCount>v:a.nullCount>0}(e,r)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:i}:function(e){const t=T(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:i}:function(e,t){const a=T(e);return t?a.unparamCount/a.metricsCount>y:a.unparamCount>0}(e,r)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:i,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:n}(a.tableData&&t.tableData?{...a.tableData,...t.tableData}:null,!!a.error&&!!t.error,e.organization);return(0,d.tZ)(D,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:n,outcome:r},children:e.children})}})})})}function D(e){const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,a=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,i=!e.value.outcome?.forceTransactionsOnly;return(0,n.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,r.Z)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:i,fallback_from_null:t,fallback_from_unparam:a})}),[e.organization,e.value.isLoading,i,a,t,e.sendOutcomeAnalytics]),(0,d.tZ)(x,{...e,children:e.children})}w.displayName="MetricsCardinalityProvider",D.displayName="Provider",S.Consumer;const k=b;function T(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,a)=>{a.d(t,{bq:()=>r,uL:()=>o});var n=a("./app/utils/performance/contexts/utils.tsx");const[r,i,o]=(0,n.n)({name:"PerformanceEventViewContext"})},"./app/utils/performance/contexts/utils.tsx":(e,t,a)=>{a.d(t,{n:()=>r}),a("../node_modules/core-js/modules/es.error.cause.js");var n=a("../node_modules/react/index.js");function r(e){const{strict:t=!0,errorMessage:a=`useContext for "${e.name}" must be inside a Provider with a value`,name:r}=e,i=(0,n.createContext)(void 0);return i.displayName=r,[i.Provider,function(){const e=(0,n.useContext)(i);if(!e&&t)throw new Error(a);return e},i]}},"./app/utils/useRouteContext.tsx":(e,t,a)=>{a.d(t,{s:()=>i}),a("../node_modules/core-js/modules/es.error.cause.js");var n=a("../node_modules/react/index.js"),r=a("./app/views/routeContext.tsx");function i(){const e=(0,n.useContext)(r.X);if(null===e)throw new Error("useRouteContext called outside of routes provider");return e}},"./app/utils/withProject.tsx":(e,t,a)=>{a.d(t,{Z:()=>l});var n=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=a("../node_modules/react/index.js"),i=a("./app/sentryTypes.tsx"),o=a("./app/utils/getDisplayName.tsx"),s=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{var t;return t=class extends r.Component{render(){const{project:t,...a}=this.props;return(0,s.tZ)(e,{project:t??this.context.project,...a})}},(0,n.Z)(t,"displayName",`withProject(${(0,o.Z)(e)})`),(0,n.Z)(t,"contextTypes",{project:i.Z.Project}),t}},"./app/views/performance/landing/metricsDataSwitcher.tsx":(e,t,a)=>{a.d(t,{d:()=>d});var n=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),i=a("../node_modules/react-router/es/index.js"),o=a("./app/components/loadingIndicator.tsx"),s=a("./app/utils/performance/contexts/metricsCardinality.tsx"),l=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),u=a("./app/utils/queryString.tsx"),c=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const t=(0,l.gp)(e.organization),a=(0,s.e0)();return t?a.isLoading&&!e.hideLoadingIndicator?(0,c.tZ)(r.Fragment,{children:(0,c.tZ)(m,{children:(0,c.tZ)(o.Z,{})})}):a.outcome?(0,c.tZ)(r.Fragment,{children:(0,c.tZ)(p,{eventView:e.eventView,location:e.location,outcome:a.outcome,switcherChildren:e.children})}):(0,c.tZ)(r.Fragment,{children:e.children({forceTransactionsOnly:!0})}):(0,c.tZ)(r.Fragment,{children:e.children({forceTransactionsOnly:!0})})}function p(e){let{switcherChildren:t,outcome:a,location:n,eventView:o}=e;const{query:s}=n,d=(0,u.ro)(s[l.tm],""),p=(0,u.ro)(s.query,""),m=d===l.oR.transactionsOnly,g=p&&m&&!a.forceTransactionsOnly;return(0,r.useEffect)((()=>{g&&i.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:void 0,[l.tm]:void 0}})}),[g,n]),p&&m&&!a.forceTransactionsOnly&&(o.query=""),(0,c.tZ)(r.Fragment,{children:t(a)})}d.displayName="MetricsDataSwitcher",p.displayName="MetricsSwitchHandler";const m=(0,n.Z)("div",{target:"e11vcqhu0"})({name:"zl1inp",styles:"display:flex;justify-content:center"})},"./app/views/performance/trends/utils.tsx":(e,t,a)=>{a.d(t,{CE:()=>D,HF:()=>L,IO:()=>k,Kt:()=>V,P4:()=>j,RP:()=>A,T1:()=>f,Ws:()=>w,_1:()=>g,_H:()=>_,bg:()=>h,cs:()=>y,ed:()=>T,es:()=>v,iF:()=>N,j_:()=>O,kM:()=>E,vq:()=>C,vt:()=>S,wx:()=>P}),a("../node_modules/core-js/modules/es.array.push.js");var n=a("../node_modules/downsample/methods/ASAP.js"),r=a("../node_modules/moment/moment.js"),i=a.n(r),o=a("./app/components/charts/utils.tsx"),s=a("./app/locale.tsx"),l=a("./app/utils/discover/fields.tsx"),u=a("./app/utils/queryString.tsx"),c=a("./app/utils/theme.tsx"),d=a("./app/utils/tokenizeSearch.tsx"),p=a("./app/views/performance/utils.tsx"),m=a("./app/views/performance/trends/types.tsx");const g="14d",h="15min",f=[{label:"p50",field:m.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:m.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:m.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:m.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:m.Z2.AVG,alias:"avg_range",legendLabel:"average"}],y=[{label:"Duration",column:m.A2.DURATION},{label:"LCP",column:m.A2.LCP},{label:"FCP",column:m.A2.FCP},{label:"FID",column:m.A2.FID},{label:"CLS",column:m.A2.CLS},{label:"Spans (http)",column:m.A2.SPANS_HTTP},{label:"Spans (db)",column:m.A2.SPANS_DB},{label:"Spans (browser)",column:m.A2.SPANS_BROWSER},{label:"Spans (resource)",column:m.A2.SPANS_RESOURCE}],v={[m.ER.IMPROVED]:{lighter:c.ZP.green200,default:c.ZP.green300},[m.ER.REGRESSION]:{lighter:c.ZP.red200,default:c.ZP.red300}},x={[m.ER.IMPROVED]:"improvedSelected",[m.ER.REGRESSION]:"regressionSelected"},b={[m.ER.IMPROVED]:"improvedUnselectedSeries",[m.ER.REGRESSION]:"regressionUnselectedSeries"},S={[m.ER.IMPROVED]:"improvedCursor",[m.ER.REGRESSION]:"regressionCursor"};function w(){const e={};return Object.values(S).forEach((t=>e[t]=void 0)),e}function D(e,t){const a=t??(0,u.ro)(e?.query?.trendFunction);return f.find((e=>{let{field:t}=e;return t===a}))||f[0]}function k(e,t,a){const n=(0,u.ro)(e?.query?.trendParameter),r=y.find((e=>{let{label:t}=e;return t===n}));return r||function(e,t){return function(e){switch(e){case p.iy.FRONTEND:return{label:"LCP",column:m.A2.LCP};case p.iy.ANY:case p.iy.BACKEND:case p.iy.FRONTEND_OTHER:default:return{label:"Duration",column:m.A2.DURATION}}}((0,p.Bh)(e,t))}(t,a)}function T(e,t){return(0,l.sN)({kind:"function",function:[e,t,void 0,void 0]})}function V(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function _(e,t){if(!e.project||!t)return;const a=t.find((t=>t.slug===e.project));return a?.id}function E(e,t,a,n,r){const i=D(t),s=k(t,n,e.project),l=[...r?[]:["transaction"],"project"].map((e=>({field:e}))),c={field:"trend_percentage()",kind:"asc"};e.trendType=a,a===m.ER.REGRESSION&&(c.kind="desc"),i&&s&&(e.trendFunction=T(i.field,s.column)),e.query=function(e){const t=new d.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){const a=(0,u.ro)(e?.query?.interval),{start:n,end:r,statsPeriod:i}=t,s={start:n||null,end:r||null,period:i},l=(0,o.ZS)(s,"high");return a||l}(t,e),e.sorts=[c],e.fields=l}function N(e,t){const{query:a}=t,n=a.start&&a.end;return a.statsPeriod||n||(e.statsPeriod=g),e}function P(e,t){const a=Math.abs(e);return{seconds:a/1e3,fixedDigits:a>1e3||a<10?1:0,changeLabel:t===m.ER.REGRESSION?(0,s.t)("slower"):(0,s.t)("faster")}}function A(e){const t=i()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function O(e){return x[e]}function j(e){return b[e]}const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,n.Cl)(e,t)},L=e=>["p50","p75"].find((t=>e.includes(t)));function C(e,t){let a=Number.MAX_SAFE_INTEGER,n=0;if(!e)return{maxValue:n,minValue:a,smoothedResults:void 0};const r=[];for(const i of e){const e=i.data,o=[],s=F(e.map((e=>{let{name:t,value:a}=e;return[Number(t),a]})));for(let e=0;e<s.length;e++){const t=s[e],r=t.y;if(o.push({name:t.x,value:r}),!isNaN(r)){const e=Math.round(r);a=Math.min(e,a),n=Math.max(e,n)}}r.push({seriesName:t||i.seriesName||"Current",data:o,lineStyle:i.lineStyle,color:i.color})}return{minValue:a,maxValue:n,smoothedResults:r}}},"../node_modules/react-grid-layout/build/utils.js":(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=d,t.childrenEqual=function(e,t){return(0,n.default)(r.default.Children.map(e,(function(e){return null==e?void 0:e.key})),r.default.Children.map(t,(function(e){return null==e?void 0:e.key})))},t.cloneLayout=p,t.cloneLayoutItem=g,t.collides=f,t.compact=y,t.compactItem=b,t.compactType=function(e){var t=e||{},a=t.verticalCompact,n=t.compactType;return!1===a?null:n},t.correctBounds=S,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=k,t.getFirstCollision=D,t.getLayoutItem=w,t.getStatics=T,t.modifyLayout=m,t.moveElement=V,t.moveElementAwayFromCollision=_,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.setTopLeft=function(e){var t=e.top,a=e.left,n=e.width,r=e.height;return{top:"".concat(t,"px"),left:"".concat(a,"px"),width:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute"}},t.setTransform=function(e){var t=e.top,a=e.left,n=e.width,r=e.height,i="translate(".concat(a,"px,").concat(t,"px)");return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute"}},t.sortLayoutItems=E,t.sortLayoutItemsByColRow=P,t.sortLayoutItemsByRowCol=N,t.synchronizeLayoutWithChildren=function(e,t,a,n,i){e=e||[];var o=[];r.default.Children.forEach(t,(function(t){if(null!=(null==t?void 0:t.key)){var a=w(e,String(t.key));if(a)o.push(g(a));else{!u&&t.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var n=t.props["data-grid"]||t.props._grid;n?(u||A([n],"ReactGridLayout.children"),o.push(g(s(s({},n),{},{i:t.key})))):o.push(g({w:1,h:1,x:0,y:d(o),i:String(t.key)}))}}}));var l=S(o,{cols:a});return i?l:y(l,n,a)},t.validateLayout=A,t.withLayoutItem=function(e,t,a){var n=w(e,t);return n?[e=m(e,n=a(g(n))),n]:[e,null]};var n=i(a("../node_modules/lodash.isequal/index.js")),r=i(a("../node_modules/react/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=!0,c=!1;function d(e){for(var t,a=0,n=0,r=e.length;n<r;n++)(t=e[n].y+e[n].h)>a&&(a=t);return a}function p(e){for(var t=Array(e.length),a=0,n=e.length;a<n;a++)t[a]=g(e[a]);return t}function m(e,t){for(var a=Array(e.length),n=0,r=e.length;n<r;n++)t.i===e[n].i?a[n]=t:a[n]=e[n];return a}function g(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var h=a("../node_modules/react-grid-layout/build/fastRGLPropsEqual.js");function f(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function y(e,t,a){for(var n=T(e),r=E(e,t),i=Array(e.length),o=0,s=r.length;o<s;o++){var l=g(r[o]);l.static||(l=b(n,l,t,a,r),n.push(l)),i[e.indexOf(r[o])]=l,l.moved=!1}return i}t.fastRGLPropsEqual=h;var v={x:"w",y:"h"};function x(e,t,a,n){var r=v[n];t[n]+=1;for(var i=e.map((function(e){return e.i})).indexOf(t.i)+1;i<e.length;i++){var o=e[i];if(!o.static){if(o.y>t.y+t.h)break;f(t,o)&&x(e,o,a+t[r],n)}}t[n]=a}function b(e,t,a,n,r){var i,o="horizontal"===a;if("vertical"===a)for(t.y=Math.min(d(e),t.y);t.y>0&&!D(e,t);)t.y--;else if(o)for(;t.x>0&&!D(e,t);)t.x--;for(;i=D(e,t);)o?x(r,t,i.x+i.w,"x"):x(r,t,i.y+i.h,"y"),o&&t.x+t.w>n&&(t.x=n-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function S(e,t){for(var a=T(e),n=0,r=e.length;n<r;n++){var i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),i.static)for(;D(a,i);)i.y++;else a.push(i)}return e}function w(e,t){for(var a=0,n=e.length;a<n;a++)if(e[a].i===t)return e[a]}function D(e,t){for(var a=0,n=e.length;a<n;a++)if(f(e[a],t))return e[a]}function k(e,t){return e.filter((function(e){return f(e,t)}))}function T(e){return e.filter((function(e){return e.static}))}function V(e,t,a,n,r,i,o,s,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===n&&t.x===a)return e;O("Moving element ".concat(t.i," to [").concat(String(a),",").concat(String(n),"] from [").concat(t.x,",").concat(t.y,"]"));var u=t.x,c=t.y;"number"==typeof a&&(t.x=a),"number"==typeof n&&(t.y=n),t.moved=!0;var d=E(e,o);("vertical"===o&&"number"==typeof n?c>=n:"horizontal"===o&&"number"==typeof a&&u>=a)&&(d=d.reverse());var m=k(d,t),g=m.length>0;if(g&&l)return p(e);if(g&&i)return O("Collision prevented on ".concat(t.i,", reverting.")),t.x=u,t.y=c,t.moved=!1,e;for(var h=0,f=m.length;h<f;h++){var y=m[h];O("Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(y.i," at [").concat(y.x,",").concat(y.y,"]")),y.moved||(e=y.static?_(e,y,t,r,o,s):_(e,t,y,r,o,s))}return e}function _(e,t,a,n,r,i){var o="horizontal"===r,s="horizontal"!==r,l=t.static;if(n){n=!1;var u={x:o?Math.max(t.x-a.w,0):a.x,y:s?Math.max(t.y-a.h,0):a.y,w:a.w,h:a.h,i:"-1"};if(!D(e,u))return O("Doing reverse collision on ".concat(a.i," up to [").concat(u.x,",").concat(u.y,"].")),V(e,a,o?u.x:void 0,s?u.y:void 0,n,l,r,i)}return V(e,a,o?a.x+1:void 0,s?a.y+1:void 0,n,l,r,i)}function E(e,t){return"horizontal"===t?P(e):"vertical"===t?N(e):e}function N(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function P(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",a=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var n=0,r=e.length;n<r;n++)for(var i=e[n],o=0;o<a.length;o++)if("number"!=typeof i[a[o]])throw new Error("ReactGridLayout: "+t+"["+n+"]."+a[o]+" must be a number!")}function O(){var e;c&&(e=console).log.apply(e,arguments)}t.noop=function(){}}}]);
//# sourceMappingURL=../sourcemaps/node_modules_dnd-kit_accessibility_dist_accessibility_esm_js-app_components_searchSyntax_pars-ec7b45.3329f4a9b2570a2f4c837994630747d8.js.map