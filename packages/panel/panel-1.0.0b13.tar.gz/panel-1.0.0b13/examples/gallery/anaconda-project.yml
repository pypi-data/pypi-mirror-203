name: panel_gallery
description: An environment to serve all Panel gallery examples

commands:
  default:
    description: Serve the Panel gallery
    unix: sudo yum install -y http://mirror.centos.org/centos/7/os/x86_64/Packages/libxkbfile-1.0.9-3.el7.x86_64.rpm http://mirror.centos.org/centos/7/os/x86_64/Packages/xorg-x11-xkb-utils-7.7-14.el7.x86_64.rpm http://mirror.centos.org/centos/7/updates/x86_64/Packages/xorg-x11-server-common-1.20.4-23.el7_9.x86_64.rpm http://mirror.centos.org/centos/7/os/x86_64/Packages/libXdmcp-1.1.2-6.el7.x86_64.rpm http://mirror.centos.org/centos/7/os/x86_64/Packages/libXfont2-2.0.3-1.el7.x86_64.rpm http://mirror.centos.org/centos/7/updates/x86_64/Packages/xorg-x11-server-Xvfb-1.20.4-23.el7_9.x86_64.rpm && Xvfb -- :99 -ac -screen 0 1280x1024x24 > /dev/null 2>&1 & bokeh sampledata && sleep 10 && panel serve */*.ipynb --static-dirs thumbnails=thumbnails --num-threads 8
    supports_http_options: true

channels:
  - pyviz/label/dev
  - bokeh/label/dev
  - conda-forge

variables:
  MPLBACKEND: Agg
  DISPLAY: ":99"
  MESA_GL_VERSION_OVERRIDE: 3.2
  PYVISTA_OFF_SCREEN: "true"

packages:
  - panel
  - holoviews
  - pandas
  - scikit-learn
  - scikit-image
  - fastparquet
  - hvplot
  - datashader
  - graphviz
  - networkx
  - ipywidgets
  - pygraphviz
  - plotly
  - altair
  - pydeck
  - pyvista
  - seaborn
  - xgboost
  - vtk
  - pyvista
  - numpy<1.24
  - pip:
    - ipyvolume
    - folium
    - vega_datasets

env_specs:
  default: {}
