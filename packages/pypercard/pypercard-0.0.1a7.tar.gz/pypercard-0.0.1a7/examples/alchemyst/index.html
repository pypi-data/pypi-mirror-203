<!DOCTYPE html>
<html lang="en">
<head>
   <title>The Alchemist's Tower</title>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width,initial-scale=1">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/dark.css">
   <script defer src="https://pyscript.net/releases/2023.03.1/pyscript.js"></script>
   <style>
    .nav {
      font-size: 1.4em;
      font-family: initial;
      width: 100%;
      text-align: center;
    }
    pyper-app {
      font-family: 'Brush Script MT', cursive;
      font-size: 2em;
    }
   </style>
</head>
<body>
  <py-config src="./pyscript.toml"></py-config>
  <py-script src="./main.py"></py-script>
  <template id="hello">
    <h1>Hello</h1>
    <label for="name">Please tell me your preferred name:</label>
    <input id="name" type="text" autofocus/>
    <button id="submit">Continue</button>
  </template>
  <template id="nameerror" auto-advance=3 transition="hello">
    <h2>⚠️  Please tell me your name.</h2>
  </template>
  <template id="intro1">
    <h2>Hello, {name}</h2>
    <p>Please ensure you have sound turned on, or headphones plugged in. Use
    the buttons and forms to proceed through the game.</p>
    <p>If there are no buttons visible, it means the screen will advance
    after a pre-determined period of time.</p>
    <p>Can you solve the riddle of the Alchemist's Tower?</p>
    <button id="back" transition="-">Back</button>
    <button id="submit" transition="+" autofocus>Continue</button>
    <!--button id="skip" transition="landed">Skip</button-->
  </template>
  <template id="intro2" sound="music/opening.mp3" auto-advance=13 transition="intro2b"></template>
  <template id="intro2b" auto-advance=17 transition="intro2c">
    <h1>The Alchemist's Tower</h1>
    <h2>A mystery set on the banks of Lake Zurich</h2>
  </template>
  <template id="intro2c" auto-advance=1.5 transition="intro3"></template>
  <template id="intro3" auto-advance=39 transition="landing">
    <p>Lake Zurich reflected the whispy white autumn clouds, yet the water
    was clear enough that it was easy to spot fish and see the sandy bed
    several metres below. The fresh smell of reeds and algae was in the air.
    Distant and indistinct sounds from the shore could be heard over the
    lapping of the water against the hull.</p>
    <p>The dinghy glided through the water towards an outcrop covered in
    trees within which could be seen an irregular group of white-washed
    towers and walls.</p>
    <p>The taciturn youth at the helm had simply promised to land at a
    secret location ripe for exploration...</p>
    <p>...and so you drifted towards your destination.</p>
  </template>
  <template id="landing" background="img/from_lake.png" auto-advance=11 transition="landed">
  </template>
  <template id="landed" sound="sfx/lake.mp3" sound-loop>
    <p>"{name}, this is where you get off", said the youth.</p>
    <p>He avoided making eye contact whilst offering a hand onto the shore of
    the lake.</p>
    <p>As quickly as possible he pushed off and, without turning around,
    waved as he sailed towards the middle of the lake.</p>
    <button id="continue">Continue</button>
  </template>
  <template id="patio_closed" background="img/patio_closed.png" sound="sfx/nature.mp3" sound-loop>
    <div class="nav">
      <button title="left" transition="beach">◀</button>
      <button title="forward" id="to_front_door">▲</button>
    </div>
  </template>
  <template id="patio_open" background="img/patio_open.png" sound="sfx/nature.mp3" sound-loop>
    <div class="nav">
      <button title="left" transition="beach">◀</button>
      <button title="forward" id="to_front_door">▲</button>
    <div>
  </template>
  <template id="beach" background="img/beach.png" sound="sfx/lake.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="lakeside">◀</button>
      <button title="forwards" transition="undergrowth">▲</button>
      <button title="right" id="right">▶</button>
    </div>
  </template>
  <template id="lakeside" background="img/lakeside.png" sound="sfx/lake.mp3" sound-loop >
    <div class="nav">
      <button title="right" transition="beach">▶</button>
    </div>
  </template>
  <template id="front_door_open" background="img/front_door_open.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="undergrowth">◀</button>
      <button transition="stone">Stone</button>
      <button title="forwards" transition="front_courtyard">▲</button>
      <button title="right" transition="lake_reeds">▶</button>
    </div>
  </template>
  <template id="front_door_closed" background="img/front_door_closed.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="undergrowth">◀</button>
      <button transition="stone">Stone</button>
      <button title="right" transition="lake_reeds">▶</button>
    </div>
  </template>
  <template id="back_door_open" background="img/back_door_open.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="forwards" transition="back_courtyard">▲</button>
      <button title="back" transition="back_garden">▼</button>
    </div>
  </template>
  <template id="back_door_closed" background="img/back_door_closed.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="back" transition="back_garden">▼</button>
    </div>
  </template>
  <template id="stone" background="img/stone.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button id="to_inscription">Read</button>
      <button title="back" id="to_front_door">▼</button>
    </div>
  </template>
  <template id="inscription1" auto-advance=25.25 transition="inscription2a" sound="music/inscription.mp3">
    <p>Set on a pedestal under the tree was a weathered and roughly carved stone. The inscriptions appeared to be in Greek and contained mysterious looking magical symbols.</p>
    <p>In the centre was a small figure (named as Telesphoros) wearing a hooded cloak and carrying a lantern, greeting visitors or perhaps beckoning to them with a wave of his hand.</p>
  </template>
  <template id="inscription2a" auto-advance=22.25 transition="inscription3" background="img/inscription.png">
  </template>
  <template id="inscription2b" background="img/inscription.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button transition="stone">OK</button>
      <button transition="inscription4b">Re-translate</button>
    </div>
  </template>
  <template id="inscription3" auto-advance=21.75 transition="inscription4a">
    <p>The circular shape of the carving looked like the pupil of an eye, keeping watch over visitors and looking into their souls.</p>
    <p>Apparently the Greek inscriptions were once translated into English, and it was said that they didn't seem to make much sense.</p>
    <p>They were a sort of incantation or dedication written by the alchemist who had once lived in the tower.</p>
  </template>
  <template id="inscription4a" auto-advance=23 transition="stone">
    <p>Time is a child playing, like a child playing a board game, the kingdom of the child.</p>
    <p>This is Telesphoros, who roams through the dark regions of this cosmos and glows like a star out of the depths.</p>
    <p>He points the way to the gates of the sun and to the land of dreams.</p>
  </template>
  <template id="inscription4b">
    <p>Time is a child playing, like a child playing a board game, the kingdom of the child.</p>
    <p>This is Telesphoros, who roams through the dark regions of this cosmos and glows like a star out of the depths.</p>
    <p>He points the way to the gates of the sun and to the land of dreams.</p>
    <div class="nav">
      <button transition="stone">OK</button>
    </div>
  </template>
  <template id="undergrowth" background="img/undergrowth.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="walls">◀</button>
      <button title="forwards" id="to_front_door">▲</button>
      <button title="right" transition="beach">▶</button>
    </div>
  </template>
  <template id="lake_reeds" background="img/lake_reeds.png" sound="sfx/lake.mp3" sound-loop >
    <div class="nav">
      <button title="left" id="to_front_door">◀</button>
      <button title="forwards" transition="reed_wall">▲</button>
    </div>
  </template>
  <template id="reed_wall" background="img/reed_wall.png" sound="sfx/lake.mp3" sound-loop >
    <div class="nav">
      <button title="forwards" transition="lake_reeds">▲</button>
      <button title="right" transition="back_garden">▶</button>
    </div>
  </template>
  <template id="back_garden" background="img/back_garden.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="reed_wall">◀</button>
      <button title="forwards" id="to_back_door">▲</button>
      <button title="right" transition="back_woods">▶</button>
    </div>
  </template>
  <template id="walls" background="img/walls.png" sound="sfx/woods.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="rear_tower">◀</button>
      <button title="right" transition="undergrowth">▶</button>
    </div>
  </template>
  <template id="rear_tower" background="img/rear_tower.png" sound="sfx/woods.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="back_woods">◀</button>
      <button title="right" transition="walls">▶</button>
    </div>
  </template>
  <template id="back_woods" background="img/back_woods.png" sound="sfx/woods.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="woods">◀</button>
      <button title="forwards" transition="back_garden">▲</button>
      <button title="right" transition="rear_tower">▶</button>
    </div>
  </template>
  <template id="woods" background="img/woods.png" sound="sfx/woods.mp3" sound-loop >
    <div class="nav">
      <button title="left" id="to_encounter">◀</button>
      <button title="right" transition="back_woods">▶</button>
    </div>
  </template>
  <template id="forest_path" background="img/forest_path.png" sound="sfx/woods.mp3" sound-loop >
    <div class="nav">
      <button title="forwards" transition="woods">▲</button>
    </div>
  </template>
  <template id="encounter1" auto-advance=9.25 transition="encounter2" background="img/jung2.png" sound="music/encounter.mp3">
  </template>
  <template id="encounter2" auto-advance=27.75 transition="encounter3">
    <p>From behind a tree emerged a spry looking elderly man.</p>
    <p>His clothing was of Victorian cut and he wore wire rimmed glasses that gave him the air of an intellectual. His hair was grey and he sported a well groomed moustache.</p>
    <p>But it was his piercing eyes that grabbed one's attention.</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;"My name is Carl Gustav", he said with a thick Swiss accent.</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;"What are you doing in my land?"</p>
  </template>
  <template id="encounter3" auto-advance=9.5 transition="encounter4" background="img/jung_close.png">
  </template>
  <template id="encounter4" auto-advance=18 transition="encounter5">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;"Sir, I do not wish to intrude", you replied.</p>
    <p>He took the measure of you as his eyes twinkled from behind his glasses.</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;"Hmmmm. I don't usually get visitors, so I may yet be glad of your company."</p>
    <p>You told him that you'd heard that this, "was a place of exploration."</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;"That it is, but not in the way I think you mean. I wonder if you have explored much yet?", was his reply.</p>
  </template>
  <template id="encounter5" auto-advance=20.5 transition="interview">
    <p>He continued, "If you can answer me a question, I'll open the tower for you."</p>
    <p>This was an offer too good to miss. The tower felt like it was alive and asking to be explored.</p>
    <p>  "I assume you've seen the stone standing guard by the front door? If you can tell me the name of the character carved therein, I'll let you in the tower."</p>
  </template>
  <template id="interview" sound="sfx/woods.mp3" sound-loop >
    <p>Carl Gustav looked you in the eye and asked, "What is the name on the guarding stone?"</p>
    <input type="text" id="answer" placeholder="Type your answer here..." autofocus></input>
    <button id="to_answer">Answer</button>
    <button title="back" transition="woods">▼</button>
  </template>
  <template id="interview_end" auto-advance=10 transition="woods" sound="sfx/gravel_steps.mp3">
    <p>The old man broke into a smile.</p>
    <p>"Correct!", he exclaimed.</p>
    <p>With that, he stood up and walked through the woods in the direction of the tower.</p>
  </template>
  <template id="interview_no1" auto-advance=4 transition="interview">
    <p>The old man shook his head and said, "Try again, friend".</p>
  </template>
  <template id="interview_no2" auto-advance=4 transition="interview">
    <p>"That's not it", said Carl Gustav.</p>
  </template>
  <template id="interview_no3" auto-advance=4 transition="interview">
    <p>Carl Gustav smiled, shook his head and said, "I'm afraid that's incorrect".</p>
  </template>
  <template id="interview_no4" auto-advance=4 transition="interview">
    <p>"Wrong, better luck next time...", said the old man.</p>
  </template>
  <template id="interview_no5" auto-advance=4 transition="interview">
    <p>"No my friend, perhaps go take a look?", said the old man.</p>
  </template>
  <template id="front_courtyard" background="img/front_door_out.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="forwards" id="to_front_door">▲</button>
      <button title="back" transition="back_courtyard">▼</button>
      <button title="right" transition="small_tower_door">▶</button>
    </div>
  </template>
  <template id="back_courtyard" background="img/arches.png" sound="sfx/fireplace.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="courtyard_towers">◀</button>
      <button title="forwards" transition="under_arch">▲</button>
      <button title="back" transition="front_courtyard">▼</button>
    </div>
  </template>
  <template id="courtyard_towers" background="img/courtyard_towers.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="large_tower_door">◀</button>
      <button title="right" transition="back_courtyard">▶</button>
    </div>
  </template>
  <template id="large_tower_door" background="img/courtyard_tower_door.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="courtyard_tower_round">◀</button>
      <button title="forwards" id="to_dining_room">▲</button>
      <button title="right" transition="courtyard_towers">▶</button>
    </div>
  </template>
  <template id="courtyard_tower_round" background="img/courtyard_tower_round.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="small_tower_door">◀</button>
      <button title="right" transition="large_tower_door">▶</button>
    </div>
  </template>
  <template id="small_tower_door" background="img/tower_door.png" sound="sfx/nature.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="front_courtyard">◀</button>
      <button title="forwards" transition="stairs">▲</button>
      <button title="right" transition="courtyard_tower_round">▶</button>
    </div>
  </template>
  <template id="stairs" background="img/fireplace.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="basin">◀</button>
      <button transition="window_view">Up</button>
      <button title="forwards" transition="small_tower_door">▲</button>
      <button title="right" transition="hearth">▶</button>
    </div>
  </template>
  <template id="hearth" background="img/hearth.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="stairs">◀</button>
      <button title="right" transition="basin">▶</button>
    </div>
  </template>
  <template id="basin" background="img/basin.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="hearth">◀</button>
      <button title="right" transition="stairs">▶</button>
    </div>
  </template>
  <template id="dining_room" background="img/dining_room.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="back" transition="large_tower_door">▼</button>
    </div>
  </template>
  <template id="under_arch" background="img/under_arch.png" sound="sfx/fireplace.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="wood_store">◀</button>
      <button title="back" transition="back_courtyard">▼</button>
      <button title="right" transition="window_reeds">▶</button>
    </div>
  </template>
  <template id="wood_store" background="img/wood_store.png" sound="sfx/fireplace.mp3" sound-loop >
    <div class="nav">
      <button title="back" transition="under_arch">▼</button>
    </div>
  </template>
  <template id="window_reeds" background="img/window_reeds.png" sound="sfx/lake.mp3" sound-loop >
    <div class="nav">
      <button title="back" transition="under_arch">▼</button>
    </div>
  </template>
  <template id="window_view" background="img/window_view.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button transition="stairs">Down</button>
      <button title="forwards" transition="view_down_courtyard">▲</button>
      <button title="right" id="to_red_book">▶</button>
    </div>
  </template>
  <template id="view_down_courtyard" background="img/view_down_courtyard.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="back" transition="window_view">▼</button>
    </div>
  </template>
  <template id="red_book" background="img/red_book.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="window_view">◀</button>
      <button transition="book1">Read</button>
    </div>
  </template>
  <template id="book1" sound="sfx/ticking.mp3" sound-loop >
    <p>There was a page with an image of a winged old man stood between two trees with a Python at his feet.</p>
    <p>The text explained:</p>
    <p>"I am Philemon, and I am conduit for the multitude within you.</p>
    <p>Be still, and speak with me of your explorations within yourself. Give me voice that I may tell you of our internal reservoir of collective knowledge.</p>
    <p>Then know yourself, and allow the multitude to enlarge your Self."</p>
    <div class="nav">
      <button title="left" transition="red_book">◀</button>
      <button title="right" transition="book2">▶</button>
    </div>
  </template>
  <template id="book2" background="img/book1.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="book1">◀</button>
      <button title="right" transition="book3">▶</button>
    </div>
  </template>
  <template id="book3" sound="sfx/ticking.mp3" sound-loop >
    <p>Another page contained a picture of a serpent circling a glowing orb.</p>
    <p>Words explained, "Knowing and using the power of the serpent means you create new colourful magic and alchemy. It allows you to harness the external reservoir of collective knowledge."</p>
    <div class="nav">
      <button title="left" transition="book2">◀</button>
      <button title="right" transition="book4">▶</button>
    </div>
  </template>
  <template id="book4" background="img/book2.png" sound="sfx/ticking.mp3" sound-loop >
    <div class="nav">
      <button title="left" transition="book3">◀</button>
      <button title="right" transition="red_book">▶</button>
    </div>
  </template>
  <template id="unlock1" auto-advance=4 transition="unlock2" sound="sfx/bells.mp3">
    <h1>The Red Book</h1>
  </template>
  <template id="unlock2" auto-advance=5 transition="unlock3" background="img/red_book.png">
  </template>
  <template id="unlock3" auto-advance=14 transition="book_lock">
    <p>The Red Book sat on a cluttered desk next to a photograph of the guarding stone and a notepad.</p>
    <p>It was impossible to open the book because of a latch attached to a four digit combination lock binding the covers together.</p>
    <p>On the pad was written a riddle, "Sink your efforts into the year of the bowl".</p>
  </template>
  <template id="book_lock" sound="sfx/ticking.mp3" sound-loop >
    <p>Enter the four digit code to unlock the book:</p>
    <input id="answer" placeholder="four digit code" autofocus></input>
      <button id="to_unlock">Unlock</button>
      <button title="back" transition="window_view">▼</button>
  </template>
  <template id="locked" auto-advance=3 transition="book_lock">
    <p>{message}</p>
  </template>
  <template id="red1" auto-advance=30 transition="red2" sound="music/red_book.mp3">
    <p>The latch came loose and the lock fell onto the desk with a gentle thud.</p>
    <p>Upon opening the leather bound covers a whiff of tobacco smoke was detected, as if the author or reader was a regular pipe smoker. On the front page was written in large Gothic script, "Liber Novus".</p>
    <p>Within the book was page after page of beautifully illuminated prose sitting alongside colourful images of mythical beasts, far off places and strange beings.</p>
  </template>
  <template id="red2" auto-advance=30 transition="red3" background="img/book1.png">
  </template>
  <template id="red3" auto-advance=25 transition="red4">
    <p>There was a page with an image of a winged old man stood between two trees with a Python at his feet.</p>
    <p>The text explained:</p>
    <p>"I am Philemon, and I am conduit for the multitude within you.</p>
    <p>Be still, and speak with me of your explorations within yourself. Give me voice that I may tell you of our internal reservoir of collective knowledge.</p>
    <p>Then know yourself, and allow the multitude to enlarge your Self."</p>
  </template>
  <template id="red4" auto-advance=20 transition="red5" background="img/book2.png">
  </template>
  <template id="red5" auto-advance=35 transition="red_book">
    <p>Another page contained a picture of a serpent circling a glowing orb.</p>
    <p>Words explained, "Knowing and using the power of the serpent means you create new colourful magic and alchemy. It allows you to harness the external reservoir of collective knowledge."</p>
  </template>
  <template id="instruct" auto-advance=6.5 transition="instruct2" background="img/dining_room.png" sound="music/instruct.mp3">
  </template>
  <template id="instruct2" auto-advance=7 transition="instruct3" background="img/jung.png">
  </template>
  <template id="instruct3" auto-advance=12 transition="instruct4">
    <p>Carl Gustav pensively sat in a corner of the dining room.</p>
    <p>He hadn't noticed the intrusion and was mumbling to himself.</p>
    <p>"The book must be read, the book is read, only if your have read the book can the transmogrification be explained."</p>
  </template>
  <template id="instruct4" auto-advance=9.5 transition="instruct5" background="img/jung3.png">
  </template>
  <template id="instruct5" auto-advance=21 transition="dining_room">
    <p>Suddenly he looked up...</p>
    <p>Similing, he pronounced with great emphasis, "You must read the read book".</p>
    <p>  "The book..?", you asked.</p>
    <p>Shrugging he simply said, "The Red Book".</p>
  </template>
  <template id="waiting" auto-advance=4 transition="waiting2" background="img/dining_room.png" sound="sfx/bells.mp3">
  </template>
  <template id="waiting2" auto-advance=5 transition="waiting3" background="img/jung.png">
  </template>
  <template id="waiting3" auto-advance=12 transition="dining_room">
    <p>Carl Gustav looked up expectantly, searching your face for recognition and then sighed.</p>
    <p>"Read the Red Book", was all he would say.</p>
  </template>
  <template id="finale" auto-advance=8 transition="finale2" background="img/dining_room.png" sound="music/finale.mp3">
  </template>
  <template id="finale2" auto-advance=8.5 transition="finale3" background="img/jung.png">
  </template>
  <template id="finale3" auto-advance=8 transition="finale4">
    <p>Carl Gustav looked up expectantly, searching your face for recognition and then beamed a huge smile.</p>
  </template>
  <template id="finale4" auto-advance=9 transition="finale5" background="img/jung3.png">
  </template>
  <template id="finale5" auto-advance=8 transition="finale5b">
    <p>"{name}, my child. You are ready to hear the alchemist's secret."</p>
  </template>
  <template id="finale5b" auto-advance=15.5 transition="finale5c">
    <p>"The alchemy of which I speak involves elements of the psyche. The exploration that happens here, is of the soul."</p>
  </template>
  <template id="finale5c" auto-advance=15 transition="finale6">
    <p>"The transformation you must achieve is within yourself."</p>
    <p>"Can you assuage the multitude within you with the multitude of others outside yourself?"</p>
    <p>"Will you swim in the reservoir with our colourful ancestors..?"</p>
    <p>"Are you the alchemist of your soul..?"</p>
  </template>
  <template id="finale6" auto-advance=7 transition="finale7">
    <p>That was when you awoke....</p>
  </template>
  <template id="finale7" auto-advance=11 transition="finale8">
    <p>...only to find yourself back on the dinghy.</p>
    <p>The taciturn youth looked at you intently as you passed an outcrop covered in trees within which could be seen an irregular group of white-washed towers and walls.</p>
  </template>
  <template id="finale8" auto-advance=20 transition="finale9" background="img/bollingen.png">
  </template>
  <template id="finale9">
    <h1>The End...</h1>
  </template>
</body>
</html>
