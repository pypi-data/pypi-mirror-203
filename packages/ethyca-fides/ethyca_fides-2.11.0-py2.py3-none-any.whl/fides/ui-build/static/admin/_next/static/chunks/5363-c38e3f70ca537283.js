(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5363],{58144:function(e,t,n){"use strict";var r=n(59499),s=n(43871),i=n(68527),o=n(15193),a=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm,c=e.title,d=e.message,u=e.cancelButtonText,h=e.cancelButtonThemingProps,p=e.continueButtonText,f=e.continueButtonThemingProps,m=e.isLoading,x=e.returnFocusOnClose,j=e.isCentered,b=e.testId,g=void 0===b?"confirmation-modal":b,y=e.icon;return(0,a.jsxs)(s.u_,{isOpen:t,onClose:n,size:"lg",returnFocusOnClose:null===x||void 0===x||x,isCentered:j,children:[(0,a.jsx)(s.ZA,{}),(0,a.jsxs)(s.hz,{textAlign:"center",p:6,"data-testid":g,children:[y?(0,a.jsx)(i.M5,{mb:2,children:y}):null,c?(0,a.jsx)(s.xB,{fontWeight:"medium",pb:0,children:c}):null,d?(0,a.jsx)(s.fe,{children:d}):null,(0,a.jsx)(s.mz,{children:(0,a.jsxs)(i.MI,{columns:2,width:"100%",children:[(0,a.jsx)(o.zx,l(l({variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",isDisabled:m},h),{},{children:u||"Cancel"})),(0,a.jsx)(o.zx,l(l({colorScheme:"primary",onClick:r,"data-testid":"continue-btn",isLoading:m},f),{},{children:p||"Continue"}))]})})]})]})}},52313:function(e,t,n){"use strict";var r=n(59499),s=n(4730),i=n(73465),o=n(85893),a=["data","border"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.data,n=e.border,r=void 0===n?"partial":n,c=(0,s.Z)(e,a);return(0,o.jsxs)(i.mQ,l(l({colorScheme:"complimentary"},c),{},{children:[(0,o.jsx)(i.td,{width:"partial"===r?"max-content":void 0,children:t.map((function(e,t){return(0,o.jsx)(i.OK,{"data-testid":"tab-".concat(e.label),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:c.fontSize,fontWeight:"500",color:"gray.500",isDisabled:e.isDisabled||!1,children:e.label},t)}))}),(0,o.jsx)(i.nP,{children:t.map((function(e,t){return(0,o.jsx)(i.x4,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},t)}))})]}))}},70783:function(e,t,n){"use strict";n.d(t,{HK:function(){return i},VY:function(){return r.V}});var r=n(63719),s=n(65698),i=function(){var e=(0,r.V)().errorAlert;return{handleError:function(t){var n="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?n=t.data.detail:(0,s.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}};n(67294)},63719:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(59499),s=n(28609),i=n(6886),o=n(68527),a=n(84746),c=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){var e=(0,s.pm)();return{errorAlert:function(t,n,r){var s=d(d({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(o.xu,{children:[n&&(0,c.jsx)(i.Cd,{children:n}),(0,c.jsx)(i.X,{children:t})]}),(0,c.jsx)(a.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,s):e(s)},successAlert:function(t,n,r){var s=d(d({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(o.xu,{children:[n&&(0,c.jsx)(i.Cd,{children:n}),(0,c.jsx)(i.X,{children:t})]}),(0,c.jsx)(a.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,s):e(s)}}}},795:function(e,t,n){"use strict";n.d(t,{R:function(){return z},Z:function(){return _}});var r=n(68527),s=n(67294),i=n(15031),o=n(1902),a=n.n(o),c=n(85893),l=function(e){var t=e.columns,n=e.items,s=e.renderItem,o=(0,i.yo)(n,t);return(0,c.jsx)(r.xu,{children:o.map((function(e,n,i){var o=i.length;return(0,c.jsx)(r.xu,{className:a()["grid-row"],borderBottomWidth:o>1&&n===o-1&&e.length===t?"0.5px":void 0,children:(0,c.jsx)(r.MI,{columns:t,children:e.map((function(e){return(0,c.jsx)(r.xu,{className:a()["grid-item"],children:s(e)},JSON.stringify(e))}))})},JSON.stringify(e))}))})},d=n(49743),u=n(50029),h=n(16835),p=n(87794),f=n.n(p),m=n(97375),x=n(28609),j=n(81655),b=n(15193),g=n(48591),y=n(11163),v=n(97142),w=n(58144),O=n(45035),P=n(65698),C=n(10846),S=n(32523),k=function(e){var t=e.system,n=(0,m.qY)(),s=n.isOpen,i=n.onOpen,o=n.onClose,a=(0,x.pm)(),l=(0,v.T)(),d=(0,y.useRouter)(),p=(0,S.DW)(),k=(0,h.Z)(p,1)[0],z=function(){var e=(0,u.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.fides_key);case 2:n=e.sent,(0,P.D4)(n)?a((0,C.Vo)((0,P.e$)(n.error))):a((0,C.t5)("Successfully deleted system")),o();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=""===t.name||null==t.name?t.fides_key:t.name;return(0,c.jsxs)(r.xu,{display:"flex","data-testid":"system-".concat(t.fides_key),children:[(0,c.jsxs)(r.xu,{flexGrow:1,p:4,children:[(0,c.jsx)(r.X6,{as:"h2",fontSize:"16px",mb:2,children:_}),(0,c.jsx)(r.xu,{color:"gray.600",fontSize:"14px",children:(0,c.jsx)(r.xv,{children:t.description})})]}),(0,c.jsxs)(j.v2,{children:[(0,c.jsx)(j.j2,{as:b.hU,icon:(0,c.jsx)(g.nX,{}),"aria-label":"more actions",variant:"unstyled",size:"sm","data-testid":"more-btn",m:1}),(0,c.jsxs)(j.qy,{children:[(0,c.jsx)(j.sN,{onClick:function(){l((0,S.db)(t)),d.push("".concat(O.So,"/configure/").concat(t.fides_key))},"data-testid":"edit-btn",children:"Edit"}),(0,c.jsx)(j.sN,{onClick:i,"data-testid":"delete-btn",children:"Delete"})]})]}),(0,c.jsx)(w.Z,{isOpen:s,onClose:o,onConfirm:z,title:"Delete ".concat(_),message:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r.xv,{children:["You are about to permanently delete the system"," ",(0,c.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:_}),"."]}),(0,c.jsx)(r.xv,{children:"Are you sure you would like to continue?"})]})})]})},z=function(e,t){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(t.toLocaleLowerCase()))||(null===(r=e.description)||void 0===r?void 0:r.toLocaleLowerCase().includes(t.toLocaleLowerCase()))},_=function(e){var t=e.systems,n=(0,s.useState)(""),i=n[0],o=n[1],a=(0,s.useMemo)((function(){return t?t.filter((function(e){return z(e,i)})):[]}),[t,i]);return t&&t.length?(0,c.jsxs)(r.xu,{"data-testid":"system-management",children:[(0,c.jsx)(r.xu,{mb:4,"data-testid":"system-filters",children:(0,c.jsx)(d.Z,{search:i,onChange:o,maxWidth:"30vw",placeholder:"Search system name or description","data-testid":"system-search",withIcon:!0})}),(0,c.jsx)(l,{columns:3,items:a,renderItem:function(e){return(0,c.jsx)(k,{system:e})}})]}):(0,c.jsx)("div",{"data-testid":"empty-state",children:"No systems registered."})}},33278:function(e,t,n){"use strict";var r=n(68527),s=n(11739),i=n(41664),o=n.n(i),a=(n(67294),n(18343)),c=n(45035),l=n(85893);t.Z=function(e){var t=e.title,n=e.children;return(0,l.jsxs)(a.Z,{title:"User Management",children:[(0,l.jsxs)(r.X6,{fontSize:"2xl",fontWeight:"semibold",children:["User Management",(0,l.jsx)(r.xu,{mt:2,mb:7,children:(0,l.jsxs)(s.aG,{fontWeight:"medium",fontSize:"sm",children:[(0,l.jsx)(s.gN,{children:(0,l.jsx)(o(),{href:c.e3,passHref:!0,children:(0,l.jsx)(s.At,{href:c.e3,children:"Management"})})}),(0,l.jsx)(s.gN,{children:(0,l.jsx)(s.At,{href:"#",children:t})})]})})]}),n]})}},77979:function(e,t,n){"use strict";n.d(t,{Z:function(){return ge}});var r=n(59499),s=n(4730),i=n(68527),o=n(41040),a=n(85893),c=function(){return(0,a.jsxs)(i.xu,{children:[(0,a.jsx)(i.xu,{pb:4,fontSize:"18px",fontWeight:"semibold",children:"Role Description"}),(0,a.jsx)(i.gC,{spacing:4,children:o.K.map((function(e){return(0,a.jsxs)(i.xu,{width:"100%",padding:4,borderRadius:"md",backgroundColor:"blue.50",fontSize:"14px",children:[(0,a.jsx)(i.xu,{fontWeight:"semibold",children:e.label}),(0,a.jsx)(i.xu,{color:"gray.500",children:e.description})]},e.roleKey)}))})]})},l=n(97142),d=n(52313),u=n(74015),h=n(10867),p=n(50029),f=n(16835),m=n(87794),x=n.n(m),j=n(28609),b=n(97375),g=n(49609),y=n(15193),v=n(58144),w=n(82175),O=n(41664),P=n.n(O),C=n(67294),S=n(65698),k=n(45035),z=n(13230),_=n(10846),D=n(48591),Z=n(43871),E=n(79762),A=n(84304),R=n(49743),I=n(67087),V=n(795),U=n(27812),W=n(79042),N=n(15320),T=n(43072),q=function(e){var t=e.assignedSystems,n=e.onAssignedSystemChange,r=(0,l.C)(T.Ux);if((0,T.d6)(r,{skip:!r}),0===t.length)return null;return(0,a.jsxs)(W.iA,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,a.jsx)(W.hr,{children:(0,a.jsxs)(W.Tr,{children:[(0,a.jsx)(W.Th,{children:"System"}),(0,a.jsx)(W.Th,{})]})}),(0,a.jsx)(W.p3,{children:t.map((function(e){return(0,a.jsxs)(W.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,a.jsx)(W.Td,{children:e.name}),(0,a.jsx)(W.Td,{textAlign:"end",children:(0,a.jsx)(y.hU,{background:"gray.50","aria-label":"Unassign system from user",icon:(0,a.jsx)(N.l,{}),variant:"outline",size:"sm",onClick:function(){return function(e){n(t.filter((function(t){return t.fides_key!==e.fides_key})))}(e)},"data-testid":"unassign-btn"})})]},e.fides_key)}))})]})},L=function(e){var t=e.allSystems,n=e.assignedSystems,r=e.onChange,s=function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));r(t?n.filter((function(t){return t.fides_key!==e.fides_key})):[].concat((0,U.Z)(n),[e]))};return(0,a.jsx)(i.xu,{overflowY:"auto",maxHeight:"300px",children:(0,a.jsxs)(W.iA,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,a.jsx)(W.hr,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,a.jsxs)(W.Tr,{children:[(0,a.jsx)(W.Th,{children:"System"}),(0,a.jsx)(W.Th,{children:"Assign"})]})}),(0,a.jsx)(W.p3,{children:t.map((function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));return(0,a.jsxs)(W.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,a.jsx)(W.Td,{children:e.name}),(0,a.jsx)(W.Td,{children:(0,a.jsx)(A.r,{isChecked:t,onChange:function(){return s(e)},"data-testid":"assign-switch"})})]},e.fides_key)}))})]})})},K=function(e){var t=e.isOpen,n=e.onClose,r=e.assignedSystems,s=e.onAssignedSystemChange,o=(0,I.K3)().data,c=(0,C.useState)(""),l=c[0],d=c[1],u=(0,C.useState)(r),h=u[0],f=u[1],m=function(){var e=(0,p.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(h),n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=!o||0===o.length,b=(0,C.useMemo)((function(){return o?o.filter((function(e){return(0,V.R)(e,l)})):[]}),[o,l]),g=(0,C.useMemo)((function(){var e=new Set(h.map((function(e){return e.fides_key})));return b.every((function(t){return e.has(t.fides_key)}))}),[b,h]);return(0,a.jsxs)(Z.u_,{isOpen:t,onClose:n,size:"2xl",children:[(0,a.jsx)(Z.ZA,{}),(0,a.jsxs)(Z.hz,{p:8,"data-testid":"confirmation-modal",children:[(0,a.jsxs)(Z.xB,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(i.xv,{children:"Assign systems"}),(0,a.jsxs)(i.Ct,{bg:"green.500",color:"white",px:1,children:["Assigned to ",r.length," systems"]})]}),(0,a.jsx)(Z.fe,{"data-testid":"assign-systems-modal-body",children:j?(0,a.jsx)(i.xv,{children:"No systems found"}):(0,a.jsxs)(i.Kq,{spacing:4,children:[(0,a.jsxs)(i.kC,{justifyContent:"space-between",children:[(0,a.jsx)(i.xv,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Assign systems in your organization to this user"}),(0,a.jsx)(i.xu,{children:(0,a.jsxs)(E.NI,{display:"flex",alignItems:"center",children:[(0,a.jsx)(E.lX,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,a.jsx)(A.r,{size:"sm",id:"assign-all-systems",isChecked:g,onChange:function(e){if(e.target.checked&&o)f(b);else{var t=o?o.filter((function(e){return!b.includes(e)})):[];f(t)}},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,a.jsx)(R.Z,{search:l,onChange:d,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,a.jsx)(L,{allSystems:b,assignedSystems:h,onChange:f})]})}),(0,a.jsx)(Z.mz,{justifyContent:"flex-start",children:(0,a.jsxs)(y.hE,{size:"sm",children:[(0,a.jsx)(y.zx,{variant:"outline",mr:2,onClick:n,"data-testid":"cancel-btn",children:"Cancel"}),j?null:(0,a.jsx)(y.zx,{colorScheme:"primary",onClick:m,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},B=function(e){var t=e.label,n=e.roleKey,r=e.isSelected,s=e.isDisabled,o=e.assignedSystems,c=e.onAssignedSystemChange,l=(0,w.u6)().setFieldValue,d=(0,b.qY)(),h=s?"You do not have sufficient permissions to assign this role.":void 0;return r?(0,a.jsxs)(i.Kq,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",p:4,backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:[(0,a.jsxs)(i.kC,{alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)(i.xv,{fontSize:"md",fontWeight:"semibold",children:t}),(0,a.jsx)(D.St,{})]}),n!==u.A7.APPROVER?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.kC,{alignItems:"center",children:[(0,a.jsx)(i.xv,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"Assigned systems"}),(0,a.jsx)(z.Z,{label:"Assigned systems refer to those systems that have been specifically allocated to a user for management purposes. Users assigned to a system possess full edit permissions and are listed as the Data Steward for the respective system."})]}),(0,a.jsx)(y.zx,{disabled:s,title:h,colorScheme:"primary",size:"xs",width:"fit-content",onClick:d.onOpen,"data-testid":"assign-systems-btn",children:"Assign systems +"}),(0,a.jsx)(q,{assignedSystems:o,onAssignedSystemChange:c}),d.isOpen?(0,a.jsx)(K,{isOpen:d.isOpen,onClose:d.onClose,assignedSystems:o,onAssignedSystemChange:c}):null]}):null]}):(0,a.jsx)(y.zx,{onClick:function(){l("roles",[n])},justifyContent:"start",variant:"outline",height:"inherit",p:4,"data-testid":"role-option-".concat(t),title:h,disabled:s,children:t})};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Y={roles:[]},F=function(){var e,t=(0,j.pm)(),n=(0,l.C)(T.Ux);(0,T.d6)(n,{skip:!n});var s=(0,b.qY)(),c=s.isOpen,d=s.onOpen,m=s.onClose,O=(0,l.C)(T.R$),D=(0,C.useState)(O),Z=D[0],E=D[1],A=(0,T.G$)(),R=(0,f.Z)(A,1)[0];(0,C.useEffect)((function(){E(O)}),[O]);var I=(0,T.gU)(null!==n&&void 0!==n?n:"",{skip:!n}),V=I.data,U=I.isLoading,W=(0,T.lD)(),N=(0,f.Z)(W,1)[0],q=function(){var e=(0,p.Z)(x().mark((function e(r){var s,i,o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&m(),n){e.next=3;break}return e.abrupt("return");case 3:return s=r.roles.includes(u.A7.APPROVER),e.next=6,N({user_id:n,payload:{roles:r.roles}});case 6:if(i=e.sent,!(0,S.D4)(i)){e.next=10;break}return t((0,_.Vo)((0,S.e$)(i.error))),e.abrupt("return");case 10:if(s){e.next=18;break}return o=Z.map((function(e){return e.fides_key})),e.next=14,R({userId:n,fidesKeys:o});case 14:if(a=e.sent,!(0,S.D4)(a)){e.next=18;break}return t((0,_.Vo)((0,S.e$)(a.error))),e.abrupt("return");case 18:t((0,_.t5)("Permissions updated"));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,p.Z)(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!(Z.length>0&&t.roles.includes(u.A7.APPROVER))){e.next=6;break}d(),e.next=8;break;case 6:return e.next=8,q(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=(0,h.Tg)([u.Sh.USER_PERMISSION_ASSIGN_OWNERS]);if(!n)return null;if(U)return(0,a.jsx)(g.$,{});if(!K&&null!==V&&void 0!==V&&null!==(e=V.roles)&&void 0!==e&&e.includes(u.A7.OWNER))return(0,a.jsx)(i.xv,{"data-testid":"insufficient-access",children:"You do not have sufficient access to change this user's permissions."});var F=null!==V&&void 0!==V&&V.roles?{roles:V.roles}:Y;return(0,a.jsx)(w.J9,{onSubmit:L,initialValues:F,enableReinitialize:!0,children:function(e){var t=e.values,n=e.isSubmitting,s=e.dirty;return(0,a.jsxs)(w.l0,{children:[(0,a.jsxs)(i.Kq,{spacing:7,children:[(0,a.jsxs)(i.Kq,{spacing:3,"data-testid":"role-options",children:[(0,a.jsxs)(i.kC,{alignItems:"center",children:[(0,a.jsx)(i.xv,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"User role"}),(0,a.jsx)(z.Z,{label:"A user's role in the organization determines what parts of the UI they can access and which functions are available to them."})]}),o.K.map((function(e){var n=t.roles.indexOf(e.roleKey)>=0;return(0,a.jsx)(B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isSelected:n,isDisabled:e.roleKey===u.A7.OWNER&&!K,assignedSystems:Z,onAssignedSystemChange:E},e),e.roleKey)}))]}),(0,a.jsxs)(y.hE,{size:"sm",children:[(0,a.jsx)(P(),{href:k.e3,passHref:!0,children:(0,a.jsx)(y.zx,{variant:"outline",children:"Cancel"})}),(0,a.jsx)(y.zx,{colorScheme:"primary",type:"submit",isLoading:n,disabled:!s&&Z===O,"data-testid":"save-btn",children:"Save"})]})]}),(0,a.jsx)(v.Z,{isOpen:c,onClose:m,onConfirm:function(){return q(t)},title:"Change role to Approver",testId:"downgrade-to-approver-confirmation-modal",continueButtonText:"Yes",message:(0,a.jsx)(i.xv,{children:"Switching to an approver role will remove all assigned systems. Do you wish to proceed?"})})]})}})},H=n(70783),G=n(78221),$=n(74231),X=n(96016),J=$.Z_().required().min(8,"Password must have at least eight characters.").matches(/[0-9]/,"Password must have at least one number.").matches(/[A-Z]/,"Password must have at least one capital letter.").matches(/[a-z]/,"Password must have at least one lowercase letter.").matches(/[\W]/,"Password must have at least one symbol."),Q=n(37161),ee=n(26595);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=$.Ry().shape({password:J.label("Password"),passwordConfirmation:$.Z_().required().oneOf([$.iH("password")],"Passwords must match").label("Password confirmation")}),se={password:"",passwordConfirmation:""},ie=function(e){var t=function(e){var t=(0,b.qY)(),n=(0,j.pm)(),r=(0,T.ls)(),s=(0,f.Z)(r,1)[0],i=function(){var r=(0,p.Z)(x().mark((function r(i){var o;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s({id:e,new_password:i.password});case 2:o=r.sent,(0,ee.isErrorResult)(o)?n((0,_.Vo)((0,S.e$)(o.error))):(n((0,_.t5)("Successfully reset user's password. Please inform the user of their new password.")),t.onClose());case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return ne(ne({},t),{},{handleResetPassword:i})}(e.id),n=t.handleResetPassword,r=t.isOpen,s=t.onClose,o=t.onOpen;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.zx,{variant:"outline",size:"sm",onClick:o,"data-testid":"reset-password-btn",children:"Reset password"}),(0,a.jsxs)(Z.u_,{isCentered:!0,isOpen:r,onClose:s,children:[(0,a.jsx)(Z.ZA,{}),(0,a.jsx)(Z.hz,{children:(0,a.jsx)(w.J9,{initialValues:se,validationSchema:re,onSubmit:n,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,a.jsxs)(w.l0,{children:[(0,a.jsx)(Z.xB,{children:"Reset Password"}),(0,a.jsx)(Z.ol,{}),(0,a.jsx)(Z.fe,{children:(0,a.jsxs)(i.Kq,{direction:"column",spacing:4,children:[(0,a.jsx)(i.xv,{mb:2,children:"Choose a new password for this user."}),(0,a.jsx)(X.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}),(0,a.jsx)(X.j0,{name:"passwordConfirmation",label:"Confirm Password",placeholder:"********",type:"password",tooltip:"Must match above password."})]})}),(0,a.jsx)(Z.mz,{children:(0,a.jsxs)(y.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,a.jsx)(y.zx,{onClick:s,variant:"outline",width:"50%",children:"Cancel"}),(0,a.jsx)(y.zx,{colorScheme:"primary",disabled:!n||!r,isLoading:t,type:"submit",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})})]})}})})]})]})},oe=n(4612);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e){var t=function(e){var t=(0,b.qY)(),n=(0,j.pm)(),r=(0,C.useState)(""),s=r[0],i=r[1],o=(0,C.useState)(""),a=o[0],c=o[1],l=(0,T.ev)(),d=(0,f.Z)(l,2),u=d[0],h=d[1].isLoading,m=!!(e&&a&&s),g=function(){var r=(0,p.Z)(x().mark((function r(){return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:m&&u({id:e,old_password:s,new_password:a}).unwrap().then((function(){n((0,_.t5)("Password updated")),t.onClose()}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return ce(ce({},t),{},{changePasswordValidation:m,handleChange:function(e){"oldPassword"===e.target.name?i(e.target.value):c(e.target.value)},handleChangePassword:g,isLoading:h,newPasswordValue:a,oldPasswordValue:s})}(e.id),n=t.changePasswordValidation,r=t.handleChange,s=t.handleChangePassword,o=t.isLoading,c=t.isOpen,l=t.newPasswordValue,d=t.oldPasswordValue,u=t.onClose,h=t.onOpen;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.zx,{variant:"outline",size:"sm",onClick:h,"data-testid":"update-password-btn",children:"Update password"}),(0,a.jsxs)(Z.u_,{isCentered:!0,isOpen:c,onClose:u,children:[(0,a.jsx)(Z.ZA,{}),(0,a.jsxs)(Z.hz,{children:[(0,a.jsx)(Z.xB,{children:"Update Password"}),(0,a.jsx)(Z.ol,{}),(0,a.jsx)(Z.fe,{pb:6,children:(0,a.jsxs)(i.Kq,{direction:"column",spacing:"15px",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(oe.II,{isRequired:!0,name:"oldPassword",onChange:r,placeholder:"Old Password",type:"password",value:d,"data-testid":"input-oldPassword"})}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(oe.II,{isRequired:!0,name:"newPassword",onChange:r,placeholder:"New Password",type:"password",value:l,"data-testid":"input-newPassword"})})]})}),(0,a.jsxs)(Z.mz,{children:[(0,a.jsx)(y.zx,{bg:"white",marginRight:"10px",onClick:u,size:"sm",variant:"solid",width:"50%",children:"Cancel"}),(0,a.jsx)(y.zx,{bg:"primary.800",color:"white",disabled:!n,isLoading:o,mr:3,onClick:s,size:"sm",type:"submit",variant:"solid",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})]})]})]})},de=function(){var e=(0,l.C)(T.Ux),t=(0,l.C)(Q.dy),n=!!t&&t.id===e;return(0,a.jsx)(i.xu,{children:e?(0,a.jsxs)(i.Ug,{children:[n?(0,a.jsx)(le,{id:e}):null,(0,a.jsx)(h.ZP,{scopes:[u.Sh.USER_PASSWORD_RESET],children:(0,a.jsx)(ie,{id:e})})]}):null})};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={username:"",first_name:"",last_name:"",password:""},fe=$.Ry().shape({username:$.Z_().required().label("Username"),first_name:$.Z_().label("First name"),last_name:$.Z_().label("Last name"),password:J.label("Password")}),me=function(e){var t=e.onSubmit,n=e.initialValues,r=e.canEditNames,s=(0,j.pm)(),o=(0,l.T)(),c=(0,b.qY)(),d=(0,H.HK)().handleError,u=(0,l.C)(T.ZC),h=!u,f=!h&&!r,m=function(){var e=(0,p.Z)(x().mark((function e(n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:if(!(r=e.sent)||!("error"in r)){e.next=6;break}return d(r.error),e.abrupt("return");case 6:s((0,_.t5)("".concat(h?"User created. By default, new users are set to the Viewer role. To change the role, please go to the Permissions tab.":"User updated."))),r&&r.data&&o((0,T.Vv)(r.data.id));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=h?fe:fe.omit(["password"]);return(0,a.jsx)(w.J9,{onSubmit:m,initialValues:null!==n&&void 0!==n?n:pe,validationSchema:g,children:function(e){var t=e.dirty,n=e.isSubmitting,r=e.isValid;return(0,a.jsx)(w.l0,{children:(0,a.jsxs)(i.Kq,{maxW:["xs","xs","100%"],width:"100%",spacing:7,children:[(0,a.jsxs)(i.Kq,{spacing:6,maxWidth:"55%",children:[(0,a.jsxs)(i.kC,{children:[(0,a.jsx)(i.xv,{display:"flex",alignItems:"center",fontSize:"sm",fontWeight:"semibold",children:"Profile"}),(0,a.jsx)(i.xu,{marginLeft:"auto",children:(0,a.jsxs)(i.Ug,{children:[(0,a.jsx)(de,{}),h?null:(0,a.jsxs)(i.xu,{children:[(0,a.jsx)(y.hU,{"aria-label":"delete",icon:(0,a.jsx)(N.l,{}),variant:"outline",size:"sm",onClick:c.onOpen,"data-testid":"delete-user-btn"}),(0,a.jsx)(G.Z,he({user:u},c))]})]})})]}),(0,a.jsx)(X.j0,{name:"username",label:"Username",variant:"block",placeholder:"Enter new username",disabled:!h,isRequired:!0}),(0,a.jsx)(X.j0,{name:"first_name",label:"First Name",variant:"block",placeholder:"Enter first name of user",disabled:f}),(0,a.jsx)(X.j0,{name:"last_name",label:"Last Name",variant:"block",placeholder:"Enter last name of user",disabled:f}),u?null:(0,a.jsx)(X.j0,{name:"password",label:"Password",variant:"block",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol.",isRequired:!0})]}),(0,a.jsxs)(y.hE,{size:"sm",children:[(0,a.jsx)(P(),{href:k.e3,passHref:!0,children:(0,a.jsx)(y.zx,{variant:"outline",mr:3,children:"Cancel"})}),(0,a.jsx)(y.zx,{type:"submit",bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",disabled:!t||!r,isLoading:n,"data-testid":"save-user-btn",children:"Save"})]})]})})}})},xe=["onSubmit","initialValues"];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(e){var t=e.onSubmit,n=e.initialValues,r=(0,s.Z)(e,xe),o=(0,l.C)(T.Ux);(0,T.Fk)(o,{skip:!o});var p=(0,h.Tg)([u.Sh.USER_PERMISSION_UPDATE]),f=!o||!p,m=[{label:"Profile",content:(0,a.jsx)(me,be({onSubmit:t,initialValues:n},r))},{label:"Permissions",content:(0,a.jsxs)(i.kC,{gap:"97px",children:[(0,a.jsx)(i.xu,{w:{base:"100%",md:"50%",xl:"50%"},children:(0,a.jsx)(F,{})}),(0,a.jsx)(i.xu,{position:"absolute",top:"96px",right:6,height:"calc(100% + 100px)",overflowY:"scroll",padding:6,w:"35%",borderLeftWidth:"1px",children:(0,a.jsx)(c,{})})]}),isDisabled:f}];return(0,a.jsx)(d.Z,{data:m})}},26595:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(27396)},1902:function(e){e.exports={"grid-row":"BorderGrid_grid-row__gzSVf","grid-item":"BorderGrid_grid-item__7gUTW"}}}]);