(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{84304:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var r=n(68133),i=n(81439),s=n(15031),o=n(67294);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var c=["spacing","children"],l=(0,i.Gp)((function(e,t){var n=(0,i.jC)("Switch",e),l=(0,i.Lr)(e),u=l.spacing,d=void 0===u?"0.5rem":u,f=l.children,p=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(l,c),h=(0,r.O)(p),g=h.state,y=h.getInputProps,v=h.getCheckboxProps,m=h.getRootProps,j=h.getLabelProps,x=o.useMemo((function(){return a({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},n.container)}),[n.container]),b=o.useMemo((function(){return a({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},n.track)}),[n.track]),O=o.useMemo((function(){return a({userSelect:"none",marginStart:d},n.label)}),[d,n.label]);return o.createElement(i.m$.label,a({},m(),{className:(0,s.cx)("chakra-switch",e.className),__css:x}),o.createElement("input",a({className:"chakra-switch__input"},y({},t))),o.createElement(i.m$.span,a({},v(),{className:"chakra-switch__track",__css:b}),o.createElement(i.m$.span,{__css:n.thumb,className:"chakra-switch__thumb","data-checked":(0,s.PB)(g.isChecked),"data-hover":(0,s.PB)(g.isHovered)})),f&&o.createElement(i.m$.span,a({className:"chakra-switch__label"},j(),{__css:O}),f))}));s.Ts&&(l.displayName="Switch")},47398:function(e,t,n){"use strict";n.d(t,{u:function(){return x}});var r=n(33030),i=n(46871),s=n(81439),o=n(15031),a=n(1358),c=n(54815),l=n(14332),u=n(67294),d=n(97375),f=n(44697),p=n(26450);function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var y={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},v=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"];var m=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor"],j=(0,s.m$)(c.E.div),x=(0,s.Gp)((function(e,t){var n,c,x=(0,s.mq)("Tooltip",e),b=(0,s.Lr)(e),O=(0,s.Fg)(),w=b.children,k=b.label,C=b.shouldWrapChildren,P=b["aria-label"],S=b.hasArrow,_=b.bg,E=b.portalProps,D=b.background,T=b.backgroundColor,z=b.bgColor,I=g(b,m),F=null!=(n=null!=(c=null!=D?D:T)?c:_)?n:z;F&&(x.bg=F,x[r.j.arrowBg.var]=(0,o.K1)(O,"colors",F));var R,Z=function(e){void 0===e&&(e={});var t=e,n=t.openDelay,i=void 0===n?0:n,s=t.closeDelay,a=void 0===s?0:s,c=t.closeOnClick,l=void 0===c||c,y=t.closeOnMouseDown,m=t.closeOnEsc,j=void 0===m||m,x=t.onOpen,b=t.onClose,O=t.placement,w=t.id,k=t.isOpen,C=t.defaultIsOpen,P=t.arrowSize,S=void 0===P?10:P,_=t.arrowShadowColor,E=t.arrowPadding,D=t.modifiers,T=t.isDisabled,z=t.gutter,I=t.offset,F=t.direction,R=g(t,v),Z=(0,d.qY)({isOpen:k,defaultIsOpen:C,onOpen:x,onClose:b}),A=Z.isOpen,L=Z.onOpen,N=Z.onClose,W=(0,r.D)({enabled:A,placement:O,arrowPadding:E,modifiers:D,gutter:z,offset:I,direction:F}),M=W.referenceRef,q=W.getPopperProps,$=W.getArrowInnerProps,X=W.getArrowProps,G=(0,d.Me)(w,"tooltip"),K=u.useRef(null),B=u.useRef(),U=u.useRef(),V=u.useCallback((function(){T||(B.current=window.setTimeout(L,i))}),[T,L,i]),Y=u.useCallback((function(){B.current&&clearTimeout(B.current),U.current=window.setTimeout(N,a)}),[a,N]),H=u.useCallback((function(){l&&Y()}),[l,Y]),Q=u.useCallback((function(){y&&Y()}),[y,Y]),J=u.useCallback((function(e){A&&"Escape"===e.key&&Y()}),[A,Y]);(0,f.b)("keydown",j?J:void 0),u.useEffect((function(){return function(){clearTimeout(B.current),clearTimeout(U.current)}}),[]),(0,f.b)("mouseleave",Y,(function(){return K.current}));var ee=u.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),h({},e,{ref:(0,p.lq)(K,t,M),onMouseEnter:(0,o.v0)(e.onMouseEnter,V),onClick:(0,o.v0)(e.onClick,H),onMouseDown:(0,o.v0)(e.onMouseDown,Q),onFocus:(0,o.v0)(e.onFocus,V),onBlur:(0,o.v0)(e.onBlur,Y),"aria-describedby":A?G:void 0})}),[V,Y,Q,A,G,H,M]),te=u.useCallback((function(e,t){var n;return void 0===e&&(e={}),void 0===t&&(t=null),q(h({},e,{style:h({},e.style,(n={},n[r.j.arrowSize.var]=S?(0,o.px)(S):void 0,n[r.j.arrowShadowColor.var]=_,n))}),t)}),[q,S,_]),ne=u.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),h({ref:t},R,e,{id:G,role:"tooltip",style:h({},e.style,{position:"relative",transformOrigin:r.j.transformOrigin.varRef})})}),[R,G]);return{isOpen:A,show:V,hide:Y,getTriggerProps:ee,getTooltipProps:ne,getTooltipPositionerProps:te,getArrowProps:X,getArrowInnerProps:$}}(h({},I,{direction:O.direction}));if((0,o.HD)(w)||C)R=u.createElement(s.m$.span,h({tabIndex:0},Z.getTriggerProps()),w);else{var A=u.Children.only(w);R=u.cloneElement(A,Z.getTriggerProps(A.props,A.ref))}var L=!!P,N=Z.getTooltipProps({},t),W=L?(0,o.CE)(N,["role","id"]):N,M=(0,o.ei)(N,["role","id"]);return k?u.createElement(u.Fragment,null,R,u.createElement(l.M,null,Z.isOpen&&u.createElement(i.h_,E,u.createElement(s.m$.div,h({},Z.getTooltipPositionerProps(),{__css:{zIndex:x.zIndex,pointerEvents:"none"}}),u.createElement(j,h({variants:y},W,{initial:"exit",animate:"enter",exit:"exit",__css:x}),k,L&&u.createElement(a.TX,M,P),S&&u.createElement(s.m$.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},u.createElement(s.m$.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:x.bg}}))))))):u.createElement(u.Fragment,null,w)}));o.Ts&&(x.displayName="Tooltip")},80649:function(e,t,n){"use strict";n.d(t,{Gn:function(){return l},zR:function(){return c}});var r=n(43871),i=n(68527),s=n(15193),o=n(48591),a=n(85893),c=function(e){var t=e.title,n=e.onDelete;return(0,a.jsxs)(r.OX,{py:2,display:"flex",alignItems:"center",children:[(0,a.jsx)(i.xv,{mr:"2",children:t}),n?(0,a.jsx)(s.hU,{"aria-label":"delete",icon:(0,a.jsx)(o.lr,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},l=function(e){var t=e.onClose,n=e.formId,i=e.isSaving;return(0,a.jsxs)(r.ze,{justifyContent:"flex-start",children:[(0,a.jsx)(s.zx,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,a.jsx)(s.zx,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:i,children:"Save"})]})};t.ZP=function(e){var t=e.header,n=e.description,c=e.isOpen,l=e.onClose,u=e.children,d=e.footer;return(0,a.jsxs)(r.dy,{placement:"right",isOpen:c,onClose:l,size:"lg",children:[(0,a.jsx)(r.P1,{}),(0,a.jsxs)(r.sc,{"data-testid":"edit-drawer-content",py:2,children:[(0,a.jsx)(i.xu,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,a.jsx)(s.zx,{variant:"ghost",onClick:l,"data-testid":"close-drawer-btn",children:(0,a.jsx)(o.LG,{width:"17px"})})}),t,(0,a.jsxs)(r.Ng,{children:[n?(0,a.jsx)(i.xv,{fontSize:"sm",mb:4,children:n}):null,u]}),d]})]})}},26308:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(50029),i=n(16835),s=n(87794),o=n.n(s),a=n(68527),c=n(15193),l=n(48591),u=n(81655),d=n(41664),f=n.n(d),p=(n(67294),{src:"/_next/static/media/logo.c87f81b9.svg",height:64,width:209}),h=n(97142),g=n(18459),y=n(37161),v=n(58101),m=n(85893),j=function(){var e=function(){var e;return{username:(null!==(e=(0,h.C)(y.dy))&&void 0!==e?e:{username:""}).username}}().username,t=(0,y._y)(),n=(0,i.Z)(t,1)[0],s=(0,h.T)(),d=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({});case 2:s((0,y.kS)());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(a.kC,{as:"header",height:12,width:"100%",paddingX:10,flexShrink:0,justifyContent:"space-between",alignItems:"center",backgroundColor:"gray.50",children:[(0,m.jsx)(f(),{href:g.gp,passHref:!0,children:(0,m.jsx)(a.rU,{display:"flex",children:(0,m.jsx)(v.Z,{src:p,width:83,height:26,alt:"Fides Logo"})})}),(0,m.jsxs)(a.kC,{alignItems:"center",children:[(0,m.jsx)(a.rU,{href:"https://ethyca.github.io/fides/",isExternal:!0,children:(0,m.jsx)(c.zx,{size:"sm",variant:"ghost",children:(0,m.jsx)(l.UO,{color:"gray.700",boxSize:4})})}),e&&(0,m.jsxs)(u.v2,{children:[(0,m.jsx)(u.j2,{as:c.zx,size:"sm",variant:"ghost","data-testid":"header-menu-button",children:(0,m.jsx)(l.tB,{color:"gray.700"})}),(0,m.jsxs)(u.qy,{shadow:"xl",children:[(0,m.jsx)(a.Kq,{px:3,py:2,spacing:1,children:(0,m.jsx)(a.xv,{fontWeight:"medium",children:e})}),(0,m.jsx)(u.R,{}),(0,m.jsx)(u.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:d,"data-testid":"header-menu-sign-out",children:"Sign out"})]})]})]})]})}},18343:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(68527),i=n(9008),s=n.n(i),o=n(11163),a=(n(67294),n(53700)),c=n(26308),l=n(93549),u=n(31444),d=n(70918),f=n(15193),p=n(45035),h=n(85893),g=function(){var e=(0,o.useRouter)();return(0,h.jsx)(r.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,h.jsxs)(r.xu,{children:[(0,h.jsxs)(r.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,h.jsx)(r.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,h.jsx)(f.zx,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,h.jsxs)(r.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},y=function(e){var t=e.children,n=e.title,i=(0,a.hz)(),f=(0,o.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,y=!(i.flags.privacyRequestsConfiguration&&p),v=(0,d.JE)(void 0,{skip:y}).data,m=(0,d.PW)(void 0,{skip:y}).data,j=i.flags.privacyRequestsConfiguration&&(!v||!m)&&p;return(0,h.jsxs)(r.kC,{"data-testid":n,direction:"column",children:[(0,h.jsxs)(s(),{children:[(0,h.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,h.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,h.jsx)(c.Z,{}),(0,h.jsx)(u.Z,{}),(0,h.jsxs)(r.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,h.jsx)(r.xu,{flex:0,flexShrink:0,children:(0,h.jsx)(l.U,{})}),(0,h.jsxs)(r.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,h.jsx)(g,{}):null,t]})]})]})}},37903:function(e,t,n){"use strict";n.d(t,{Rt:function(){return d},cK:function(){return f}});var r=n(59499),i=n(27812),s=n(68527),o=n(79042),a=n(68133),c=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t,n,r,i,o=e.system,a=e.attribute;return"name"===a?(0,c.jsx)("label",{htmlFor:"checkbox-".concat(o.fides_key),children:o.name}):"fidesctl_meta.resource_id"===a?(0,c.jsx)(s.xu,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:null===(t=o.fidesctl_meta)||void 0===t?void 0:t.resource_id,children:null===(n=o.fidesctl_meta)||void 0===n?void 0:n.resource_id}):(0,c.jsx)(c.Fragment,{children:(r=o,i=a,i.split(".").reduce((function(e,t){return e?e[t]:void 0}),r))})},f=function(e){var t=e.allSystems,n=e.checked,r=e.onChange,l=e.columns,f=e.tableHeadProps,p=function(e){var t=n.indexOf(e)>=0;r(t?n.filter((function(t){return t.fides_key!==e.fides_key})):[].concat((0,i.Z)(n),[e]))},h=t.length===n.length;return 0===l.length?(0,c.jsx)(s.xv,{children:"No columns selected to display"}):(0,c.jsxs)(o.iA,{size:"sm",sx:{tableLayout:"fixed"},children:[(0,c.jsx)(o.hr,u(u({},f),{},{children:(0,c.jsxs)(o.Tr,{children:[(0,c.jsx)(o.Th,{width:"15px",children:(0,c.jsx)(a.XZ,{colorScheme:"complimentary",title:"Select All",isChecked:h,onChange:function(e){e.target.checked?r(t):r([])},"data-testid":"select-all"})}),l.map((function(e){return(0,c.jsx)(o.Th,{children:e.name},e.attribute)}))]})})),(0,c.jsx)(o.p3,{children:t.map((function(e){return(0,c.jsxs)(o.Tr,{children:[(0,c.jsx)(o.Td,{children:(0,c.jsx)(a.XZ,{colorScheme:"complimentary",value:e.fides_key,isChecked:n.indexOf(e)>=0,onChange:function(){return p(e)},"data-testid":"checkbox-".concat(e.fides_key)})}),l.map((function(t){return(0,c.jsx)(o.Td,{children:(0,c.jsx)(d,{system:e,attribute:t.attribute})},t.attribute)}))]},e.fides_key)}))})]})}},69970:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var r=n(59499),i=n(67294),s=n(41438),o=n(53652);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.resourceType,n=e.fidesKeys,r=e.skip,a=(0,i.useState)(!0),l=a[0],u=a[1],d=(0,s.Wm)({resource_type:t,fides_keys:n},{skip:r,pollingInterval:l?3e3:void 0}),f=!!d.data&&d.data.every((function(e){return e.status===o.Wg.COMPLETE||e.status===o.Wg.FAILED||e.status===o.Wg.REVIEWED}));return(0,i.useEffect)((function(){f&&u(!1)}),[f]),c(c({},d),{},{isClassificationFinished:f})}},65698:function(e,t,n){"use strict";n.d(t,{D4:function(){return r.D4},MM:function(){return l},Ot:function(){return o},e$:function(){return s},nU:function(){return c},tB:function(){return a}});var r=n(27396),i="An unexpected error occurred. Please try again.",s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if((0,r.Bw)(e)){if((0,r.hE)(e.data))return e.data.detail;if((0,r.cz)(e.data)){var n,s=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===s||void 0===s?void 0:s.msg,": ").concat(null===s||void 0===s?void 0:s.loc)}if(409===e.status&&(0,r.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,r.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function a(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:i};if((0,r.oK)(e))return{status:e.originalStatus,message:e.data};if((0,r.Bw)(e)){var n=e.status;return{status:n,message:s(e,t.message)}}return t},l=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))}},99039:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(53700),i=n(45035),s=function(){return{systemOrDatamapRoute:(0,r.hz)().plus?i.oG:i.So}}},22391:function(e,t,n){"use strict";n.d(t,{TL:function(){return f},UI:function(){return d}});var r=n(59499),i=n(53959),s=n(41664),o=n.n(s),a=(n(67294),n(85893));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.variant,n=e.children,r=e.href,s=e.isActive,c=e.isDisabled,l="primary"===t?i.c2:i._p;return c?(0,a.jsx)(l,{isDisabled:c,href:r,isActive:s,children:n}):(0,a.jsx)(o(),{href:r,passHref:!0,children:(0,a.jsx)(l,{isActive:s,children:n})})},d=function(e){return(0,a.jsx)(u,l({variant:"primary"},e))},f=function(e){return(0,a.jsx)(u,l({variant:"secondary"},e))}},93549:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(53959),i=n(68527),s=n(11163),o=(n(67294),n(58536)),a=n(22391),c=n(85893),l=function(){var e=(0,s.useRouter)(),t=(0,o.Y)({path:e.pathname});return t.active?(0,c.jsxs)(i.gC,{as:"nav",align:"left",spacing:4,width:"200px",children:[(0,c.jsx)(i.X6,{size:"md",children:t.active.title}),(0,c.jsx)(r.$6,{children:t.active.children.map((function(t){var n=t.title,r=t.path,i=e.pathname.startsWith(r);return(0,c.jsx)(a.TL,{href:r,isActive:i,children:n},n)}))})]}):null}},31444:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(68527),i=n(11163),s=(n(67294),n(58536)),o=n(22391),a=n(85893),c=function(){var e=(0,i.useRouter)(),t=(0,s.Y)({path:e.pathname});return(0,a.jsx)(r.kC,{as:"nav",height:12,paddingX:10,gap:1,flexShrink:0,alignItems:"center",borderBottom:"1px",borderColor:"gray.100",children:t.groups.map((function(e){var n,r=e.children[0].path,i=e.title===(null===(n=t.active)||void 0===n?void 0:n.title);return(0,a.jsx)(o.UI,{href:r,isActive:i,children:e.title},e.title)}))})}},10846:function(e,t,n){"use strict";n.d(t,{MA:function(){return u},Vo:function(){return f},t5:function(){return d}});var r=n(59499),i=n(68527),s=n(85893);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(c,{message:e});return a(a({},u),{description:t})},f=function(e){var t=(0,s.jsx)(l,{message:e});return a(a({},u),{description:t,status:"error"})}},64330:function(e,t,n){"use strict";var r=n(4730),i=n(59499),s=n(47398),o=n(68527),a=n(53652),c=n(85893),l=["status","resource"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.status,n=e.resource,u=(0,r.Z)(e,l),f=function(e){var t,n=e===a.j.DATASETS?"dataset":"system";return t={},(0,i.Z)(t,a.Wg.PROCESSING,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n?"generated and":""," classified. You will be notified when this process is complete"),color:"orange"}),(0,i.Z)(t,a.Wg.CREATED,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n&&"generated and"," and classified. You will be notified when this process is complete"),color:"orange"}),(0,i.Z)(t,a.Wg.COMPLETE,{title:"Awaiting Review",tooltip:"This ".concat(n," has been automatically classified. Review the results and update the ").concat(n,"."),color:"orange"}),(0,i.Z)(t,a.Wg.REVIEWED,{title:"Classified",tooltip:"This ".concat(n," has been classified."),color:"green"}),(0,i.Z)(t,a.Wg.FAILED,{title:"Failed",tooltip:"This ".concat(n," must be manually updated."),color:"red"}),(0,i.Z)(t,"unknown",{title:"Unknown",tooltip:"This ".concat(n," must be manually updated."),color:"gray"}),t}(n)[null!==t&&void 0!==t?t:"unknown"];return(0,c.jsx)(s.u,{"data-testid":"classification-status-badge",label:f.tooltip,children:(0,c.jsx)(o.Ct,d(d({variant:"solid",colorScheme:f.color,w:"100%",textAlign:"center"},u),{},{"data-testid":"classification-status-badge",children:f.title}))})}},97589:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){var t=e.dataCategories,n=e.mostLikelyCategories;return null!==t&&void 0!==t&&t.length?t:null!==n&&void 0!==n&&n.length?[n.reduce((function(e,t){var n,r;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(r=e.confidence)&&void 0!==r?r:0)?t:e})).fides_key]:[]}},36026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var r=n(68527),i=n(49609),s=n(15193),o=n(41664),a=n.n(o),c=n(11163),l=n(67294),u=n(2664),d=n(97142),f=n(69970),p=n(99039),h=n(18343),g=n(41438),y=n(67087),v=n(79042),m=n(84304),j=n(85893),x=function(e){var t=e.hideEmpty,n=e.onChange;return(0,j.jsx)(m.r,{colorScheme:"secondary",isChecked:t,onChange:function(e){return n(e.target.checked)}})},b=n(37903),O=n(64330),w=n(53652),k=n(59499),C=n(50029),P=n(16835),S=n(87794),_=n.n(S),E=n(28609),D=n(82175),T=n(56661),z=n(80649),I=n(65698),F=n(10846),R=n(24256),Z=n(94090),A=n(53959),L=n(73662),N=n(97589);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.headingLevel,n=e.title,i=e.children;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.X6,{as:t,children:(0,j.jsxs)(Z.KF,{_expanded:{color:"complimentary.500"},_hover:{bg:"gray.50"},pl:0,children:[(0,j.jsx)(r.xu,{flex:"1",textAlign:"left",children:n}),(0,j.jsx)(Z.XE,{})]})}),(0,j.jsx)(Z.Hk,{py:2,px:0,children:i})]})},$=function(e){var t=e.flow,n=e.index,i=e.classifyDataFlows,s=e.type,o=(0,D.u6)().setFieldValue,a=(0,d.C)(R.qb),c=(0,d.C)(R.L5),l=null===i||void 0===i?void 0:i.find((function(e){return e.fides_key===t.fides_key})),u=null===l||void 0===l?void 0:l.classifications.map((function(e){var t=e.label,n=e.aggregated_score;return M(M({},c.get(t)),{},{fides_key:t,confidence:n})})),f=(0,N.I)({dataCategories:t.data_categories,mostLikelyCategories:u});return(0,j.jsx)(Z.Qd,{pl:4,borderBottom:"none","data-testid":"accordion-item-".concat(t.fides_key),children:(0,j.jsx)(q,{headingLevel:"h3",title:t.fides_key,children:a?(0,j.jsx)(r.xu,{pr:2,children:(0,j.jsx)(A.P$,{mostLikelyCategories:u||[],dataCategories:a,checked:f,onChecked:function(e){o("".concat(s,"[").concat(n,"].data_categories"),e)}})}):null})})},X=function(e){var t=e.classifyDataFlows,n=e.type,i=(0,D.u6)().values[n],s={ingress:"source",egress:"destination"}[n];return 0===i.length?(0,j.jsxs)(r.xv,{p:4,children:["No ",n,"es found."]}):(0,j.jsx)(Z.Qd,{p:0,"data-testid":"accordion-item-".concat(n),children:(0,j.jsx)(q,{headingLevel:"h2",title:"Connected ".concat((0,L.G8)(s)," Systems"),children:i.map((function(e,r){return(0,j.jsx)($,{flow:e,index:r,classifyDataFlows:t,type:n},e.fides_key)}))})})},G=function(e){var t=e.system,n=e.classificationInstance;return(null==t.ingress||0===t.ingress.length)&&(null==t.egress||0===t.egress.length)?(0,j.jsx)(r.xv,{children:"No data flows found on this system."}):(0,j.jsxs)(r.Kq,{children:[(0,j.jsx)(r.xv,{fontWeight:"semibold",children:t.name}),(0,j.jsxs)(Z.UQ,{allowMultiple:!0,pl:2,children:[(0,j.jsx)(X,{classifyDataFlows:null===n||void 0===n?void 0:n.ingress,type:"ingress"}),(0,j.jsx)(X,{classifyDataFlows:null===n||void 0===n?void 0:n.egress,type:"egress"})]})]})},K=n(32523);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V="data-flow-form",Y=function(e){var t=e.label,n=e.value;return(0,j.jsxs)(r.P4,{children:[(0,j.jsxs)(r.xv,{as:"span",fontWeight:"semibold",children:[t,":"]})," ",n]})},H=function(e){return(0,T.Ln)({fides_key:"string"},e)},Q=function(e){var t,n,s=e.system,o=e.isOpen,a=e.onClose,c=function(e){var t=e.system,n=e.onClose,i=(0,E.pm)();(0,R.MO)();var s,o=(0,g.$b)(t.fides_key),a=o.data,c=o.isLoading;if(null==a||H(a)){var l,u=t.ingress||[],d=t.egress||[],f=(null===a||void 0===a?void 0:a.ingress.filter((function(e){return u.find((function(t){return t.fides_key===e.fides_key}))})))||[],p=(null===a||void 0===a?void 0:a.egress.filter((function(e){return d.find((function(t){return t.fides_key===e.fides_key}))})))||[],h=f.length>0,y=p.length>0,v=!h&&!y,m=u.length>0,x=d.length>0,b=!m&&!x;l=m&&x?"which send or receive data from your selected system":m?"from which your selected system receives data":"to which your selected system sends data",s=(null===a||void 0===a?void 0:a.status)===w.Wg.PROCESSING?(0,j.jsx)(r.xv,{fontSize:"sm","data-testid":"processing",children:"Fides classify is still classifying, please check back later."}):b?(0,j.jsx)(r.xv,{fontSize:"sm","data-testid":"no-data-flows",children:"Fides classify did not detect any additional systems sending or receiving data from your selected system."}):v?(0,j.jsx)(r.xv,{fontSize:"sm","data-testid":"no-classification",children:"Fides classify has detected additional systems which send or receive data from your selected system, but was unable to classify these data flows. You may classify these data flows manually below."}):(0,j.jsxs)(r.xv,{fontSize:"sm","data-testid":"data-flow-with-classification",children:["Fides classify has detected additional systems ",l,". Each system has been automatically assigned data categories. Choose to keep the assigned data category selection or review more classification recommendations."]})}else s=(0,j.jsx)(r.xv,{fontSize:"sm","data-testid":"no-classification-instance",children:"No classification instance found but you may still manually classify the data flows."});var O=(0,K.qQ)(),k=(0,P.Z)(O,1)[0],S=(0,g.MD)(),D=(0,P.Z)(S,1)[0],T=function(){var e=(0,C.Z)(_().mark((function e(t){var r,s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c&&a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,k(t);case 5:if(r=e.sent,!(0,I.D4)(r)){e.next=9;break}return i((0,F.Vo)((0,I.e$)(r.error))),e.abrupt("return");case 9:return e.next=11,D({dataset_fides_key:t.fides_key,status:w.Wg.REVIEWED,resource_type:w.j.SYSTEMS});case 11:if(s=e.sent,!(0,I.D4)(s)){e.next=15;break}return i((0,F.Vo)((0,I.e$)(s.error))),e.abrupt("return");case 15:i((0,F.t5)("System data flows classified and approved")),n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),i((0,F.Vo)("".concat(e.t0)));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}();return{description:s,classificationInstance:a,isLoadingClassificationInstance:c,handleSave:T}}({system:s,onClose:a}),l=c.description,u=c.isLoadingClassificationInstance,d=c.classificationInstance,f=c.handleSave,p=function(){var e=(0,C.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ingress,r=t.egress,e.next=3,f(U(U({},s),{},{ingress:n,egress:r}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={egress:null!==(t=s.egress)&&void 0!==t?t:[],ingress:null!==(n=s.ingress)&&void 0!==n?n:[]},y=H(d)?d.status:void 0,v=y!==w.Wg.PROCESSING;return(0,j.jsx)(D.J9,{initialValues:h,onSubmit:p,children:function(e){var t=e.isSubmitting;return(0,j.jsx)(D.l0,{id:V,children:(0,j.jsx)(z.ZP,{isOpen:o,onClose:a,header:(0,j.jsx)(z.zR,{title:"System classification details"}),footer:y!==w.Wg.PROCESSING?(0,j.jsx)(z.Gn,{onClose:a,formId:V,isSaving:t}):void 0,children:u?(0,j.jsx)(r.M5,{children:(0,j.jsx)(i.$,{})}):(0,j.jsxs)(r.Kq,{spacing:4,children:[(0,j.jsxs)(r.MI,{columns:2,spacingY:2,children:[(0,j.jsx)(Y,{label:"System name",value:s.name}),(0,j.jsx)(Y,{label:"System type",value:s.system_type}),(0,j.jsx)(Y,{label:"Classification status",value:(0,j.jsx)(O.Z,{status:y,resource:w.j.SYSTEMS,display:"inline"})})]}),l,v?(0,j.jsx)(G,{system:s,classificationInstance:H(d)?d:void 0}):null]})})})}})},J=function(e){var t=e.systems,n=(0,d.T)(),i=(0,d.C)(g.Oq),s=(0,d.C)(K.o5),o=(0,l.useState)(!1),a=o[0],c=o[1],u=a?t.filter((function(e){var t;return null===(t=i.get(e.fides_key))||void 0===t?void 0:t.has_labels})):t;return(0,j.jsxs)(r.Kq,{children:[(0,j.jsxs)(r.kC,{flexShrink:0,alignItems:"center",children:[(0,j.jsx)(r.xv,{fontSize:"xs",mr:2,size:"sm",children:"Only Show Findings"}),(0,j.jsx)(x,{hideEmpty:a,onChange:c})]}),(0,j.jsxs)(v.iA,{size:"sm","data-testid":"systems-classify-table",children:[(0,j.jsx)(v.hr,{children:(0,j.jsxs)(v.Tr,{children:[(0,j.jsx)(v.Th,{children:"System Name"}),(0,j.jsx)(v.Th,{maxWidth:"100px",children:"Classification Status"})]})}),(0,j.jsx)(v.p3,{children:u.map((function(e){var t=i.get(e.fides_key);return(0,j.jsxs)(v.Tr,{"data-testid":"row-".concat(e.fides_key),_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return function(e){n((0,K.Pj)(e.fides_key))}(e)},children:[(0,j.jsx)(v.Td,{children:(0,j.jsx)(b.Rt,{system:e,attribute:"name"})}),(0,j.jsx)(v.Td,{"data-testid":"status-".concat(e.fides_key),children:(0,j.jsx)(O.Z,{resource:w.j.SYSTEMS,status:null===t||void 0===t?void 0:t.status})})]},e.fides_key)}))})]}),s?(0,j.jsx)(Q,{system:s,isOpen:null!=s,onClose:function(){return n((0,K.Pj)(void 0))}}):null]})},ee=function(e){var t=e.children;return(0,j.jsx)(h.Z,{title:"Classify Systems",children:(0,j.jsxs)(r.Kq,{spacing:4,children:[(0,j.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",children:"Classified systems"}),t]})})},te=function(){var e=(0,c.useRouter)(),t=(0,u.useDispatch)(),n=(0,p.V)().systemOrDatamapRoute,o=(0,g.x8)(),h=o.isSuccess,v=o.isLoading,m=(0,d.C)(y.PG),x=(0,y.K3)(void 0,{skip:!h||m&&m.length>0}),b=x.isLoading,O=x.data,k=m||O;(0,l.useEffect)((function(){O&&O.length&&t((0,y.Wc)(O))}),[t,O]);var C=(0,f.w)({resourceType:w.j.SYSTEMS,fidesKeys:null===k||void 0===k?void 0:k.map((function(e){return e.fides_key})),skip:!h}),P=C.isLoading,S=C.data,_=C.isClassificationFinished;return(0,l.useEffect)((function(){v||h||e.push("/")}),[e,h,v]),b||P?(0,j.jsx)(ee,{children:(0,j.jsx)(i.$,{})}):S&&0!==S.length?(0,j.jsxs)(ee,{children:[(0,j.jsx)(r.xv,{children:_?"All systems have been classifed by Fides.":"Systems are still being classified by Fides."}),k&&k.length?(0,j.jsx)(J,{systems:k}):"No systems with classifications found",(0,j.jsx)(r.Ug,{children:(0,j.jsx)(a(),{href:n,passHref:!0,children:(0,j.jsx)(s.zx,{variant:"primary",size:"sm",children:"Finish"})})})]}):(0,j.jsx)(ee,{children:(0,j.jsx)(r.xv,{"data-testid":"no-classifications",children:"No classifications found. Have you run a scan?"})})}},27396:function(e,t,n){"use strict";n.d(t,{Bw:function(){return o},D4:function(){return i},Dy:function(){return c},XD:function(){return l},cz:function(){return u},hE:function(){return a},oK:function(){return s}});var r=n(56661),i=function(e){return"error"in e},s=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,r.Ln)({status:"number",data:{}},e)},a=function(e){return(0,r.Ln)({detail:"string"},e)},c=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},61028:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classify-systems",function(){return n(36026)}])},56661:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return o}});const r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>s(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>s(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>s(t,n[e])))},o=e=>t=>r(e,t);class a{static narrow(e){return new a((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a((e=>t(e)&&n(e)))}}new a((e=>!0))}},function(e){e.O(0,[2437,5738,9774,2888,179],(function(){return t=61028,e(e.s=t);var t}));var t=e.O();_N_E=t}]);